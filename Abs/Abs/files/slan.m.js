!function(e,r){function i(e){return function(r){return{}.toString.call(r)=="[object "+e+"]"}}function l(){return f++}function m(e){return e.match(p)[0]}function y(e){for(e=e.replace(h,"/");e.match(g);)e=e.replace(g,"/");return e=e.replace(E,"$1/")}function b(e){var r=e.length-1,t=e.charAt(r);return"#"===t?e.substring(0,r):".js"===e.substring(r-2)||e.indexOf("?")>0||".css"===e.substring(r-3)||"/"===t?e:e+".js"}function T(e){var t,r=n.paths;return r&&(t=e.match(A))&&s(r[t[1]])&&(e=r[t[1]]+t[2]),e}function w(e){var r=n.vars;return r&&e.indexOf("{")>-1&&(e=e.replace(_,function(e,t){return s(r[t])?r[t]:e})),e}function x(e){var r=n.map,t=e;if(r)for(var i=0,a=r.length;a>i;i++){var s=r[i];if(t=u(s)?s(e)||e:e.replace(s[0],s[1]),t!==e)break}return t}function U(e,r){var t,i=e.charAt(0);if(D.test(e))t=e;else if("."===i)t=y((r?m(r):n.cwd)+e);else if("/"===i){var a=n.cwd.match(S);t=a?a[0]+e.substring(1):e}else t=n.base+e;return 0===t.indexOf("//")&&(t=location.protocol+t),t}function C(e,r){if(!e)return"";var t=n.alias&&n.alias[e];t&&s(t)&&(e=t),e=T(e),e=w(e),e=b(e);var i=U(e,r);return i=x(i),!t||z[i]||s(t)||(z[i]={exports:t,status:re.EXECUTED,exec:te.prototype.exec}),i}function G(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function F(e,r,t,n){var i=L.test(e),a=N.createElement(i?"link":"script");t&&(a.charset=t),c(n)||a.setAttribute("crossorigin",n),V(a,r,i,e),i?(a.rel="stylesheet",a.href=e):(a.async=!0,a.src=e),$=a,k?R.insertBefore(a,k):R.appendChild(a),$=null}function V(e,r,n,i){function s(){e.onload=e.onerror=e.onreadystatechange=null,n||t.data.debug||R.removeChild(e),e=null,r()}var a="onload"in e;return!n||!B&&a?void(a?(e.onload=s,e.onerror=function(){var a={uri:i,node:e,callback:r,isCSS:n};t.emit("error",a),a.pause&&(r=function(){}),s()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&s()}):void setTimeout(function(){H(e,r)},1)}function H(e,r){var n,t=e.sheet;if(B)t&&(n=!0);else if(t)try{t.cssRules&&(n=!0)}catch(i){"NS_ERROR_DOM_SECURITY_ERR"===i.name&&(n=!0)}setTimeout(function(){n?r():H(e,r)},20)}function K(){if($)return $;if(X&&"interactive"===X.readyState)return X;for(var e=R.getElementsByTagName("script"),r=e.length-1;r>=0;r--){var t=e[r];if("interactive"===t.readyState)return X=t}}function Y(e){var r=[];return e.replace(P,"").replace(M,function(e,t,n){n&&r.push(n)}),r}function te(e,r){this.uri=e,this.dependencies=r||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var t=e.seajs={version:"2.2.3"},n=t.data={},a=i("Object"),s=i("String"),o=Array.isArray||i("Array"),u=i("Function"),c=i("Undefined"),f=0,d=n.events={};t.on=function(e,r){var n=d[e]||(d[e]=[]);return n.push(r),t},t.off=function(e,r){if(!e&&!r)return d=n.events={},t;var i=d[e];if(i)if(r)for(var a=i.length-1;a>=0;a--)i[a]===r&&i.splice(a,1);else delete d[e];return t};var v=t.emit=function(e,r){var i,n=d[e];if(n)for(n=n.slice();i=n.shift();)i(r);return t},p=/[^?#]*\//,h=/\/\.\//g,g=/\/[^\/]+\/\.\.\//,E=/([^:\/])\/\//g,A=/^([^\/:]+)(\/.+)$/,_=/{([^{]+)}/g,D=/^\/\/.|:\//,S=/^.*?\/\/.*?\//,N=document,O=m(N.URL),q=N.scripts,I=N.getElementById("seajsnode")||q[q.length-1],j=m(G(I)||O);t.resolve=C;var $,X,R=N.head||N.getElementsByTagName("head")[0]||N.documentElement,k=R.getElementsByTagName("base")[0],L=/\.css(?:\?|$)/i,B=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;t.request=F;var J,M=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,P=/\\\\/g,z=t.cache={},Q={},Z={},ee={},re=te.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};te.prototype.resolve=function(){for(var e=this,r=e.dependencies,t=[],n=0,i=r.length;i>n;n++)t[n]=te.resolve(r[n],e.uri);return t},te.prototype.load=function(){var e=this;if(!(e.status>=re.LOADING)){e.status=re.LOADING;var r=e.resolve();v("load",r);for(var n,t=e._remain=r.length,i=0;t>i;i++)n=te.get(r[i]),n.status<re.LOADED?n._waitings[e.uri]=(n._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var a={};for(i=0;t>i;i++)n=z[r[i]],n.status<re.FETCHING?n.fetch(a):n.status===re.SAVED&&n.load();for(var s in a)a.hasOwnProperty(s)&&a[s]()}},te.prototype.onload=function(){var e=this;e.status=re.LOADED,e.callback&&e.callback();var t,n,r=e._waitings;for(t in r)r.hasOwnProperty(t)&&(n=z[t],n._remain-=r[t],0===n._remain&&n.onload());delete e._waitings,delete e._remain},te.prototype.fetch=function(e){function o(){t.request(a.requestUri,a.onRequest,a.charset,a.crossorigin)}function c(){delete Q[s],Z[s]=!0,J&&(te.save(i,J),J=null);var e,r=ee[s];for(delete ee[s];e=r.shift();)e.load()}var r=this,i=r.uri;r.status=re.FETCHING;var a={uri:i};v("fetch",a);var s=a.requestUri||i;return!s||Z[s]?void r.load():Q[s]?void ee[s].push(r):(Q[s]=!0,ee[s]=[r],v("request",a={uri:i,requestUri:s,onRequest:c,charset:u(n.charset)?n.charset(s):n.charset,crossorigin:u(n.crossorigin)?n.crossorigin(s):n.crossorigin}),void(a.requested||(e?e[a.requestUri]=o:o())))},te.prototype.exec=function(){function n(e){return te.get(n.resolve(e)).exec()}var e=this;if(e.status>=re.EXECUTING)return e.exports;e.status=re.EXECUTING;var t=e.uri;n.resolve=function(e){return te.resolve(e,t)},n.async=function(e,r){return te.use(e,r,t+"_async_"+l()),n};var i=e.factory,a=u(i)?i(n,e.exports={},e):i;return a===r&&(a=e.exports),delete e.factory,e.exports=a,e.status=re.EXECUTED,v("exec",e),a},te.resolve=function(e,r){var n={id:e,refUri:r};return v("resolve",n),n.uri||t.resolve(n.id,r)},te.define=function(e,t,n){var i=arguments.length;1===i?(n=e,e=r):2===i&&(n=t,o(e)?(t=e,e=r):t=r),!o(t)&&u(n)&&(t=Y(n.toString()));var a={id:e,uri:te.resolve(e),deps:t,factory:n};if(!a.uri&&N.attachEvent){var s=K();s&&(a.uri=s.src.replace(/\?.*/g,""))}v("define",a),a.uri?te.save(a.uri,a):J=a},te.save=function(e,r){var t=te.get(e);(t.status<re.SAVED||r.factory)&&(t.id=r.id||e,t.dependencies=r.deps||[],t.factory=r.factory,t.status=re.SAVED)},te.get=function(e,r){return z[e]||(z[e]=new te(e,r))},te.use=function(r,t,n){var i=te.get(n,o(r)?r:[r]);i.callback=function(){for(var r=[],n=i.resolve(),a=0,s=n.length;s>a;a++)r[a]=z[n[a]].exec();t&&t.apply(e,r),delete i.callback},i.load()},te.preload=function(e){var r=n.preload,t=r.length;t?te.use(r,function(){r.splice(0,t),te.preload(e)},n.cwd+"_preload_"+l()):e()},t.use=function(e,r){return te.preload(function(){te.use(e,r,n.cwd+"_use_"+l())}),t},te.define.cmd={},e.define=te.define,t.Module=te,n.fetchedList=Z,n.cid=l,t.require=function(e){var r=te.get(te.resolve(e));return r.status<re.EXECUTING&&(r.onload(),r.exec()),r.exports};var ne=/^(.+?\/)(\?\?)?(seajs\/)+/;n.base=(j.match(ne)||["",j])[1],n.dir=j,n.cwd=O,n.charset="utf-8",n.preload=function(){var e=[],r=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return r+=" "+N.cookie,r.replace(/(seajs-\w+)=1/g,function(r,t){e.push(t)}),e}(),t.config=function(e){for(var r in e){var i=e[r],s=n[r];if(s&&a(s))for(var u in i)s[u]=i[u];else o(s)?i=s.concat(i):"base"===r&&("/"!==i.slice(-1)&&(i+="/"),i=U(i)),n[r]=i}return v("config",e),t}}}(window);!function(t,e){var n=e(t);"function"==typeof define&&define("zepto",[],function(){return n})}(window,function(t){var e=function(){function L(t){return null==t?String(t):j[C.call(t)]||"object"}function $(t){return"function"==L(t)}function R(t){return null!=t&&t==t.window}function q(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function k(t){return"object"==L(t)}function U(t){return k(t)&&!R(t)&&Object.getPrototypeOf(t)==Object.prototype}function F(t){var e=!!t&&"length"in t&&t.length,n=r.type(t);return"function"!=n&&!R(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function I(t){return s.call(t,function(t){return null!=t})}function M(t){return t.length>0?r.fn.concat.apply([],t):t}function z(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function Z(t){return t in f?f[t]:f[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function X(t,e){return"number"!=typeof e||h[z(t)]?e:e+"px"}function B(t){var e,n;return l[t]||(e=c.createElement(t),c.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),l[t]=n),l[t]}function V(t){return"children"in t?u.call(t.children):r.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function H(t,e){var n,r=t?t.length:0;for(n=0;r>n;n++)this[n]=t[n];this.length=r,this.selector=e||""}function G(t,r,i){for(n in r)i&&(U(r[n])||_(r[n]))?(U(r[n])&&!U(t[n])&&(t[n]={}),_(r[n])&&!_(t[n])&&(t[n]=[]),G(t[n],r[n],i)):r[n]!==e&&(t[n]=r[n])}function W(t,e){return null==e?r(t):r(t).filter(e)}function J(t,e,n,r){return $(e)?e.call(t,n,r):e}function Y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function K(t,n){var r=t.className||"",i=r&&r.baseVal!==e;return n===e?i?r.baseVal:r:void(i?r.baseVal=n:t.className=n)}function Q(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?r.parseJSON(t):t):t}catch(e){return t}}function tt(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)tt(t.childNodes[n],e)}var e,n,r,i,O,A,o=[],a=o.concat,s=o.filter,u=o.slice,c=t.document,l={},f={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,g=/([A-Z])/g,y=["val","css","html","text","data","width","height","offset"],b=["after","prepend","before","append"],x=c.createElement("table"),E=c.createElement("tr"),T={tr:c.createElement("tbody"),tbody:x,thead:x,tfoot:x,td:E,th:E,"*":c.createElement("div")},w=/complete|loaded|interactive/,S=/^[\w-]*$/,j={},C=j.toString,N={},D=c.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},_=Array.isArray||function(t){return t instanceof Array};return N.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=D).appendChild(t),r=~N.qsa(i,e).indexOf(t),o&&D.removeChild(t),r},O=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},A=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},N.fragment=function(t,n,i){var o,a,s;return d.test(t)&&(o=r(c.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(v,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in T||(n="*"),s=T[n],s.innerHTML=""+t,o=r.each(u.call(s.childNodes),function(){s.removeChild(this)})),U(i)&&(a=r(o),r.each(i,function(t,e){y.indexOf(t)>-1?a[t](e):a.attr(t,e)})),o},N.Z=function(t,e){return new H(t,e)},N.isZ=function(t){return t instanceof N.Z},N.init=function(t,n){var i;if(!t)return N.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=N.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(c,t)}else{if($(t))return r(c).ready(t);if(N.isZ(t))return t;if(_(t))i=I(t);else if(k(t))i=[t],t=null;else if(p.test(t))i=N.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(c,t)}}return N.Z(i,t)},r=function(t,e){return N.init(t,e)},r.extend=function(t){var e,n=u.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){G(t,n,e)}),t},N.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],o=r||i?e.slice(1):e,a=S.test(o);return t.getElementById&&a&&r?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:u.call(a&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},r.contains=c.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},r.type=L,r.isFunction=$,r.isWindow=R,r.isArray=_,r.isPlainObject=U,r.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},r.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},r.inArray=function(t,e,n){return o.indexOf.call(e,t,n)},r.camelCase=O,r.trim=function(t){return null==t?"":String.prototype.trim.call(t)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(t,e){var n,i,o,r=[];if(F(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&r.push(n);else for(o in t)n=e(t[o],o),null!=n&&r.push(n);return M(r)},r.each=function(t,e){var n,r;if(F(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},r.grep=function(t,e){return s.call(t,e)},t.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()}),r.fn={constructor:N.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=N.isZ(e)?e.toArray():e;return a.apply(N.isZ(this)?this.toArray():this,n)},map:function(t){return r(r.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return r(u.apply(this,arguments))},ready:function(t){return w.test(c.readyState)&&c.body?t(r):c.addEventListener("DOMContentLoaded",function(){t(r)},!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return o.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return $(t)?this.not(this.not(t)):r(s.call(this,function(e){return N.matches(e,t)}))},add:function(t,e){return r(A(this.concat(r(t,e))))},is:function(t){return this.length>0&&N.matches(this[0],t)},not:function(t){var n=[];if($(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):F(t)&&$(t.item)?u.call(t):r(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return r(n)},has:function(t){return this.filter(function(){return k(t)?r.contains(this,t):r(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!k(t)?t:r(t)},last:function(){var t=this[this.length-1];return t&&!k(t)?t:r(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?r(t).filter(function(){var t=this;return o.some.call(n,function(e){return r.contains(e,t)})}):1==this.length?r(N.qsa(this[0],t)):this.map(function(){return N.qsa(this,t)}):r()},closest:function(t,e){var n=[],i="object"==typeof t&&r(t);return this.each(function(r,o){for(;o&&!(i?i.indexOf(o)>=0:N.matches(o,t));)o=o!==e&&!q(o)&&o.parentNode;o&&n.indexOf(o)<0&&n.push(o)}),r(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=r.map(n,function(t){return(t=t.parentNode)&&!q(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return W(e,t)},parent:function(t){return W(A(this.pluck("parentNode")),t)},children:function(t){return W(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(t){return W(this.map(function(t,e){return s.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return r.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=B(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=$(t);if(this[0]&&!e)var n=r(t).get(0),i=n.parentNode||this.length>1;return this.each(function(o){r(this).wrapAll(e?t.call(this,o):i?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){r(this[0]).before(t=r(t));for(var e;(e=t.children()).length;)t=e.first();r(t).append(this)}return this},wrapInner:function(t){var e=$(t);return this.each(function(n){var i=r(this),o=i.contents(),a=e?t.call(this,n):t;o.length?o.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return r(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return r(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;r(this).empty().append(J(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=J(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var i;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(k(t))for(n in t)Y(this,n,t[n]);else Y(this,t,J(this,r,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:e},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){Y(this,t)},this)})},prop:function(t,e){return t=P[t]||t,1 in arguments?this.each(function(n){this[t]=J(this,e,n,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=P[t]||t,this.each(function(){delete this[t]})},data:function(t,n){var r="data-"+t.replace(g,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Q(i):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=J(this,t,e,this.value)})):this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=r(this),i=J(this,e,t,n.offset()),o=n.offsetParent().offset(),a={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(!this.length)return null;if(c.documentElement!==this[0]&&!r.contains(c.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[O(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(_(t)){if(!i)return;var o={},a=getComputedStyle(i,"");return r.each(t,function(t,e){o[e]=i.style[O(e)]||a.getPropertyValue(e)}),o}}var s="";if("string"==L(t))e||0===e?s=z(t)+":"+X(t,e):this.each(function(){this.style.removeProperty(z(t))});else for(n in t)t[n]||0===t[n]?s+=z(n)+":"+X(n,t[n])+";":this.each(function(){this.style.removeProperty(z(n))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(r(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?o.some.call(this,function(t){return this.test(K(t))},Z(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){i=[];var n=K(this),o=J(this,t,e,n);o.split(/\s+/g).forEach(function(t){r(this).hasClass(t)||i.push(t)},this),i.length&&K(this,n+(n?" ":"")+i.join(" "))}}):this},removeClass:function(t){return this.each(function(n){if("className"in this){if(t===e)return K(this,"");i=K(this),J(this,t,n,i).split(/\s+/g).forEach(function(t){i=i.replace(Z(t)," ")}),K(this,i.trim())}})},toggleClass:function(t,n){return t?this.each(function(i){var o=r(this),a=J(this,t,i,K(this));a.split(/\s+/g).forEach(function(t){(n===e?!o.hasClass(t):n)?o.addClass(t):o.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=m.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(r(t).css("margin-top"))||0,n.left-=parseFloat(r(t).css("margin-left"))||0,i.top+=parseFloat(r(e[0]).css("border-top-width"))||0,i.left+=parseFloat(r(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||c.body;t&&!m.test(t.nodeName)&&"static"==r(t).css("position");)t=t.offsetParent;return t})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});r.fn[t]=function(i){var o,a=this[0];return i===e?R(a)?a["inner"+n]:q(a)?a.documentElement["scroll"+n]:(o=this.offset())&&o[t]:this.each(function(e){a=r(this),a.css(t,J(this,i,e,a[t]()))})}}),b.forEach(function(n,i){var o=i%2;r.fn[n]=function(){var n,s,a=r.map(arguments,function(t){var i=[];return n=L(t),"array"==n?(t.forEach(function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(N.fragment(t)))}),i):"object"==n||null==t?t:N.fragment(t)}),u=this.length>1;return a.length<1?this:this.each(function(e,n){s=o?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var l=r.contains(c.documentElement,s);a.forEach(function(e){if(u)e=e.cloneNode(!0);else if(!s)return r(e).remove();s.insertBefore(e,n),l&&tt(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}})})})},r.fn[o?n+"To":"insert"+(i?"Before":"After")]=function(t){return r(t)[n](this),this}}),N.Z.prototype=H.prototype=r.fn,N.uniq=A,N.deserializeValue=Q,r.zepto=N,r}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function h(t){return t._zid||(t._zid=n++)}function p(t,e,n,r){if(e=d(e),e.ns)var i=v(e.ns);return(s[h(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||h(t.fn)===h(n))&&(!r||t.sel==r)})}function d(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function v(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function m(t,e){return t.del&&!c&&t.e in l||!!e}function g(t){return f[t]||c&&l[t]||t}function y(t,n,i,o,a,u,c){var l=h(t),p=s[l]||(s[l]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(i);var s=d(n);s.fn=i,s.sel=a,s.e in f&&(i=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=u;var l=u||i;s.proxy=function(e){if(e=S(e),!e.isImmediatePropagationStopped()){e.data=o;var n=l.apply(t,e._args==r?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},s.i=p.length,p.push(s),"addEventListener"in t&&t.addEventListener(g(s.e),s.proxy,m(s,c))})}function b(t,e,n,r,i){var o=h(t);(e||"").split(/\s/).forEach(function(e){p(t,e,n,r).forEach(function(e){delete s[o][e.i],"removeEventListener"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,i))})})}function S(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(w,function(e,r){var i=n[e];t[e]=function(){return this[r]=x,i&&i.apply(n,arguments)},t[r]=E}),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==r?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=x)),t}function j(t){var e,n={originalEvent:t};for(e in t)T.test(e)||t[e]===r||(n[e]=t[e]);return S(n,t)}var r,n=1,i=Array.prototype.slice,o=e.isFunction,a=function(t){return"string"==typeof t},s={},u={},c="onfocusin"in t,l={focus:"focusin",blur:"focusout"},f={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:y,remove:b},e.proxy=function(t,n){var r=2 in arguments&&i.call(arguments,2);if(o(t)){var s=function(){return t.apply(n,r?r.concat(i.call(arguments)):arguments)};return s._zid=h(t),s}if(a(n))return r?(r.unshift(t[n],t),e.proxy.apply(null,r)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var x=function(){return!0},E=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,s,u,c){var l,f,h=this;return t&&!a(t)?(e.each(t,function(t,e){h.on(t,n,s,e,c)}),h):(a(n)||o(u)||u===!1||(u=s,s=n,n=r),(u===r||s===!1)&&(u=s,s=r),u===!1&&(u=E),h.each(function(r,o){c&&(l=function(t){return b(o,t.type,u),u.apply(this,arguments)}),n&&(f=function(t){var r,a=e(t.target).closest(n,o).get(0);return a&&a!==o?(r=e.extend(j(t),{currentTarget:a,liveFired:o}),(l||u).apply(a,[r].concat(i.call(arguments,1)))):void 0}),y(o,t,u,s,n,f||l)}))},e.fn.off=function(t,n,i){var s=this;return t&&!a(t)?(e.each(t,function(t,e){s.off(t,n,e)}),s):(a(n)||o(i)||i===!1||(i=n,n=r),i===!1&&(i=E),s.each(function(){b(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=a(t)||e.isPlainObject(t)?e.Event(t):S(t),t._args=n,this.each(function(){t.type in l&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,s){r=j(a(t)?e.Event(t):t),r._args=n,r.target=s,e.each(p(s,t.type||t),function(t,e){return i=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){a(t)||(e=t,t=e.type);var n=document.createEvent(u[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),S(n)}}(e),function(e){function p(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function d(t,e,n,i){return t.global?p(e||r,n,i):void 0}function v(t){t.global&&0===e.active++&&d(t,null,"ajaxStart")}function m(t){t.global&&!--e.active&&d(t,null,"ajaxStop")}function g(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||d(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void d(e,n,"ajaxSend",[t,e])}function y(t,e,n,r){var i=n.context,o="success";n.success.call(i,t,o,e),r&&r.resolveWith(i,[t,o,e]),d(n,i,"ajaxSuccess",[e,n,t]),x(o,e,n)}function b(t,e,n,r,i){var o=r.context;r.error.call(o,n,e,t),i&&i.rejectWith(o,[n,e,t]),d(r,o,"ajaxError",[n,r,t||e]),x(e,n,r)}function x(t,e,n){var r=n.context;n.complete.call(r,e,t),d(n,r,"ajaxComplete",[e,n]),m(n)}function E(t,e,n){if(n.dataFilter==T)return t;var r=n.context;return n.dataFilter.call(r,t,e)}function T(){}function w(t){return t&&(t=t.split(";",2)[0]),t&&(t==l?"html":t==c?"json":s.test(t)?"script":u.test(t)&&"xml")||"text"}function S(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function j(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=S(t.url,t.data),t.data=void 0)}function C(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}function O(t,n,r,i){var o,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,u){o=e.type(u),i&&(n=r?i:i+"["+(s||"object"==o||"array"==o?n:"")+"]"),!i&&a?t.add(u.name,u.value):"array"==o||!r&&"object"==o?O(t,u,r,n):t.add(n,u)})}var i,o,n=+new Date,r=t.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,c="application/json",l="text/html",f=/^\s*$/,h=r.createElement("a");h.href=t.location.href,e.active=0,e.ajaxJSONP=function(i,o){if(!("type"in i))return e.ajax(i);var l,p,a=i.jsonpCallback,s=(e.isFunction(a)?a():a)||"Zepto"+n++,u=r.createElement("script"),c=t[s],f=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:f};return o&&o.promise(h),e(u).on("load error",function(n,r){clearTimeout(p),e(u).off().remove(),"error"!=n.type&&l?y(l[0],h,i,o):b(null,r||"error",h,i,o),t[s]=c,l&&e.isFunction(c)&&c(l[0]),c=l=void 0}),g(h,i)===!1?(f("abort"),h):(t[s]=function(){l=arguments},u.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),r.head.appendChild(u),i.timeout>0&&(p=setTimeout(function(){f("timeout")},i.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:T,success:T,error:T,complete:T,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:c,xml:"application/xml, text/xml",html:l,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:T},e.ajax=function(n){var u,c,a=e.extend({},n||{}),s=e.Deferred&&e.Deferred();for(i in e.ajaxSettings)void 0===a[i]&&(a[i]=e.ajaxSettings[i]);v(a),a.crossDomain||(u=r.createElement("a"),u.href=a.url,u.href=u.href,a.crossDomain=h.protocol+"//"+h.host!=u.protocol+"//"+u.host),a.url||(a.url=t.location.toString()),(c=a.url.indexOf("#"))>-1&&(a.url=a.url.slice(0,c)),j(a);var l=a.dataType,p=/\?.+=\?/.test(a.url);if(p&&(l="jsonp"),a.cache!==!1&&(n&&n.cache===!0||"script"!=l&&"jsonp"!=l)||(a.url=S(a.url,"_="+Date.now())),"jsonp"==l)return p||(a.url=S(a.url,a.jsonp?a.jsonp+"=?":a.jsonp===!1?"":"callback=?")),e.ajaxJSONP(a,s);var A,d=a.accepts[l],m={},x=function(t,e){m[t.toLowerCase()]=[t,e]},C=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:t.location.protocol,N=a.xhr(),O=N.setRequestHeader;if(s&&s.promise(N),a.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",d||"*/*"),(d=a.mimeType||d)&&(d.indexOf(",")>-1&&(d=d.split(",",2)[0]),N.overrideMimeType&&N.overrideMimeType(d)),(a.contentType||a.contentType!==!1&&a.data&&"GET"!=a.type.toUpperCase())&&x("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(o in a.headers)x(o,a.headers[o]);if(N.setRequestHeader=x,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=T,clearTimeout(A);var t,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==C){if(l=l||w(a.mimeType||N.getResponseHeader("content-type")),"arraybuffer"==N.responseType||"blob"==N.responseType)t=N.response;else{t=N.responseText;try{t=E(t,l,a),"script"==l?(1,eval)(t):"xml"==l?t=N.responseXML:"json"==l&&(t=f.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return b(n,"parsererror",N,a,s)}y(t,N,a,s)}else b(N.statusText||null,N.status?"error":"abort",N,a,s)}},g(N,a)===!1)return N.abort(),b(null,"abort",N,a,s),N;if(a.xhrFields)for(o in a.xhrFields)N[o]=a.xhrFields[o];var D="async"in a?a.async:!0;N.open(a.type,a.url,D,a.username,a.password);for(o in m)O.apply(N,m[o]);return a.timeout>0&&(A=setTimeout(function(){N.onreadystatechange=T,N.abort(),b(null,"timeout",N,a,s)},a.timeout)),N.send(a.data?a.data:null),N},e.get=function(){return e.ajax(C.apply(null,arguments))},e.post=function(){var t=C.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=C.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var s,i=this,o=t.split(/\s/),u=C(t,n,r),c=u.success;return o.length>1&&(u.url=o[0],s=o[1]),u.success=function(t){i.html(s?e("<div>").html(t.replace(a,"")).find(s):t),c&&c.apply(i,arguments)},e.ajax(u),this};var N=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(N(t)+"="+N(n))},O(r,t,n),r.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(r,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())}),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(t,e){try{return n(t,e)}catch(r){return null}}}}(),e});!function(t){function u(t,e,n,r){return Math.abs(t-e)>=Math.abs(n-r)?t-e>0?"Left":"Right":n-r>0?"Up":"Down"}function c(){if(o=null,e.last){var n=t.Event("longTap");n.cancelTouch=f,e.el.trigger(n)}}function l(){o&&clearTimeout(o),o=null}function f(){n&&clearTimeout(n),r&&clearTimeout(r),i&&clearTimeout(i),o&&clearTimeout(o),n=r=i=o=null,e={}}var n,r,i,o,e={},a=750;t(document).ready(function(){var r,s,d,h=0,p=0,m="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];t(document).on(m[0],function(i){h=p=0,d="mousedown"==i.type?i:i.touches[0],i.touches&&1===i.touches.length&&e.x2&&(e.x2=void 0,e.y2=void 0),r=Date.now(),s=r-(e.last||r),e.el=t(i.target),n&&clearTimeout(n),e.x1=d.pageX,e.y1=d.pageY,s>0&&250>=s&&(e.isDoubleTap=!0),e.last=r,o=setTimeout(c,a)}).on(m[1],function(t){("mousemove"!=t.type||"last"in e)&&(d="mousemove"==t.type?t:t.touches[0],l(),e.x2=d.pageX,e.y2=d.pageY,h+=Math.abs(e.x1-e.x2),p+=Math.abs(e.y1-e.y2))}).on(m[2],function(r){if(l(),e.x2&&Math.abs(e.x1-e.x2)>30||e.y2&&Math.abs(e.y1-e.y2)>30)i=setTimeout(function(){e.el.trigger("swipe"),e.el.trigger("swipe"+u(e.x1,e.x2,e.y1,e.y2)),e={}},0);else if("last"in e)if(30>h&&30>p&&!r.cancelTap&&e.el[0]===r.target){var o=t.Event("tap");o.cancelTouch=f,e.el.trigger(o),e.isDoubleTap?(e.el&&e.el.trigger("doubleTap"),e={}):n=setTimeout(function(){n=null,e.el&&e.el.trigger("singleTap"),e={}},250)}else e={};h=p=0}).on(m[3],f),t(window).on("scroll",f)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);!function(t,e){function b(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function E(t){return r?r+t:t.toLowerCase()}var r,l,f,h,p,d,m,v,g,y,n="",a={Webkit:"webkit",Moz:"",O:"o"},s=window.document,u=s.createElement("div"),c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,x={};t.each(a,function(t,i){return u.style[t+"TransitionProperty"]!==e?(n="-"+t.toLowerCase()+"-",r=i,!1):void 0}),l=n+"transform",x[f=n+"transition-property"]=x[h=n+"transition-duration"]=x[d=n+"transition-delay"]=x[p=n+"transition-timing-function"]=x[m=n+"animation-name"]=x[v=n+"animation-duration"]=x[y=n+"animation-delay"]=x[g=n+"animation-timing-function"]="",t.fx={off:r===e&&u.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:E("TransitionEnd"),animationEnd:E("AnimationEnd")},t.fn.animate=function(n,r,i,o,a){return t.isFunction(r)&&(o=r,i=e,r=e),t.isFunction(i)&&(o=i,i=e),t.isPlainObject(r)&&(i=r.easing,o=r.complete,a=r.delay,r=r.duration),r&&(r=("number"==typeof r?r:t.fx.speeds[r]||t.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,r,i,o,a)},t.fn.anim=function(n,r,i,o,a){var s,E,j,u={},T="",w=this,S=t.fx.transitionEnd,C=!1;if(r===e&&(r=t.fx.speeds._default/1e3),a===e&&(a=0),t.fx.off&&(r=0),"string"==typeof n)u[m]=n,u[v]=r+"s",u[y]=a+"s",u[g]=i||"linear",S=t.fx.animationEnd;else{E=[];for(s in n)c.test(s)?T+=s+"("+n[s]+") ":(u[s]=n[s],E.push(b(s)));T&&(u[l]=T,E.push(l)),r>0&&"object"==typeof n&&(u[f]=E.join(", "),u[h]=r+"s",u[d]=a+"s",u[p]=i||"linear")}return j=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(S,j)}else t(this).unbind(S,j);C=!0,t(this).css(x),o&&o.call(this)},r>0&&(this.bind(S,j),setTimeout(function(){C||j.call(w)},1e3*r+25)),this.size()&&this.get(0).clientLeft,this.css(u),0>=r&&setTimeout(function(){w.each(function(){j.call(this)})},0),this},u=null}(Zepto);!function(t,e){t.matchMedia=function(){var e=0,n="sl-media-detect",r=t.fx.transitionEnd,i=t.fx.cssPrefix,o=t("<style></style>").append("."+n+"{"+i+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(i){var s,c,a=n+e++,u=[],l=1,f=[],h=0,p=function(t,e){-1==f.indexOf(t)&&(f.push(t),o.append("@media "+t+" { #"+a+" { width: "+l+"px; } }\n"),l++,("undefined"==typeof e||e)&&h++)};return p(i,!1),s=t('<div class="'+n+'" id="'+a+'"></div>').appendTo("body").on(r,function(){return h>0?void h--:(c.matches=1===s.width(),void t.each(u,function(e,n){t.isFunction(n)&&n.call(c,c)}))}),c={append:p,matches:1===s.width(),media:i,addListener:function(t){return u.push(t),this},removeListener:function(t){var e=u.indexOf(t);return~e&&u.splice(e,1),this}}}}()}(Zepto);!function(t,e){t.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},t(function(){t.matchMedia(t.mediaQuery.ortchange).addListener(function(){t(window).trigger("ortchange")}),t.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),t(window).trigger("heightchange")})})}(Zepto);define("util",[],function(t,e,n){var p,r=Array.prototype,i=r.slice,o=r.concat,a=navigator.userAgent,s=a.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),u=a.match(/MSIE (\d+)/i),c=a.match(/(Android);?[\s\/]+([\d.]+)?/),l=!!c,f=0,h=Object.keys,d=Object.prototype.hasOwnProperty,g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");s?p=s[2].split("_"):c?p=c[2].split("."):u&&(p=u[1].split("."));var m=function(t,e){var n="0000000000000000"+t;return n.substr(n.length-(e||2))},v={isInApp:/SLApp/.test(a),ios:!!s,ie:!!u,android:l,osVersion:p?parseFloat(p[0]+"."+p[1]):0,isInWechat:/micromessenger/i.test(navigator.userAgent),combinePath:function(){for(var t=[].slice.apply(arguments),e=t.join("/").replace(/[\\]+/g,"/").replace(/([^\:\/]|^)[\/]{2,}/g,"$1/").replace(/([^\.]|^)\.\//g,"$1"),n=!0;n;)n=!1,e=e.replace(/([^\/]+)\/\.\.(\/|$)/g,function(t,e){return".."==e?t:(n||(n=!0),"")});return e.replace(/\/$/,"")},guid:function(){return++f},uuid:function(){for(var r,t=g,e="",n=0,i=0;36>i;i++)8==i||13==i||18==i||23==i?e+="-":14==i?e+="4":(2>=n&&(n=33554432+16777216*Math.random()|0),r=15&n,n>>=4,e+=t[19==i?3&r|8:r]);return e},isFalse:function(t){return!t||$.isArray(t)&&!t.length||"object"==typeof t&&v.isEmptyObject(t)},isTrue:function(t){return!this.isFalse(t)},isEmptyObject:function(t){for(var e in t)return!1;return!0},keys:function(t){if(h)return h(t);var e=[];for(var n in t)d.call(t,n)&&e.push(n);return e},extend:function(t){var e=this,n=d.call(t,"constructor")?t.constructor:function(){return e.apply(this,arguments)},r=function(){this.constructor=n};r.prototype=e.prototype,n.prototype=new r;for(var i in t)n.prototype[i]=t[i];for(var i in e)n[i]=e[i];return n.__super__=e.prototype,n},random:function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},log:function(t){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;overflow-y:scroll;word-break:break-all;word-wrap:break-word;"></div>').appendTo("body")),arguments.length>1&&(t+=r.slice.call(arguments,1).join(" ")),this.$log.html(t+"<br>"+this.$log.html())},indexOf:function(t,e){for(var n="function"==typeof e,r=t.length,i=0;r>i;i++)if(n?e(t[i],i):t[i]==e)return i;return-1},lastIndexOf:function(t,e){for(var n="function"==typeof e,r=t.length-1;r>=0;r--)if(n?e(t[r],r):t[r]==e)return r;return-1},first:function(t,e){for(var n,r=0,i=t.length;i>r;r++)if(n=t[r],e(n,r))return n;return null},find:function(t,e){for(var r,n=[],i=0,o=t.length;o>i;i++)r=t[i],e(r,i)&&n.push(r);return n},select:function(t,e){for(var n=[],r=t.length,i=0;r>i;i++)n.push(e(t[i],i));return n},pick:function(t,e){var r,n={};if(null==t)return n;if("function"==typeof e)for(r in t){var a=t[r];e(a,r,t)&&(n[r]=a)}else for(var s=o.apply([],i.call(arguments,1)),u=0,c=s.length;c>u;u++)r=s[u],r in t&&(n[r]=t[r]);return n},pad:m,formatMoney:function(t){return(t+"").replace(/(\d{3})+(\.|$)/,function(t,e){return t.replace(/\d{3}/g,function(t){return","+t})}).replace(/^,/,"")},deepValue:function(t,e){"string"==typeof e&&(e=e.split("."));for(var n=0,r=e.length;r>n;n++)t=t[e[n]];return t},format:function(t,e){var n=arguments;return t.replace(/\{(\d+)\}/g,function(t,e){return n[parseInt(e)+1]})},formatDate:function(t,e){"string"==typeof t&&/^\/Date\(\d+\)\/$/.test(t)?t=new Function("return new "+t.replace(/\//g,""))():"string"==typeof t?(e=t,t=new Date):"number"!=typeof t&&t||(t=new Date(t));var n=t.getFullYear()+"",r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()+"0000";return(e||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,n).replace(/y{2}/,n.substr(2,2)).replace(/M{2}/,m(r)).replace(/M/,r).replace(/d{2,}/,m(i)).replace(/d/,t).replace(/H{2,}/i,m(o)).replace(/H/i,o).replace(/m{2,}/,m(a)).replace(/m/,a).replace(/s{2,}/,m(s)).replace(/s/,s).replace(/f+/,function(t){return u.substr(0,t.length)})},style:function(t){var e=document,n=e.getElementsByTagName("head")[0],r=e.createElement("style");r.type="text/css";try{r.appendChild(e.createTextNode(t))}catch(i){r.styleSheet.cssText=t}return n.appendChild(r),r},currency:function(t,e){return(void 0===e||null===e?"￥":e)+(Math.round(100*parseFloat(t))/100||0)},template:function(t,e){var n="var __p=[];var $data=obj||{};with($data){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(t,e){return"',"+e.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(t,e){return"');"+e.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',r=new Function("obj",n);return e?r(e):r},encodeHTML:function(t){return(""+t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(t){return t.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(t,e,n,r){if("undefined"==typeof e){var i=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=i?unescape(i[2]):null}if(null===typeof e){if(e=this.cookie(name),null==e)return;n=-1}if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),n=";expires="+o.toGMTString()}document.cookie=t+"="+escape(e)+(n||"")+";path="+(r||"/")},store:window.localStorage?function(t,e){return"undefined"==typeof e?JSON.parse(localStorage.getItem(t)):void(null===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},circlePoint:function(t,e,n,r){return{x:t+n*Math.cos(r*Math.PI/180),y:e+n*Math.sin(r*Math.PI/180)}},validateEmail:function(t){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(t)},validateMobile:function(t){return/^1[0-9]{10}$/.test(t)}};n.exports=v});define("util/barcode",["util"],function(t,e,n){var r=t("util");e.code93=function(t){t=t.toUpperCase();for(var e=[["0","100010100"],["1","101001000"],["2","101000100"],["3","101000010"],["4","100101000"],["5","100100100"],["6","100100010"],["7","101010000"],["8","100010010"],["9","100001010"],["A","110101000"],["B","110100100"],["C","110100010"],["D","110010100"],["E","110010010"],["F","110001010"],["G","101101000"],["H","101100100"],["I","101100010"],["J","100110100"],["K","100011010"],["L","101011000"],["M","101001100"],["N","101000110"],["O","100101100"],["P","100010110"],["Q","110110100"],["R","110110010"],["S","110101100"],["T","110100110"],["U","110010110"],["V","110011010"],["W","101101100"],["X","101100110"],["Y","100110110"],["Z","100111010"],["-","100101110"],[".","111010100"],[" ","111010010"],["$","111001010"],["/","101101110"],["+","101101110"],["%","110101110"],["SHIFT0","100100110"],["SHIFT1","111011010"],["SHIFT2","111010110"],["SHIFT3","100110010"],["START","101011110"]],n=e[e.length-1][1],i=n+"1",o=0,a=0,s=n,u=0;u<t.length;u++){var c=t[u],l=r.indexOf(e,function(t){return t[0]==c}),f=t.length-u%20,p=t.length-u%15;o+=l*f,a+=l*(p+1),s+=e[l][1]}var h=o%47;return o=e[h][1],a+=h,a=e[a%47][1],s+o+a+i}});define("util/md5",[],function(){function r(t){return E(l(x(t),t.length*n))}function l(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,u=r,c=i,l=o;n=p(n,r,i,o,t[a+0],7,-680876936),o=p(o,n,r,i,t[a+1],12,-389564586),i=p(i,o,n,r,t[a+2],17,606105819),r=p(r,i,o,n,t[a+3],22,-1044525330),n=p(n,r,i,o,t[a+4],7,-176418897),o=p(o,n,r,i,t[a+5],12,1200080426),i=p(i,o,n,r,t[a+6],17,-1473231341),r=p(r,i,o,n,t[a+7],22,-45705983),n=p(n,r,i,o,t[a+8],7,1770035416),o=p(o,n,r,i,t[a+9],12,-1958414417),i=p(i,o,n,r,t[a+10],17,-42063),r=p(r,i,o,n,t[a+11],22,-1990404162),n=p(n,r,i,o,t[a+12],7,1804603682),o=p(o,n,r,i,t[a+13],12,-40341101),i=p(i,o,n,r,t[a+14],17,-1502002290),r=p(r,i,o,n,t[a+15],22,1236535329),n=h(n,r,i,o,t[a+1],5,-165796510),o=h(o,n,r,i,t[a+6],9,-1069501632),i=h(i,o,n,r,t[a+11],14,643717713),r=h(r,i,o,n,t[a+0],20,-373897302),n=h(n,r,i,o,t[a+5],5,-701558691),o=h(o,n,r,i,t[a+10],9,38016083),i=h(i,o,n,r,t[a+15],14,-660478335),r=h(r,i,o,n,t[a+4],20,-405537848),n=h(n,r,i,o,t[a+9],5,568446438),o=h(o,n,r,i,t[a+14],9,-1019803690),i=h(i,o,n,r,t[a+3],14,-187363961),r=h(r,i,o,n,t[a+8],20,1163531501),n=h(n,r,i,o,t[a+13],5,-1444681467),o=h(o,n,r,i,t[a+2],9,-51403784),i=h(i,o,n,r,t[a+7],14,1735328473),r=h(r,i,o,n,t[a+12],20,-1926607734),n=d(n,r,i,o,t[a+5],4,-378558),o=d(o,n,r,i,t[a+8],11,-2022574463),i=d(i,o,n,r,t[a+11],16,1839030562),r=d(r,i,o,n,t[a+14],23,-35309556),n=d(n,r,i,o,t[a+1],4,-1530992060),o=d(o,n,r,i,t[a+4],11,1272893353),i=d(i,o,n,r,t[a+7],16,-155497632),r=d(r,i,o,n,t[a+10],23,-1094730640),n=d(n,r,i,o,t[a+13],4,681279174),o=d(o,n,r,i,t[a+0],11,-358537222),i=d(i,o,n,r,t[a+3],16,-722521979),r=d(r,i,o,n,t[a+6],23,76029189),n=d(n,r,i,o,t[a+9],4,-640364487),o=d(o,n,r,i,t[a+12],11,-421815835),i=d(i,o,n,r,t[a+15],16,530742520),r=d(r,i,o,n,t[a+2],23,-995338651),n=g(n,r,i,o,t[a+0],6,-198630844),o=g(o,n,r,i,t[a+7],10,1126891415),i=g(i,o,n,r,t[a+14],15,-1416354905),r=g(r,i,o,n,t[a+5],21,-57434055),n=g(n,r,i,o,t[a+12],6,1700485571),o=g(o,n,r,i,t[a+3],10,-1894986606),i=g(i,o,n,r,t[a+10],15,-1051523),r=g(r,i,o,n,t[a+1],21,-2054922799),n=g(n,r,i,o,t[a+8],6,1873313359),o=g(o,n,r,i,t[a+15],10,-30611744),i=g(i,o,n,r,t[a+6],15,-1560198380),r=g(r,i,o,n,t[a+13],21,1309151649),n=g(n,r,i,o,t[a+4],6,-145523070),o=g(o,n,r,i,t[a+11],10,-1120210379),i=g(i,o,n,r,t[a+2],15,718787259),r=g(r,i,o,n,t[a+9],21,-343485551),n=v(n,s),r=v(r,u),i=v(i,c),o=v(o,l)}return Array(n,r,i,o)}function f(t,e,n,r,i,o){return v(y(v(v(e,t),v(r,o)),i),n)}function p(t,e,n,r,i,o,a){return f(e&n|~e&r,t,e,i,o,a)}function h(t,e,n,r,i,o,a){return f(e&r|n&~r,t,e,i,o,a)}function d(t,e,n,r,i,o,a){return f(e^n^r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return f(n^(e|~r),t,e,i,o,a)}function v(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function y(t,e){return t<<e|t>>>32-e}function x(t){for(var e=Array(),r=(1<<n)-1,i=0;i<t.length*n;i+=n)e[i>>5]|=(t.charCodeAt(i/n)&r)<<i%32;return e}function E(e){for(var n=t?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<4*e.length;i++)r+=n.charAt(e[i>>2]>>i%4*8+4&15)+n.charAt(e[i>>2]>>i%4*8&15);return r}var t=0,n=8;return{md5:r}});define("bridge",["$","util"],function(t,e,n){function m(t,e,n){var r,i;"object"==typeof t?n=r.callback:("function"==typeof e&&(n=e,e=null),r={method:t,params:e}),"function"==typeof n&&(i="hybridCallback"+ ++d,r.callback=i,p[i]=function(){n.apply(null,arguments),delete p[i]}),console.log(r),g.isInApp?alert("slapp://"+JSON.stringify(r)):"system"==r.method&&"info"==r.params.type&&p[r.callback]({})}var r=t("$"),i=t("util"),o=navigator.userAgent,a=i.ios,s=i.android,l=(Array.prototype.slice,r(window)),f=r('meta[name="api-base-url"]').attr("content"),p={};window.hybridFunctions=p,window.trigger=function(){r.fn.trigger.apply(l,arguments)},window.callJS=function(t){l.trigger(t.method,t.params)};var d=0,g={isInApp:/SLApp/.test(o),isAndroid:s,android:s,ios:a,versionName:"1.0",exec:m,tip:function(t){m("tip",t+"")},openInApp:function(t){m("openInApp",t+"")},open:function(t){m("open",t+"")},cmbpay:function(t){m("cmbpay",t+"")},pickImage:function(t){m("pickImage",t)},takePhoto:function(t){setTimeout(function(){m("takePhoto",t)},0)},queryThumbnailList:function(t){m("queryThumbnailList",t)},pickColor:function(t){m("pickColor",t)},system:{info:function(t){m("system",{type:"info"},t)}},getDeviceToken:function(t){m("getDeviceToken",t)},getLocation:function(t){m("getLocation",t)},alipay:function(t,e){m("pay",t,e)},wx:function(t,e){m("wx",t,e)},ali:function(t,e){m("ali",t,e)},qq:function(t,e){m("qq",t,e)},share:function(){m("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(t){return/^http\:\/\//.test(t)?t:f+t},post:function(t,e,n,r){r="function"==typeof n?n:r,n="function"==typeof n?null:n,m("post",{url:this.url(t),files:n,data:e},r)},exit:function(){m("exit")},update:function(t,e,n){s?m("updateApp",{downloadUrl:t,versionName:e},n):this.open(t)}};return g.hasStatusBar=g.isInApp&&i.ios&&i.osVersion>=7,g});define("graphics/cubicBezier",[],function(t,e,n){function r(t,e,n,r){function u(t,e){return 1-3*e+3*t}function s(t,e){return 3*e-6*t}function c(t){return 3*t}function l(t,e,n){return((u(e,n)*t+s(e,n))*t+c(e))*t}function f(t,e,n){return 3*u(e,n)*t*t+2*s(e,n)*t+c(e)}function p(e){for(var r=e,i=0;4>i;++i){var o=f(r,t,n);if(0==o)return r;var a=l(r,t,n)-e;r-=a/o}return r}function h(){for(var t=0;1e3>t;t+=1)a.push(o.get(t/1e3))}var i;"string"==typeof t&&(i=t.replace("cubic-bezier(","").replace(")","").split(","),t=+i[0],e=+i[1],n=+i[2],r=+i[3]);var o=this,a=[];this.get=function(i){return t==e&&n==r?i:l(p(i),e,r)},this.getPreCalculated=function(t){return a[1e3*t|0]},this.getPreCalculated2=function(t){return a[t]},h()}new r(.02,.64,.07,.97);n.exports=r});define("graphics/matrix2d",[],function(){function t(t,e,n,r,i,o){this.setValues(t,e,n,r,i,o)}var e=t.prototype;return t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.length=6,e.setValues=function(t,e,n,r,i,o){return this[0]=null==t?1:t,this[1]=e||0,this[2]=n||0,this[3]=null==r?1:r,this[4]=i||0,this[5]=o||0,this},e.append=function(t,e,n,r,i,o){var a=this[0],s=this[1],u=this[2],c=this[3];return(1!=t||0!=e||0!=n||1!=r)&&(this[0]=a*t+u*e,this[1]=s*t+c*e,this[2]=a*n+u*r,this[3]=s*n+c*r),this[4]=a*i+u*o+this[4],this[5]=s*i+c*o+this[5],this},e.prepend=function(t,e,n,r,i,o){var a=this[0],s=this[2],u=this[4];return this[0]=t*a+n*this[1],this[1]=e*a+r*this[1],this[2]=t*s+n*this[3],this[3]=e*s+r*this[3],this[4]=t*u+n*this[5]+i,this[5]=e*u+r*this[5]+o,this},e.appendMatrix=function(t){return this.append(t[0],t[1],t[2],t[3],t[4],t[5])},e.prependMatrix=function(t){return this.prepend(t[0],t[1],t[2],t[3],t[4],t[5])},e.appendTransform=function(e,n,r,i,o,a,s,u,c){if(o%360)var l=o*t.DEG_TO_RAD,f=Math.cos(l),h=Math.sin(l);else f=1,h=0;return a||s?(a*=t.DEG_TO_RAD,s*=t.DEG_TO_RAD,this.append(Math.cos(s),Math.sin(s),-Math.sin(a),Math.cos(a),e,n),this.append(f*r,h*r,-h*i,f*i,0,0)):this.append(f*r,h*r,-h*i,f*i,e,n),(u||c)&&(this[4]-=u*this[0]+c*this[2],this[5]-=u*this[1]+c*this[3]),this},e.prependTransform=function(e,n,r,i,o,a,s,u,c){if(o%360)var l=o*t.DEG_TO_RAD,f=Math.cos(l),h=Math.sin(l);else f=1,h=0;return(u||c)&&(this[4]-=u,this[5]-=c),a||s?(a*=t.DEG_TO_RAD,s*=t.DEG_TO_RAD,this.prepend(f*r,h*r,-h*i,f*i,0,0),this.prepend(Math.cos(s),Math.sin(s),-Math.sin(a),Math.cos(a),e,n)):this.prepend(f*r,h*r,-h*i,f*i,e,n),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var n=Math.cos(e),r=Math.sin(e),i=this[0],o=this[1];return this[0]=i*n+this[2]*r,this[1]=o*n+this[3]*r,this[2]=-i*r+this[2]*n,this[3]=-o*r+this[3]*n,this},e.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this[0]*=t,this[1]*=t,this[2]*=e,this[3]*=e,this},e.translate=function(t,e){return this[4]+=this[0]*t+this[2]*e,this[5]+=this[1]*t+this[3]*e,this},e.identity=function(){return this[0]=this[3]=1,this[1]=this[2]=this[4]=this[5]=0,this},e.invert=function(){var t=this[0],e=this[1],n=this[2],r=this[3],i=this[4],o=t*r-e*n;return this[0]=r/o,this[1]=-e/o,this[2]=-n/o,this[3]=t/o,this[4]=(n*this[5]-r*i)/o,this[5]=-(t*this[5]-e*i)/o,this},e.isIdentity=function(){return 0===this[4]&&0===this[5]&&1===this[0]&&0===this[1]&&0===this[2]&&1===this[3]},e.equals=function(t){return this[4]===t[4]&&this[5]===t[5]&&this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]},e.transformPoint=function(t,e,n){return n=n||{},n.x=t*this[0]+e*this[2]+this[4],n.y=t*this[1]+e*this[3]+this[5],n},e.decompose=function(e){null==e&&(e={}),e.x=this[4],e.y=this[5],e.scaleX=Math.sqrt(this[0]*this[0]+this[1]*this[1]),e.scaleY=Math.sqrt(this[2]*this[2]+this[3]*this[3]);var n=Math.atan2(-this[2],this[3]),r=Math.atan2(this[1],this[0]),i=Math.abs(1-n/r);return 1e-5>i?(e.rotation=r/t.DEG_TO_RAD,this[0]<0&&this[3]>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=r/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5])},e.clone=function(){return new t(this[0],this[1],this[2],this[3],this[4],this[5])},e.toString=function(){return"matrix("+this[0]+","+this[1]+","+this[2]+","+this[3]+","+this[4]+","+this[5]+")"},t});define("graphics/tween",[],function(t,e,n){var r={linear:function(t,e,n,r){return n*t/r+e},ease:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeIn:function(t,e,n,r){return n*(t/=r)*t+e},easeOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){return n*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){return 0==t?e:n*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){return t==r?e+n:n*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r,i,o){if(0==t)return e;if(1==(t/=r))return e+n;if(o||(o=.3*r),!i||i<Math.abs(n)){i=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/i);return-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e},easeOutElastic:function(t,e,n,r,i,o){if(0==t)return e;if(1==(t/=r))return e+n;if(o||(o=.3*r),!i||i<Math.abs(n)){i=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/i);return i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+n+e},easeInOutElastic:function(t,e,n,r,i,o){if(0==t)return e;if(2==(t/=r/2))return e+n;if(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)){i=n;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(n/i);return 1>t?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+n+e},easeInBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),n*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,i){return n-r.Bounce.easeOut(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){return i/2>t?.5*r.easeInOutBounce(2*t,0,n,i)+e:.5*r.easeInOutBounce(2*t-i,0,n,i)+.5*n+e}};n.exports=r});define("core/base",[],function(t,e,n){Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Date.now||(Date.now=function(){return+new Date}),window.sl=window.slan={},n.exports=sl});define("core/promise",["./linklist"],function(t,e,n){var r=t("./linklist"),i=Array.prototype.slice,o=/^\$(\d+)$/,a=function(t,e,n){for(var s,r=[],i=0,a=t.length;a>i;i++)s=t[i],r.push("string"==typeof s?o.test(s)?e[parseInt(s.match(o)[1])]:s.replace(/^\$\$/,"$"):s);return r.push(n),r},s=function(t,e,n){if(!(this instanceof s))return new s(t,e,n);var i=this;this.queue=new r,this.state=2,this.resolveSelf=function(){i.resolve.apply(i,arguments)},e||"number"!=typeof t?t&&(this.state=0,this.then(t,e,n)):(this.state=0,this.start(t))};s.prototype={reject:function(t){this.resolve(t||"unknow error",null)},resolve:function(){var r,o,a,t=this,e=i.call(arguments),n=t.queue.shift();if(n)if(t.state=1,r=n[0],o=n[1],r instanceof s)r.then(t.resolveSelf);else if("function"==typeof r)a=r.apply(o,e),a instanceof s?a!==t&&a.then(t.resolveSelf):a instanceof Error?t.reject(a):t.resolve(null,a);else if(r instanceof Array)for(var u=[],c=[],l=0,f=0,h=r.length;h>f;f++)!function(n,r,i){"function"==typeof n&&(n=n.apply(o,e)),n instanceof s?n.then(function(e,n){e&&(u[r]=e),l++,c[r]=n,l>=i&&t.resolve(u,c)}):(l++,c[r]=n,l>=i&&t.resolve(null,c))}(r[f],f,h);else t.resolve(null,e);else t.state=0;return t},when:function(t,e){return t instanceof Array||(t=[t]),this.queue.append([t,e||this]),1!=this.state&&this.resolve(),this},map:function(t,e,n){var r=this,i=function(){var n=arguments;return r._count=t.length,r.result=[],r.errors=[],t.forEach(function(t,i){t instanceof Array||(t=[t]),e.apply(this,a(t,n,function(t,e){r.next(i,t,e)}))}),r};return r.queue.append([i,n||this]),r},each:function(t,e,n){var r=this,i=function(){return r._count=t.length,r.result=[],r.errors=[],t.forEach(function(t,n){e.call(this,n,t)}),r};return r.queue.append([i,n||this]),r},start:function(t){var e=this,n=function(){return e._count=t,e.result=[],e.errors=[],e};return e.queue.append([n,this]),e},next:function(t,e,n){this._count--,e&&(this.errors[t]=e),this.result[t]=n,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(t){var e=this;return function(){e.then(i.call(arguments),t,this)}},then:function(t,e,n){var i,r=this;return t instanceof Array?(i=e,e=function(){return i.apply(this,a(t,arguments,r.resolveSelf)),r}):(n=e,e=t,t=null),r.queue.append([e,n||this]),r.state||r.resolve(),r}},s.resolve=function(){return(new s).resolve()},n.exports=s});define("core/linklist",[],function(t,e,n){var r=function(){this._idlePrev=this,this._idleNext=this},i=function(t){return t._idlePrev==t?null:t._idlePrev},o=function(t){t._idleNext&&(t._idleNext._idlePrev=t._idlePrev),t._idlePrev&&(t._idlePrev._idleNext=t._idleNext),t._idleNext=null,t._idlePrev=null};r.prototype={length:0,init:function(t){t={data:t},this.list=t,this.length=1,t._idleNext=t,t._idlePrev=t},get:function(t){var e=null;return this.each(function(n){return t(n)===!0?(e=n,!1):void 0}),e},find:function(t){var e=[];return this.each(function(n){t(n)===!0&&e.push(n)}),e},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(t){for(var n,e=this._idlePrev;e!=this&&(n=e._idlePrev,t.call(e,e.data)!==!1);)e=n},next:i,append:function(t,e){return e||(t={data:t}),t._idleNext=this._idleNext,this._idleNext._idlePrev=t,t._idlePrev=this,this._idleNext=t,this.length++,t},contains:function(t){var e=!1;return this.each(function(n){return t===n?(e=!0,!1):void 0}),e},shift:function(){var t=this._idlePrev;return t!=this?(this._remove(t),t.data):null},_remove:function(t){0!=this.length&&(this.length--,o(t))},remove:function(t){var e=this;e.each(function(n){return n===t?(e._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},n.exports=r});define("core/event",["./base"],function(t,e,n){function u(t,e,n){(t||"").split(o).forEach(function(t){n(t,e)})}function c(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function l(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function f(t,e,n,r){var i,o;return o=l(e),o.ns&&(i=c(o.ns)),t.filter(function(t){return t&&(!o.e||t.e===o.e)&&(!o.ns||i.test(t.ns))&&(!n||t.cb===n||t.cb._cb===n)&&(!r||t.ctx===r)})}function h(t,e){return this instanceof h?(e&&Object.assign(this,e),this.type=t,this):new h(t,e)}var i=(t("./base"),[].slice),o=/\s+/,s=function(){return!1},a=function(){return!0};h.prototype={isDefaultPrevented:s,isPropagationStopped:s,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a}};var p={on:function(t,e,n){var i,r=this;return e?(i=this._events||(this._events=[]),u(t,e,function(t,e){var o=l(t);o.cb=e,o.ctx=n,o.ctx2=n||r,o.id=i.length,i.push(o)}),this):this},one:function(t,e,n){var r=this;return e?(u(t,e,function(t,e){var i=function(){return r.off(t,i),e.apply(n||r,arguments)};i._cb=e,r.on(t,i,n)}),this):this},off:function(t,e,n){var r=this._events;return r?t||e||n?(u(t,e,function(t,e){f(r,t,e,n).forEach(function(t){delete r[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,r,o,s,a,e=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new h(t)),n=i.call(arguments,1),t.args=n,n.unshift(t),r=f(this._events,t.type))for(s=r.length;++e<s;)if((o=t.isPropagationStopped())||!1===(a=r[e]).cb.apply(a.ctx2,n)){o||(t.stopPropagation(),t.preventDefault());break}return this}};return h.mixin=function(t,e){return Object.assign("function"==typeof t?t.prototype:t,p,e),t},h.extend=function(t,e){return t.prototype=Object.create(p),e&&Object.assign(t.prototype,e),t},h});define("core/component",["$","util","./event"],function(t,e,n){var r=t("$"),i=t("util"),o=t("./event"),s=Array.prototype.slice,a=o.mixin(function(t){var e=this;e.options=t=r.extend({},e.options,t),e.options.className&&(e.className=e.options.className),e.options.el&&(e.el=e.options.el),e.cid=i.guid(),e.setElement(e.el),e.onDestroy&&e.on("Destroy",e.onDestroy),e.initialize&&e.initialize.apply(e,arguments)},{options:{},setElement:function(t,e){return t&&(this.$el&&this.undelegateEvents(),this.$el=r(t),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),e!==!1&&this.delegateEvents()),this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(t,e){var n=this;if(e){var o=t.split(" "),s=o.shift().replace(/,/g,".delegateEvents"+n.cid+" ");e=r.proxy(r.isFunction(e)?e:n[e],n),o.length>0&&""!==o[0]?n.$el.on(s,o.join(" "),e):n.$el.on(s,e)}else for(var i in t)n.listen(i,t[i]);return n},listenTo:function(t){var e=s.apply(arguments),n=e[e.length-1];return"function"!=typeof t.on&&(t=r(t)),e[0]=t,e[e.length-1]=r.proxy(n,this),(this._bindListenTo||(this._bindListenTo=[])).push(e.slice()),e.shift().on.apply(t,e),this},$:function(t){return this.$el.filter(t).add(this.$el.find(t))},destroy:function(){var n,e=(this.$el,this);this._bindListenTo&&r.each(this._bindListenTo,function(t,e){n=e.shift(),n.off.apply(n,e)}),e.undelegateEvents(),e.$el.remove(),e.trigger("Destroy")}});a.extend=i.extend,n.exports=a});define("core/view",["$","util","./component"],function(t,e,n){var r=t("$"),i=t("util"),o=t("./component"),s=Array.prototype.slice,a=function(){var e,n=s.call(arguments),i=n[0];r.isPlainObject(i)?e=i:(e=n[1]||{},e.el=n.shift()),o.apply(this,n)};r.extend(a.prototype,o.prototype),a.extend=function(t){var e=i.extend.call(this,t);return e.prototype.events=r.extend({},e.__super__.events,e.prototype.events),e},n.exports=a});define("core/model",["$","util","./base","./event","./component"],function(t,e,n){function C(t){i.extend(this,t);var e=this,n=this.collectionName.split("."),r=this.parent;for(this.key=n[n.length-1];r;){if(r.alias==n[0]){n[0]=r.collectionName+"^child",this.collectionName=n.join("."),this.isChild=!0;break}r=r.parent}var s=document.createComment(this.collectionName);s.repeat=this,this.replacement=s,this.el.parentNode.replaceChild(s,this.el),this.snRepeats=[],this.filters&&(this.filter=this.viewModel._compile("{{"+this.filters+"}}",this,function(t,n){for(var r=(Date.now(),n.under()),s=0;s<e.snRepeats.length;s++){var o=e.snRepeats[s];(r||n==o.referenceModel||n.under(o.referenceModel)||n.under(o.collection())||n.contains(o.referenceModel))&&o.update()}}));var o="change:"+this.collectionName.replace(/\./g,"/");this.syncModels=[],this.viewModel.on(o+"/add",function(t,n,i){e.syncModels=e.syncModels.concat(i);for(var r=0;r<e.snRepeats.length;r++){var s=e.snRepeats[r];e.isChild&&n.parent!=s.referenceModel||s.add(i).update()}}).on(o+"/remove",function(t,n,i){for(var r=0;r<i.length;r++){for(var s=i[r],o=e.snRepeats.length-1;o>=0;o--)e.snRepeats[o].remove(function(t){return t.model==s});for(var o=e.syncModels.length-1;o>=0;o--)e.syncModels[o]==s&&e.syncModels.splice(o,1)}})}function S(t,e,n){this.replacement=e,this.repeat=t,this.referenceModel=n,e.ownSnRepeat=this,this.elements=[]}function k(t,e){"undefined"!=typeof e||void 0!=t&&!i.isPlainObject(t)||(e=t,t=this.el),this.cid=r.guid(),this.eventsCache={},this.data=i.extend({},e),this.model={},this.repeats={},this._fns=[],this.fns=[],this.refs={},this.root=this,this._elements={},t&&this.bind(t),this._initSet=!0,this.set(this.data),this._initSet=!1,this.onDestroy&&this.on("Destroy",this.onDestroy),this.initialize.call(this,t,e)}var i=t("$"),r=t("util"),o=(t("./base"),t("./event")),a=t("./component"),u={}.toString,f=0,h={tap:"tap",click:"click",change:"change",focus:"focus",blur:"blur","transition-end":i.fx.transitionEnd},p=["this","$","Math","new","Date","encodeURIComponent","window","document"],g=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,m=/([a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*(.+?)){0,1}(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/,y=/\{\{(.+?)\}\}(?!\})/g,x=/'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/[img]*(?=[\)|\.|,])|\/\/.*|\bvar\s+[_,a-zA-Z0-9]+\s*\=|(^|[\!\=\>\<\?\s\:\(\),\%&\|\+\-\*\/\[\]]+)([\$a-zA-Z_][\$a-zA-Z_0-9]*(?:\.[a-zA-Z_0-9]+)*(?![a-zA-Z_0-9]*\())/g,b=/([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+)*)\s*=\s*((?:\((?:'(?:\\'|[^'])*'|[^\)])+\)|'(?:\\'|[^'])*'|[^;])+?)(?=\;|\,|$)/g,_=/\b((?:this\.){0,1}[\.\w]+\()((?:'(?:\\'|[^'])*'|[^\)])*)\)/g,E=function(t,e){var n="var $el=$(el),root=model.root,$data=$.extend({},global,root.data,{$state:root.$state.data}";if(t){n+=",{";for(var i=t.parent,r=t;null!=i;r=i,i=i.parent)n+=i.alias+":"+(r.isChild?"model.closest('"+i.collectionName+"^child').data":'root.upperRepeatEl(el,function(el){ if (el.snRepeat.repeat.alias == "'+i.alias+'") return el.snModel.data; },null)')+",",i.indexAlias&&(n+=i.indexAlias+':function(){ for (var node=el;node!=null;node=node.parentNode) { if (node.snIndexAlias=="'+i.indexAlias+'") return node.snIndex } return ""},');n+=t.alias+":model.data",t.indexAlias&&(n+=","+t.indexAlias+':function(){ for (var node=el;node!=null;node=node.parentNode) { if (node.snIndexAlias=="'+t.indexAlias+'") return node.snIndex }return ""}'),n+="}"}return n+=");with($data){"+e+"}"},w=function(t){for(var e=t.split("."),n=[],i="",r="$state"==e[0]?e.shift():"$data",s=0;s<e.length;s++)n[s]=(0==s?r:n[s-1])+"."+e[s];for(var s=0;s<n.length;s++)i+=(s?"&&":"")+n[s]+"!==null&&"+n[s]+"!==undefined";return"(("+i+")?typeof "+t+'==="function"?'+t+"():"+t+':"")'},T=function(t,e,n){for(var i=t.length?t:[t],r=0,s=i.length;s>r;r++){var o=i[r],a=e(o,r,n);a!==!1&&1==o.nodeType&&o.childNodes.length&&T(o.childNodes,e,a)}},A={contains:function(t,e){return-1!=t.indexOf(e)},like:function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),-1!=t.indexOf(e)||-1!=e.indexOf(t)},util:r},M=function(t,e,n){if(t instanceof M)this.key=t.key?t.key+"."+e:e;else{if(!(t instanceof O))throw new Error("Model's parent mast be Collection or Model");this.key=t.key+"^child"}this.type="object"==typeof n?"object":"value",t.data[e]=this.data="object"==this.type?i.extend({},n):n,this._key=e,this.model={},this.parent=t,this.root=t.root,this._elements={},this._collectionItemInitSet=this.parent instanceof O,this.set(n),this._collectionItemInitSet=!1},N={getModel:function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),i.isArray(t)){var e=this;if("this"==t[0]){for(var n=1,r=t.length;r>n;n++)if(!(e=e[t[n]]))return null}else for(var n=0,r=t.length;r>n;n++)if(e instanceof M)e=e.model[t[n]];else{if(!(e instanceof O))return null;e=e.models[t[n]]}return e}return"this"==t?this:""==t?this.data:this.model[t]},get:function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),i.isArray(t)){for(var e=this.data,n="this"==t[0]?1:0,r=t.length;r>n;n++)if(!(e=e[t[n]]))return null;return e}return"this"==t?this:""==t?this.data:this.data[t]},cover:function(t,e){return this.set(!0,t,e)},_fixParentData:function(){var t=this.parent;t.data[t instanceof O?t.models.indexOf(this):this._key]=this.data},set:function(t,e,n){var s,a,l,f,r=this,c=r.model,h=!1,p=!this.root._initSet&&!this._collectionItemInitSet;if("boolean"!=typeof t&&(n=e,e=t,t=!1),"object"==typeof e)a=e;else if(null===e)!t&&(t=!0),a={};else{if("undefined"==typeof n)return n=e,e="",l=this.parent,this.data=n,this._fixParentData(),p&&this.root._triggerChangeEvent(this.key,this),this;if(f=e.split("."),f.length>1){for(var d=f.pop(),v=0,g=f.length;g>v;v++)e=f[v],c=c[e]instanceof M?c[e]:c[e]=new M(this,e,{});return void c.set(t,d,n)}h=t,t=!1,(a={})[e]=n}if(i.isPlainObject(this.data)||(this.data={},this._fixParentData()),t)for(var m in this.data)void 0===a[m]&&(a[m]=null);for(var e in a)this.data[e]=a[e];var y;for(var m in a)if(s=c[m],value=a[m],y=this.key?this.key+"/"+m:m,s!==value)if(s instanceof M)null===value||void 0===value?s.reset():s.set(h,value),this.data[m]=s.data;else if(s instanceof O){if(!i.isArray(value)){if(null!=value)throw new Error("[Array to "+typeof value+" error]不可改变"+m+"的数据类型");value=[]}s.set(value),this.data[m]=s.data}else switch(u.call(value)){case"[object Object]":c[m]=new M(this,m,value);break;case"[object Array]":c[m]=new O(this,m,value);break;default:c[m]=value,p&&this.root._triggerChangeEvent(y,this)}return p&&this.root._triggerChangeEvent(this.key,this),r},reset:function(){var t={};for(var e in this.data)t[e]=null;this.set(t)},closest:function(t){for(var e,n=this.parent;null!=n;n=n.parent){if(e="function"==typeof t?t(n):n.key==t?1:0)return n;if(e===!1)return null}},contains:function(t,e){for(t=t.parent;null!=t;t=t.parent){if(t==this)return!0;if(e&&t instanceof O)return!1}return!1},under:function(t){for(var e=this.parent;null!=e&&t!=e;e=e.parent)if(e instanceof O)return!1;return!0},_pushNode:function(t,e){var n=t.snElementId||(t.snElementId=++f);(this._elements[n]||(this._elements[n]=[])).push(e)}};N.clear=N.reset,o.mixin(M,N);var O=o.mixin(function(t,e,n){this.models=[],this.parent=t,this.key=t.key?t.key+"."+e:e,this._key=e,this.eventName=this.key.replace(/\./g,"/"),this.root=t.root,this.data=[],t.data[e]=this.data,this.add(n)},{_triggerChangeEvent:function(){this._silent||this.root._triggerChangeEvent(this.key,this)._triggerChangeEvent(this.key+"/length",this)},get:function(t){return this.models[t]},set:function(t){if(this._silent=!0,t&&0!=t.length){var e=this.models.length;t.length<e&&this.remove(t.length,e-t.length);var n=0;this.each(function(e){e.set(!0,t[n]),n++}),this.add(0==n?t:t.slice(n,t.length))}else this.clear();return this._silent=!1,this._triggerChangeEvent(),this},each:function(t){for(var e=0;e<this.models.length&&t.call(this,this.models[e],e)!==!1;e++);return this},first:function(t){for(var e=0;e<this.models.length;e++)if(t.call(this,this.data[e],e))return this.models[e];return null},add:function(t){var e,n,r=[];i.isArray(t)||(t=[t]);for(var s=0,o=t.length;o>s;s++){var a=t[s];n=this.models.length,e=new M(this,n,a),this.models.push(e),r.push(e),this.trigger("add",e)}this.root.trigger("change:"+this.eventName+"/add",this,r),this._triggerChangeEvent()},remove:function(t,e){var n;if("function"==typeof t){n=[];for(var i=this.models.length-1;i>=0;i--)t.call(this,this.data[i],i)&&(n.push(this.models.splice(i,1)[0]),this.data.splice(i,1))}else e||(e=1),n=this.models.splice(t,e),this.data.splice(t,e);this._triggerChangeEvent(),this.trigger("remove",n),this.root.trigger("change:"+this.eventName+"/remove",this,n)},clear:function(t){var e=this.models.slice();this.models.length=this.data.length=0,this._triggerChangeEvent(),this.root.trigger("change:"+this.eventName+"/remove",this,e)}});C.prototype.append=function(t){var e=this,n=new S(this,t.replacement,t.model),i=!1;e.snRepeats.push(n);for(var r=0;r<e.syncModels.length;r++){var s=e.syncModels[r];e.isChild&&s.parent.parent!=n.referenceModel||(n.add(s),i=!0)}i&&n.update()},S.prototype={collection:function(){return this.referenceModel.model[this.repeat.key]},_removeEl:function(t){T(i(t).remove(),function(t,e){if(t._origin)for(var n=t._origin._elements,e=n.length-1;e>=0;e--)if(n[e]==t){n.splice(e,1);break}})},update:function(){var t=document.createDocumentFragment(),e=this.elements,n=this.repeat,i=n.orderBy,r=this.referenceModel.root,s=this.replacement.parentNode;i&&e.sort(function(t,e){return t=t.model.data[i],e=e.model.data[i],t>e?1:e>t?-1:0});var o,a=[];this.elIndex=0,this.replacement.snIndexAlias=n.indexAlias;for(var u=0,c=e.length;c>u;u++){var f,l=e[u];this.replacement.snIndex=this.elIndex,void 0===n.filter||r.call(n.filter,A,l.model,this.replacement)?(f=l.el?l.el:l.el=this.cloneNode(this.el||(this.el=this.cloneNode(n.el)),l.model),o?o.nextSibling!=f&&(o.nextSibling?o.parentNode.insertBefore(f,o.nextSibling):o.parentNode.appendChild(f)):f.parentNode||t.appendChild(f),o=f,n.indexAlias&&f.snIndex!==this.elIndex&&(f.snIndex=this.elIndex,a.push(f)),this.elIndex++):l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el)}a.length&&r._triggerChangeEvent(n.collectionName+"/"+n.alias+"/"+n.indexAlias,a),t.childNodes.length&&s.insertBefore(t,this.replacement)},cloneNode:function(t,e,n,i){var s,r=t.cloneNode(!1);if(t==this.el?(r.snIndex=this.elIndex,r.snIndexAlias=this.repeat.indexAlias,r.snRepeat=this,r.snModel=e,r.snReplacement=this.replacement,i=r):r.snRepeatNode=i,n&&n.appendChild(r),8==t.nodeType&&t.repeat)r.repeat=t.repeat,e&&t.repeat.append({replacement:r,model:e});else if(t.bindings&&(r.bindings=t.bindings,e?((r._origin=t._origin)._elements.push(r),e.root.upperRepeatEl(r,function(e){e.snModel._pushNode(t._origin,r)})._render(r)):r._origin=t),1==t.nodeType&&(s=t.childNodes.length))for(var o=0;s>o;o++)this.cloneNode(t.childNodes[o],e,r,i);return r},each:function(t,e,n){"function"!=typeof e&&(n=e,e=null);for(var i=this.elements.length-1,r=i;r>=0;r--){var s=n?r:i-r;if(t.call(this,s,this.elements[s])===!1)break}return e&&e.call(this),this},remove:function(t,e){var n=this;if("function"==typeof t)for(var i=this.elements.length-1;i>=0;i--){var r=this.elements[i];t(r,i)&&(this.elements.splice(i,1),this._removeEl(r.el))}else this.elements.splice(t,e||1).forEach(function(t){n._removeEl(t.el)});return this},add:function(t){var e=this;return(i.isArray(t)?t:[t]).forEach(function(t){e.elements.push({model:t})}),this},clear:function(){return this.each(function(t,e){el.parentNode.removeChild(e.el)},function(){this.elements.length=0},!0)}},k.prototype=i.extend(Object.create(M.prototype),{key:"",initialize:r.noop,setState:function(t,e,n){return this.$state.set(t,e,n),this},getState:function(t){return this.$state.get(t)},next:function(t){return this.one("viewDidUpdate",t)},compile:function(t){var e=this._fns.indexOf(t);return-1==e&&(this._fns.push(t),e=this._fns.length-1),this.fns.length+e},_compile:function(t,e,n){var r,i=this,s="try{return '"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(y,function(t,s){return"'+("+s.replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(x,function(t,s,o){if(!o)return 0==t.indexOf("var ")?t.replace(/var\s+([^\=]+)=/,function(t,e){return r=(r||[]).concat(e.split(",")),e+"="}):t;var a=o.split("."),u=a[0];if("$state"==u)return i.$state.on("change:"+o.replace("$state.","").replace(/\./g,"/"),n),s+w(o);if(!u||A[u]||-1!=p.indexOf(u)||r&&-1!=r.indexOf(u)||g.test(o))return s+o;var c;if(e)for(var l=e;null!=l;l=l.parent){if(u==l.alias){a[0]=l.collectionName+"^child";break}if(u==l.indexAlias){c=l;break}}var f=c?c.collectionName+"/"+c.alias+"/"+c.indexAlias:a.join("/").replace(/\./g,"/");return i.on("change:"+f,n),s+w(o)})+")+'"})+"';}catch(e){return '';}",o="function(global,model,el){"+E(e,(r&&r.length?"var "+r.join(",")+";":"")+s.replace("return ''+","return ").replace(/\+\'\'/g,""))+"}";return this.compile(o)},call:function(t,e,n,i,r){var s=this.fns[t];switch(arguments.length){case 1:return s.call(this);case 2:return s.call(this,e);case 3:return s.call(this,e,n);case 4:return s.call(this,e,n,i);case 5:return s.call(this,e,n,i,r);default:return s.apply(this,arguments)}},_render:function(t,e){var n=this;if(t.bindings){var s;e?(s={})[e]=t.bindings[e]:s=t.bindings;for(var o in s){var a=n.call(s[o],A,n._closestByEl(t),t);switch(o){case"textContent":t.textContent!==a+""&&(t.textContent=a);break;case"value":"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName?(t.value!=a||""===t.value&&0===a)&&(t.value=a):t.setAttribute(o,a);break;case"html":case"sn-html":t.innerHTML=a;break;case"sn-if":r.isFalse(a)?t.parentNode&&(t.snReplacement||(t.snReplacement=document.createComment("if"),t.parentNode.insertBefore(t.snReplacement,t)),t.parentNode.removeChild(t)):t.parentNode||t.snReplacement.parentNode.insertBefore(t,t.snReplacement);break;case"display":case"sn-display":t.style.display=r.isFalse(a)?"none":"block"==a||"inline"==a||"inline-block"==a?a:"";break;case"sn-style":case"style":t.style.cssText+=a;break;case"checked":case"selected":(t[o]=!!a)?t.setAttribute(o,o):t.removeAttribute(o);break;case"src":case"sn-src":var u=i(t).one("load error",function(){u.animate({opacity:1},200)}).css({opacity:0}).attr({src:a});break;default:t.setAttribute(o,a)}}}},_renderEls:function(t,e){for(var n=0,i=t&&t.length;i>n;n++)this._render(t[n],e)},_bindAttr:function(t,e,n,r){var o,s=this;y.test(n)&&((t.bindings||(t._elements=[],t.bindings={}))[e]=s._compile(n,r,function(n,a){if(r){if(a instanceof M)o=a==s||a.under()?t._elements:a._elements[t.snElementId],s._renderEls(o);else if(a instanceof O)for(var u=0,c=a.models.length;c>u;u++)o=a.models[u]._elements[t.snElementId],s._renderEls(o);else if(i.isArray(a))for(var l,u=0,c=a.length;c>u;u++)l=a[u],o=l.snModel._elements[t.snElementId],s._renderEls(o)}else s._render(t,e)}))},_closestByEl:function(t){return this.upperRepeatEl(t,function(t){return t.snModel})},_getByEl:function(t,e){var n=this,i=e.split("."),r=i[0];return"this"==r?n:"$state"==r?n.$state:this.upperRepeatEl(t,function(t){return t.snRepeat.repeat.alias==r?t.snModel:void 0})},_getVal:function(t,e){var t=t==this||t instanceof M?t:this._getByEl(t,e);return t.get(t==this?e:e.replace(/^[^\.]+\./,""))},_setByEl:function(t,e,n){var i=this._getByEl(t,e);i.set(i==this||i==self.$state?e:e.replace(/^[^\.]+\./,""),n)},_triggerChangeEvent:function(t,e){var n=this;!e&&(e=this),t="change"+(t?":"+t:"").replace(/\./g,"/");var i=n.eventsCache[t]||(n.eventsCache[t]=[]);return-1==i.indexOf(e)&&i.push(e),n.changeEventsTimer||(n.changeEventsTimer=setTimeout(function(){Date.now();for(var r in n.eventsCache){i=n.eventsCache[r];for(var s=0,o=i.length;o>s;s++)n.trigger(r,i[s])}n.eventsCache={},n.changeEventsTimer=null,n.trigger("viewDidUpdate")},0)),this},upperRepeatEl:function(t,e,n){for(;t&&(t.snRepeatNode&&(t=t.snRepeatNode),t.snModel&&t.snRepeat);){if(void 0!==(val=e(t)))return val;t=t.snReplacement}return void 0===n?this:n},bind:function(t){var e=this,n=[],r="sn-"+e.cid+"model",s=i(t).on("input change blur","["+r+"]",function(t){var n=t.currentTarget,i=n.getAttribute(r);e._setByEl(n,i,n.value)});e.$el=e.$el?e.$el.add(s):s,T(s,function(t,i,r){if(t.snViewModel)return!1;if(1==t.nodeType){var s=t.getAttribute("sn-repeat");if(null!=s){var o=s.match(m),a=o[3],u=0==a.indexOf("$state")?e.$state:e;s=new C({root:e,viewModel:u,parent:r,alias:o[1],indexAlias:o[2],collectionName:a,filters:o[4],orderBy:o[5],el:t}),(u.repeats[s.collectionName]||(u.repeats[s.collectionName]=[])).push(s),r||s.append({replacement:s.replacement,model:e})}else s=r;for(var c=t.attributes.length-1;c>=0;c--){var l=t.attributes[c].name,f=t.attributes[c].value;if(f)if("sn-error"==l?l="onerror":"sn-src"==l&&(l="src"),"ref"==l)e.refs[f]=t;else if("sn-display"==l||"sn-html"==l||"sn-if"==l||"sn-style"==l||0!=l.indexOf("sn-"))0==l.indexOf("sn-")&&-1==f.indexOf("{{")&&-1==f.indexOf("}}")&&(f="{{"+f+"}}"),e._bindAttr(t,l,f,s);else if("sn-model"==l)t.removeAttribute(l),t.setAttribute("sn-"+e.cid+"model",f);else{var p=l;l=l.replace(/^sn-/,"");var d=h[l];if(d)if(t.removeAttribute(p),l="sn-"+e.cid+"-"+d,b.test(f)||_.test(f)){var v=f.replace(_,function(t,e,n){return e+"e"+(n?",":"")+n+")"}).replace(b,'this._setByEl(e.currentTarget,"$1",$2)'),g="function(e,model,global){var el=e.currentTarget;"+E(s,v)+"}";t.setAttribute(l,e.compile(g))}else t.setAttribute(l,f)}}return!s&&t.bindings&&n.push(t),s}3==t.nodeType&&(e._bindAttr(t,"textContent",t.textContent,r),!r&&t.bindings&&n.push(t))}),s.each(function(){this.snViewModel=e.cid,this.model=e});var o=function(t){if(t.type!=i.fx.transitionEnd||t.target==t.currentTarget){var s,o,n=t.currentTarget,r=n.getAttribute("sn-"+e.cid+"-"+t.type);if("false"==r)return!1;if(/^\d+$/.test(r)){var a=e._closestByEl(n);a.root===e&&e.call(r,t,a,A)}else{for(var u=[t],l=r.split(":"),f=0;f<l.length;f++){var h=l[f];0==f?(o=e._getByEl(n,h),s=e._getVal(o,h),t.model=e._closestByEl(n,h)):u.push(e._getVal(n,h))}s.apply(o,u)}}};for(var a in h){var u=h[a],c="[sn-"+e.cid+"-"+u+"]";s.on(u,c,o)}this.fns=this.fns.concat(window.eval("["+this._fns.join(",")+"]")),this._fns.length=0;for(var l=0,f=n.length;f>l;l++)e._render(n[l]);return this}},r.pick(a.prototype,["$","undelegateEvents","listenTo","listen","destroy"])),k.extend=r.extend,e.State=k.prototype.$state=new k,e.ViewModel=k,e.Filters=A});define("core/model2",["$","./base","util","./event"],function(e,t,n){function x(e,t){if(e)if("length"in e&&3!==e.nodeType)for(var n=0,i=e.length;i>n;n++)x(e[n],t);else for(var r=[],s=!0;e;){var o,a=t(e);a&&a.nodeType?o=a:a&&a.isBreak?(o=a.nextSibling,a=!1):s||(o=e.nextSibling),s&&(s=!1),a!==!1&&e.firstChild?(o&&r.push(o),e=e.firstChild):e=o?o:r.pop()}}function _(e,t){var n=t.getAttribute("ref");if(n){var i=t.snRequireInstance||t,r=e.refs[n];r?r.nodeType?e.refs[n]=[r,i]:r.push(i):e.refs[n]=i}}function w(e,t){var i,n=e.fns[t.getAttribute("sn-data")].call(e,e.formatData(t));if(t.snRequireInstance)i=t.snRequireInstance,i.set(n);else{for(var s,r=[],a=0,o=t.childNodes.length-1;o>a;a++)s=t.childNodes[a],3!==s.nodeType&&(r.push(s),s.snViewModel=e,e.$el.push(s));t.snRequireInstance=i=new t.snRequire(n,r),i.$el.appendTo(t)}}function E(e,t){if(8==t.nodeType&&t.snRepeatSource)e.updateRepeatElement(t);else{if(t.snIfOrigin)return{isBreak:!0,nextSibling:t.snIfOrigin};if(e.updateElement(t),1==t.nodeType&&(t.snRequire&&w(e,t),_(e,t)),t.snIf&&!t.parentNode)return{isBreak:!0,nextSibling:t.snIf.nextSibling}}}function A(e,t){return x(e,function(e){var n=e.cloneNode(!1);e._clone=n,e.parentNode&&e.parentNode._clone&&e.parentNode._clone.appendChild(n),t(e,n)}),e._clone}function T(e,t){e.nextSibling!=t&&(e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))}function N(e,t){for(var n=e.parentNode;n;n=n.parentNode)if(t(n,e))return n;return null}function k(e){if(d.test(e)){var t,n=!1,i=y+"try{return '"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d,function(e,i){return"'+("+i.replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(p,function(e,i,r){return r?(0==r.indexOf("$global.")&&(n=!0),i+b(r,t)):0==e.indexOf("var ")?e.replace(/var\s+([^\=]+)\=/,function(e,n){return t=(t||[]).concat(n.split(",")),n+"="}):e})+")+'"})+"';}catch(e){console.error(e);return '';}";return i=i.replace("return ''+","return ").replace(/\+\'\'/g,""),t&&t.length&&(i="var "+t.join(",")+";"+i),{isGlobal:n,code:i,variables:t}}}function M(e){var t=e.parent;t.data[t instanceof $?t.models.indexOf(e):e._key]=e.data}function S(e,t){var i=e.getAttribute("sn-repeat"),r=i.match(h),s=r[3],a=s.split("."),o=a[0],u=r[4];if(u){var l=k("{"+u+"}");l&&(this.filter=new Function("$data",l.code),this.filterIsGlobal=l.isGlobal)}this.alias=r[1],this.loopIndexAlias=r[2],this.key=a[a.length-1],this.parent=t,this.source=e,this.children=[],this.orderBy=r[5],this.attrs=a,this.parentAlias=o;var c=document.createComment(s);if(c.snRepeatSource=this,e.parentNode.replaceChild(c,e),this.replacement=c,t&&t.appendChild(this),"$global"==o)this.isGlobal=!0,a.shift(),s=a.join(".");else for(this.isGlobal=!1;t;){if(t.alias==o){a[0]=t.collectionKey+"^child",s=a.join("."),this.offsetParent=t;break}t=t.parent}c.snIsGlobal=this.isGlobal||this.filterIsGlobal,this.collectionKey=s}function D(e,t,n){e!==!1&&I.push(this),"undefined"!=typeof t&&!i.isArray(t)||void 0!=e&&!i.isPlainObject(e)||(n=t,t=e,e=this.el),this.children=[].concat(n),this.updateView=this.updateView.bind(this),this._handleEvent=this._handleEvent.bind(this),this.cid=s.guid(),this.snModelKey="sn-"+this.cid+"model",this.data=i.extend({},this.defaultData,t),this.model={},this.repeats={},this._expressions={length:0},this.fns=[],this.refs={},this.root=this,e&&this.bind(e),this.set(this.data),this.initialize.call(this,t)}var i=e("$"),s=(e("./base"),e("util")),a=e("./event"),o={}.toString,u={tap:"tap","long-tap":"longTap","transition-end":i.fx.transitionEnd,touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",click:"click",change:"change",input:"input",focus:"focus",blur:"blur"},l=["this","$","JSON","Math","new","Date","encodeURIComponent","window","document"],f=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,h=/([$a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([$a-zA-Z_0-9]+(?:\.[$a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*(.+?)){0,1}(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/,d=/\{\s*(.+?)\s*\}(?!\s*\})/g,p=/'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/[img]*(?=[\)|\.|,])|\/\/.*|\bvar\s+[_,a-zA-Z0-9]+\s*\=|(^|[\!\=\>\<\?\s\:\(\),\%&\|\+\-\*\/\[\]]+)([\$a-zA-Z_][\$a-zA-Z_0-9]*(?:\.[a-zA-Z_0-9]+)*(?![a-zA-Z_0-9]*\())/g,v=/([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+)*)\s*=\s*((?:\((?:'(?:\\'|[^'])*'|[^\)])+\)|'(?:\\'|[^'])*'|[^;])+?)(?=\;|\,|\:|$)/g,g=/\b((?:this\.){0,1}[\.\w]+\()((?:'(?:\\'|[^'])*'|[^\)])*)\)/g,m={contains:function(e,t){return-1!=e.indexOf(t)},like:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),-1!=e.indexOf(t)||-1!=t.indexOf(e)},util:s},y=function(){var e="";for(var t in m)e+="var "+t+"=$data."+t+";";return e}(),b=function(e,t){var n=e.split("."),i=n[0],r=[],s="",a="$data";if(!i||i in m||-1!=l.indexOf(i)||t&&-1!=t.indexOf(i)||f.test(e))return e;e=a+"."+e;for(var o=0;o<n.length;o++)r[o]=(0==o?a:r[o-1])+"."+n[o];for(var o=0;o<r.length;o++)s+=(o?"&&":"")+r[o]+"!==null&&"+r[o]+"!==undefined";return"(("+s+")?typeof "+e+'==="function"?'+e+"():"+e+':"")'},O=function(e,t,n){if(e instanceof O)this.key=e.key?e.key+"."+t:t;else{if(!(e instanceof $))throw new Error("Model's parent mast be Collection or Model");this.key=e.key+"^child"}this.type="object"==typeof n?"object":"value",e.data[t]=this.data="object"==this.type?i.extend({},n):n,this._key=t,this.model={},this.parent=e,this.root=e.root,this.set(n)},C={findByKey:function(e){var t=this.model;for(var n in t){var i=t[n];if(i&&(i.key==e||i.keys&&-1!=i.keys.indexOf(e)))return i;if(i instanceof O&&(i=i.findByKey(e)))return i}return null},getModel:function(e){if("string"==typeof e&&-1!=e.indexOf(".")&&(e=e.split(".")),i.isArray(e)){var t=this;if("this"==e[0]){for(var n=1,r=e.length;r>n;n++)if(!(t=t[e[n]]))return null}else for(var n=0,r=e.length;r>n;n++)if(t instanceof O)t=t.model[e[n]];else{if(!(t instanceof $))return null;t=t.models[e[n]]}return t}return"this"==e?this:""==e?this.data:this.model[e]},get:function(e){if("string"==typeof e&&-1!=e.indexOf(".")&&(e=e.split(".")),i.isArray(e)){for(var t=this.data,n="this"==e[0]?1:0,r=e.length;r>n;n++)if(!(t=t[e[n]]))return null;return t}return"this"==e?this:""==e?this.data:this.data[e]},set:function(e,t,n){var s,u,c,f,r=this,l=r.model,h=!1;"boolean"!=typeof e&&(n=t,t=e,e=!1);var d=i.isArray(t);if(d||"object"!=typeof t)if(null===t)!e&&(e=!0),u={};else{if("undefined"==typeof n)return n=t,t="",c=this.parent,this.data=n,M(this),this;if(f=d?t:t.split("."),f.length>1){for(var p=f.pop(),v=0,g=f.length;g>v;v++)t=f[v],l=l[t]instanceof O?l[t]:l[t]=new O(this,t,{});return void l.set(e,p,n)}h=e,e=!1,(u={})[t]=n}else u=t;i.isPlainObject(this.data)||(this.data={},M(this));var m=this.data;if(e)for(var y in m)void 0===u[y]&&(u[y]=null);for(var y in u)if(s=l[y],value=u[y],s!==value)if(void 0===s&&(value instanceof D||value instanceof $))l[y]=value,m[y]=value.data,value instanceof $&&(value.keys||(value.keys=[])).push(r.key?r.key+"."+y:y),(value.root.parents||(value.root.parents=[])).push(this.root);else if(s instanceof O)null===value||void 0===value?s.reset():s.set(h,value),m[y]=s.data;else if(s instanceof $){if(!i.isArray(value)){if(null!=value)throw new Error("[Array to "+typeof value+" error]不可改变"+y+"的数据类型");value=[]}s.set(value),m[y]=s.data}else{switch(o.call(value)){case"[object Object]":value=new O(this,y,value),m[y]=value.data;break;case"[object Array]":value=new $(this,y,value),m[y]=value.data;break;default:m[y]=l[y]=value}l[y]=value}return this.root.updateViewNextTick(),r},reset:function(){var e={};for(var t in this.data)e[t]=null;this.set(e)}};O.prototype=C;var $=function(e,t,n){i.isArray(e)&&(n=e,e=null),e||(e=new D(!1),t="$list"),this.models=[],this.parent=e,this.key=e.key?e.key+"."+t:t,this._key=t,this.root=e.root,this.data=[],e.data[t]=this.data,n&&this.add(n)};$.prototype={get:function(e){return this.models[e]},set:function(e){if(e&&0!=e.length){var t=this.models.length;e.length<t&&this.remove(e.length,t-e.length);var n=0;this.each(function(t){t.set(!0,e[n]),n++}),this.add(0==n?e:e.slice(n,e.length))}else this.clear();return this},each:function(e){for(var t=0;t<this.models.length&&e.call(this,this.models[t],t)!==!1;t++);return this},find:function(e){for(var t=0;t<this.models.length;t++)if(e.call(this,this.data[t],t))return this.models[t];return null},add:function(e){var t,n;i.isArray(e)||(e=[e]);for(var r=0,s=e.length;s>r;r++){var a=e[r];n=this.models.length,t=new O(this,n,a),this.models.push(t)}this.root.updateViewNextTick()},remove:function(e,t){var n;if("function"==typeof e){n=[];for(var i=this.models.length-1;i>=0;i--)e.call(this,this.data[i],i)&&(n.push(this.models.splice(i,1)[0]),this.data.splice(i,1))}else t||(t=1),n=this.models.splice(e,t),this.data.splice(e,t);this.root.updateViewNextTick()},clear:function(e){this.models.length=this.data.length=0,this.root.updateViewNextTick()}},S.isRepeatNode=function(e){return 1==e.nodeType&&e.getAttribute("sn-repeat")},S.prototype.appendChild=function(e){this.children.push(e)};var I=[];D.prototype=Object.assign(Object.create(C),{_updateElementData:function(e,t,n){var r,i=t.split(".");r=e.snData&&i[0]in e.snData?e.snData[i.shift()]:this,r.set(i,n)},_handleEvent:function(e){if(e.type!=i.fx.transitionEnd||e.target==e.currentTarget){var t=e.currentTarget,n=t.getAttribute("sn-"+this.cid+e.type);if("false"==n)return!1;if(/^\d+$/.test(n)){var a=this.formatData(t.snData);return a.e=e,this.fns[n].call(this,a)}}},initialize:s.noop,getFunctionId:function(e){if(!e)return null;if(e=e.replace(/^\s+|\s+$/g,""),!e)return null;var t=this._expressions[e];if(t)return t;var n=k(e);if(!n)return null;this._codes.push("function($data){"+n.code+"}");var i=this._expressions.length++,r={id:i,isGlobal:n.isGlobal};return this._expressions[e]=r,r},twoWayBinding:function(t){var n=this;if(3==t.nodeType){var i=n.getFunctionId(t.textContent);return void(i&&(t.snBinding={textContent:i.id},t.snIsGlobal=i.isGlobal,t.textContent=""))}for(var r=t.attributes.length-1;r>=0;r--){var s=t.attributes[r].name,a=t.attributes[r].value;if(a)if("sn-error"==s?s="onerror":"sn-src"==s&&(s="src"),"sn-display"==s||"sn-html"==s||"sn-if"==s||"sn-style"==s||"sn-data"==s||0!=s.indexOf("sn-")){0!=s.indexOf("sn-")||-1!=a.indexOf("{")&&-1!=a.indexOf("}")||(a="{"+a+"}");var i=n.getFunctionId(a);"sn-data"==s&&i?t.setAttribute(s,i.id):i?("sn-if"==s&&(t.style.display="none"),(t.snBinding||(t.snBinding={}))[s]=i.id,t.snIsGlobal=i.isGlobal):"ref"==s&&(n.refs[a]=t)}else if("sn-model"==s)t.removeAttribute(s),t.setAttribute(n.snModelKey,a);else if("sn-require"==s)t.snRequire=e(a)||a;else{var o=s;s=s.replace(/^sn-/,"");var l=u[s];if(l)if(t.removeAttribute(o),s="sn-"+n.cid+l,v.test(a)||g.test(a)){var c=a.replace(g,function(e,t,n){return/^(Math\.|encodeURIComponent\(|parseInt\()/.test(t)?e:t+n+(n?",e)":"e)")}).replace(v,'this._updateElementData(e.currentTarget,"$1",$2)'),i=n.getFunctionId("{"+c+"}");i&&t.setAttribute(s,i.id)}else t.setAttribute(s,a)}}},formatData:function(e){var t=Object.assign({$global:this.$global.data},m,this.data);if(e)for(var n in e){var i=e[n];i instanceof O||i instanceof $?t[n]=i.data:t[n]=i}return t},updateElement:function(e,t){if(e.snBinding){var r,n=this,a=this.formatData(e.snData);t?(r={})[t]=e.snBinding[t]:r=e.snBinding;var o=e.snAttrs||(e.snAttrs={});for(var u in r){var l=n.fns[r[u]].call(n,a);if(o[u]!==l)switch(o[u]=l,u){case"textContent":if("object"==typeof l){if(l.nodeType)e.nextSibling!=l&&i(l).insertAfter(e);else if(i.isArray(l)){var c=l[0];c&&e.nextSibling!=c&&l.forEach(function(t){i(t).insertAfter(e)})}}else e.textContent=l;break;case"value":"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName?(e.value!=l||""===e.value&&0===l)&&(e.value=l):e.setAttribute(u,l);break;case"html":case"sn-html":e.innerHTML=l;break;case"sn-if":if(s.isFalse(l)){if(e.parentNode){if(!e.snIf){var f=e.snIf=document.createComment("if");e.parentNode.insertBefore(f,e),f.snIfOrigin=e}e.parentNode.removeChild(e)}}else e.parentNode||(e.snIf.nextSibling?e.snIf.parentNode.insertBefore(e,e.snIf.nextSibling):e.snIf.parentNode.appendChild(e)),"none"==e.style.display&&(e.style.display="");break;case"display":e.style.display=s.isFalse(l)?"none":"block"==l||"inline"==l||"inline-block"==l?l:"";break;case"sn-display":var h=s.isFalse(l)?"none":"block"==l||"inline"==l||"inline-block"==l?l:"";"none"==h?i(e).animate({opacity:0},"ease-out",200,function(){e.style.display=h}):(i(e).css({display:h,opacity:0}),e.clientHeight,i(e).animate({opacity:1},"ease-out",200,function(){}));break;case"sn-style":e.style.cssText+=l;break;case"style":e.style.cssText=l;break;case"checked":case"selected":(e[u]=!!l)?e.setAttribute(u,u):e.removeAttribute(u);break;case"src":case"sn-src":var d=i(e).one("load error",function(){d.animate({opacity:1},200)}).css({opacity:0}).attr({src:l});break;case"className":e.className=l;break;default:e.setAttribute(u,l)}}}},updateRepeatElement:function(e){var r,t=this,n=e.snRepeatSource,i=e.snCollection,s=n.offsetParent,a=n.orderBy;if(!i){if(n.isGlobal?r=this.$global:s?N(e,function(e){return e.snRepeatSource==s?(r=e.snModel,!0):void 0}):r=this,i=r&&r.findByKey(n.collectionKey),!i)return;e.snCollection=i}var o=e.snElements||(e.snElements=[]),u=[],l=e,c={},f=o.length;i.each(function(i){for(var s,l,r=!1,a=-1,h=!0,d=0;f>d;d++)if(s=o[d],s.snModel==i){c[d]=!0,r=!0,a=d;break}r?l=s.snData:(l={},n.parent&&N(e,function(e){return e.snRepeatSource==n.parent&&e.snData?(Object.assign(l,e.snData),!0):void 0}),l[n.alias]=i),n.filter&&(h=n.filter(t.formatData(l))),h?(r||(s=A(n.source,function(e,t){t.snData=l,t.snIsGlobal=e.snIsGlobal,e.snRepeatSource&&(t.snRepeatSource=e.snRepeatSource),e.snBinding&&(t.snBinding=e.snBinding)}),s.snRepeatSource=n,s.snModel=i,o.push(s)),u.push({el:s,model:i})):-1!=a&&(c[a]=!1)}),a&&u.sort(function(e,t){return e=e.model.data[a],t=t.model.data[a],e>t?1:t>e?-1:0}),u.forEach(function(e,t){var i=e.el;T(l,i),l=i,n.loopIndexAlias&&(i.snData[n.loopIndexAlias]=t)});for(var h=0;f>h;h++)if(!c[h]){var d=o[h];d.parentNode&&d.parentNode.removeChild(d)}return l},updateViewNextTick:function(){this._nextTick||(this._nextTick=requestAnimationFrame(this.updateView))},updateView:function(){console.time("updateView");var e=this;this.refs={},x(this.$el,function(t){return t.snViewModel&&t.snViewModel!=e?!1:E(e,t)}),console.timeEnd("updateView"),this.parents&&this.parents.forEach(function(e){!e._nextTick&&e.updateView()}),this._nextTick=null,this.trigger("viewDidUpdate")},bind:function(e){var t=this,n=i(e).on("input change blur","["+this.snModelKey+"]",function(e){var n=e.currentTarget;t._updateElementData(n,n.getAttribute(t.snModelKey),n.value)});return this._bindElement(n),t.$el=t.$el?t.$el.add(n):n,n.each(function(){this.snViewModel=t}),this},_bindElement:function(e){var t=this;this._codes=[],x(e,function(e){if(e.snViewModel)return!1;t.twoWayBinding(e);for(var n,i=e.parentNode;i&&!i.snViewModel;i=i.parentNode)if(i.snRepeatSource){n=i.snRepeatSource;break}if(S.isRepeatNode(e)){var r=e.nextSibling,s=new S(e,n);return e.snRepeatSource=s,r}});for(var n in u){var i=u[n],r="[sn-"+t.cid+i+"]";e.on(i,r,this._handleEvent).filter(r).on(i,this._handleEvent)}var s=new Function("return ["+this._codes.join(",")+"]")();s.forEach(function(e){t.fns.push(e)})},_bindNewNode:function(e){return e=i(e),e.each(function(){if(this.snViewModel)throw new Error("can not insert or append binded node!")}),this._bindElement(e),this.updateViewNextTick(),e},_checkOwnNode:function(e){if("string"==typeof e){if(e=this.$el.find(e),!e.length)throw new Error("is not own node")}else this.$el.each(function(){if(!i.contains(this,e))throw new Error("is not own node")});return e},isOwnNode:function(e){if("string"==typeof e)return!this.$el.find(e).length;var t=!0;return this.$el.each(function(){return i.contains(this,e)?void 0:!1}),t},before:function(e,t){return t=this._checkOwnNode(t),this._bindNewNode(e).insertBefore(t)},after:function(e,t){return t=this._checkOwnNode(t),this._bindNewNode(e).insertAfter(t)},append:function(e,t){return t=this._checkOwnNode(t),this._bindNewNode(e).appendTo(t)},prepend:function(e,t){return t=this._checkOwnNode(t),this._bindNewNode(e).prependTo(t)},next:function(e){return this.one("viewDidUpdate",e)},destory:function(){this.$el.off("input change blur","["+this.snModelKey+"]").each(function(){this.snViewModel=null});for(var e in u){var t=u[e],n="[sn-"+this.cid+t+"]";this.$el.off(t,n,this._handleEvent)}for(var i=0,r=I.length;r>i;i++)if(I[i]==this){I.splice(i,1);break}this.$el=null}}),a.mixin(D),D.extend=s.extend;var j=D.prototype.$global=new D;j.updateView=function(){I.forEach(function(e){var t={};x(e.$el,function(n){if(n.snViewModel&&n.snViewModel!=e)return!1;if(n.snIsGlobal){if(1==n.nodeType){var i=n.getAttribute("ref");i&&!t[i]&&(e.refs[i]=null,t[i]=!0)}return E(e,n)}})}),this._nextTick=null}.bind(j),t.Filters=m,t.ViewModel=t.Model=D,t.Global=j,t.Collection=$,t.createModel=function(e){return Object.assign(new D,e)},t.createCollection=function(e){return Object.assign(new $,e)}});define("core/route",["util"],function(e,t,n){var i=e("util"),r=function(e){var t=e.indexOf("?"),n="";return-1!=t&&(n=e.substr(t),e=e.substr(0,t)),(e.replace(/^#+|\/$/,"")||"/").toLowerCase()+n},s=function(e){this.routes=[],this.append(e)};s.prototype.append=function(e){var t,n,r,s,a;for(var o in e){if(t=e[o],n=[],a="^(?:/{0,1})"+o.replace(/(\/|^|\?)\{((?:\{[^\}]+\}|.){0,}[^\}]*)\}/g,function(e,t,i){return s=i.split(":"),s.length>1&&(n.push(s.shift()),i=s.join(":")),t+"("+i+")"})+"$","string"==typeof t)throw new Error("Route options error");r=t.root||"./",this.routes.push({regex:new RegExp(a,"i"),parts:n,template:i.combinePath(r,t.template),view:i.combinePath(r,t.controller),api:t.api,root:r})}},s.prototype.match=function(e){var o,l,c,t=null,n={},s=e=r(e),a=e.indexOf("?"),u=this.routes;-1!=a?(o=e.substr(a+1),e=e.substr(0,a),o.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(e,t,i){return n[t]=decodeURIComponent(i),""})):o="";for(var f=0,h=u.length;h>f;f++)if(l=u[f],c=l.regex?e.match(l.regex):null){t={path:c[0],url:s,hash:"#"+s,root:l.root,template:l.template,"package":sl.isDebug?!1:i.combinePath(l.root,"controller"),view:l.view,data:{},search:o,query:n};for(var d=0,p=l.parts.length;p>d;d++)t.data[l.parts[d]]=c[d+1];l.api&&(t.api=l.api.replace(/\{([^\}]+?)\}/g,function(e,n){return t.data[n]}));break}return t||console.error("wrong url:",e),t},s.trimHash=r,n.exports=s});define("core/animation",["$","./linklist","graphics/matrix2d","graphics/tween","graphics/cubicBezier","util"],function(t,e){for(var n=t("$"),i=t("./linklist"),r=t("graphics/matrix2d"),s=t("graphics/tween"),a=t("graphics/cubicBezier"),u=(t("util"),["webkit"]),l=0;l<u.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[u[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[u[l]+"CancelAnimationFrame"]||window[u[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var c=new i,f=!0,h=n.fx.cssPrefix+"transform",d={opacity:1},v=/(\d+\.\d+|\d+)\%/g,g=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,m=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,y=/matrix\([^\)]+\)\s*$/,b=/(translate|skew|rotate|scale|matrix)(3d){0,1}\(([^\)]+)\)/g,x=/^(matrix|translate|skew|rotate|scale|invert)(3d){0,1}$/,w=function(t){var e=[];return n.each(t,function(t,n){e.push(isNaN(parseFloat(n))?0:parseFloat(n))}),e},_=function(t,e,n){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*n},E=function(t){var e=new r;return t.replace(b,function(t,n,i,r){e["matrix"==n?"append":n].apply(e,w(r.split(",")))}),e},A=function(t){var i,s,e={};return n.each(t,function(t,n){var a=t.match(x);a?("translate"===t?n=(e[h]||"")+" "+t+"("+n+") translateZ(0)":(s||(s=new r),i=e[h]||"",n=s["matrix"==t?"append":t].apply(s,w(n.split(","))).toString(),n=y.test(i)?i.replace(y,n):i+" "+n),t=h):"transform"===t&&(t=h,s=null),e[t]=n}),{css:e,matrix:s}};e.transform=A,n.fn.transform=function(t){return this.css(A(t).css),this},n.fn.matrix=function(t){return t instanceof r?(this.css(h,t.toString()),this):E(getComputedStyle(this[0],null)[h])};var T=function(){if(c.length){f=!1;for(var t,e,s,r=(+new Date,c._idlePrev);r!=c;)s=r._idlePrev,first=r.data,t=Date.now()-first.startTime,e=[],t<=first.duration?first.step(first.ease instanceof a?first.ease.get(t/first.duration):first.ease(t,first.from,first.to-first.from,first.duration)/100,t,first.duration):(first.step(first.to/100,first.duration,first.duration),c._remove(r),first.finish&&first.finish(first.to/100)),r=s;requestAnimationFrame(T)}else f=!0},N=function(t){var e=t.ease;return t.startTime=Date.now(),!e&&(t.ease=s.easeOut)||"string"==typeof e&&(t.ease=0==e.indexOf("cubic-bezier")?new a(e):s[e.replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})]),t.stop=function(){c.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},k=function(t){for(var e=0,n=t.length;n>e;e++)c.append(N(t[e]));f&&T()},M=function(t){var e,i,r,s,a;this.el.each(function(){if(e=this._animationStyle,i=this._originStyle,0==t)a=i;else if(1>t){a={};for(var o in e)if(s=e[o],r=i[o],o==h){for(var u=r.match(m)||["",1,0,0,1,0,0],l=0,c=E(s),l=0;6>l;l++)c[l]=_(u[l+1],c[l],t);a[o]=c.toString()+" translateZ(0)"}else isNaN(parseFloat(s))?a[o]=s:(r=isNaN(parseFloat(r))?d[o]||0:parseFloat(r),a[o]=_(r,s,t))}else a=e;n(this).css(a)}),this._step&&this._step(t)},O=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},C=function(t){for(var e,i,s,u=0,l=t.length;l>u;u++)e=t[u],e.css&&(s=A(e.css),e.matrix=s.matrix,e.css=s.css,i=e.el=n(e.el),"object"==typeof e.start&&i.transform(e.start),i.each(function(){var t=this,i={},r={},s=getComputedStyle(t,null);n.each(e.css,function(e,n){"string"==typeof n&&(e==h?n=n.replace(g,function(e,n,i){return"translate("+(-1!==n.indexOf("%")?t.offsetWidth*parseFloat(n)/100:parseFloat(n))+"px,"+(-1!==i.indexOf("%")?t.offsetHeight*parseFloat(i)/100:parseFloat(i))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?n=n.replace(v,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(n=n.replace(v,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),r[e]=s[e],i[e]=n}),t._animationStyle=i,t._originStyle=r}),e._step=e.step,e.step=M,e._finish=e.finish,e.finish=O);return t},$=function(t){n.isArray(t)||(t=[t]),C(t),this.list=t};$.prototype.step=function(t){var e,n=this.list;this.per=t;for(var i=0,r=n.length;r>i;i++)e=n[i],e.from=t,e.step(t/100);return this},$.prototype.animate=function(t,e,n){for(var i,r=this.list,s=0,a=r.length;a>s;s++)i=r[s],i.duration=t,i.to=e,i.finish=i.start=void 0;return i.finish=n,k(r),this},e.Animation=$,e.parallel=function(t){k(C(t))},e.step=_,e.animate=function(){var t=arguments,e={},n=0,i=t[n++];return"function"==typeof i?e.step=i:(e.el=i,e.css=t[n++]),e.duration=t[n++],e.ease=t[n++],e.finish=t[n],k([e]),e}});define("core/appProto",["$","util","./view","./route","./event","widget/tip"],function(t,e,n){var r=(t("$"),t("util")),a=(t("./view"),t("./route")),o=t("./event");t("widget/tip");var u=r.getPath,l={checkQueryString:function(t,e){if(t.route.url!=e.url){t._setRoute(e);var i,n={};for(var r in t.query)r in t._query||(t._query[r]=void 0);for(var r in t._query)i=t._query[r],i!=t.query[r]&&(n[r]=i);t.trigger(new o("QueryChange",{data:n}))}},mapRoute:function(t){return this.route=new a(t),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[u(t)]=e},get:function(t,e){var n=this,i="string"==typeof t?n.route.match(t):t;if(i){var r=u(i.path),s=this._activities[r];null==s?!function(t){i["package"]?seajs.use(i["package"]+".js?v"+sl.buildVersion,t):t()}(function(){seajs.use(i.view,function(t){var o,a={application:n,route:i};null!=t?(o=n.$el.find('[data-path="'+i.path+'"]'),o.length&&(a.el=o),s=new t(a),n.set(r,s),s.then(function(){e.call(n,s,i)})):(n.skip++,location.hash=n._currentActivity.url)})}):(s._referrer(i),e.call(n,s,i))}},remove:function(t){this._activities[u(t)]=void 0}};n.exports=l});define("core/app",["$","util","bridge","./base","./component","./appProto","./animation","./linklist","./promise","./touch","./route","./activity"],function(t,e,n){function x(e,n,r,s){s||(s=(e?r:n).toggleAnim);var a=t("anim/"+s),o=e?"open":"close",u="ease-out",l=i.extend({},a[o+"EnterAnimationFrom"]),c=i.extend({},a[o+"ExitAnimationFrom"]);return l.zIndex=e?a.openEnterZIndex:a.closeEnterZIndex,l.display="block",c.zIndex=e?a.openExitZIndex:a.closeExitZIndex,[{el:r.$el,start:l,css:a[o+"EnterAnimationTo"],ease:u},{el:n.$el,start:c,css:a[o+"ExitAnimationTo"],ease:u}]}function w(t,e){t._startExit(),t.$el.siblings('.view:not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)}function _(t){var e=t.touch=new h(t.el,{enableVertical:!1,enableHorizontal:!0,momentum:!1});e.on("beforestart",function(t){this.x=0,this._isInAnim&&this.stop()}).on("start",function(){var n,i,e=this,r=e.deltaX;if(e.isDirectionY||e.swiperPromise||e.swiper)return e.swiperPromise&&e._stop(),void e.stop();e.width=window.innerWidth,e.minX=-1*e.width,e.maxX=0;var s=t._currentActivity,a=e.isSwipeLeft=r>0;e.swiper=null,n=a?s.swipeLeftForwardAction?(i=!0,s.swipeLeftForwardAction):(i=!1,s.swipeLeftBackAction):s.swipeRightForwardAction?(i=!0,s.swipeRightForwardAction):(i=!1,s.swipeRightBackAction),n||(a&&"Left"==s.referrerDir?n=s.referrer:a||"Left"==s.referrerDir||(n=s.referrer),i=!1),n?(e.swiperPromise=new f,t.mask.show(),t.get(n,function(t){e.needRemove=null===t.el.parentNode,w(s,t),e.isSwipeOpen=i,e.swiper=new l.Animation(x(i,s,t)),e.swipeActivity=t,e.swiperPromise.resolve()})):e.swiperPromise=null}).on("move",function(t){var e=this,n=e.deltaX;e.swiperPromise&&e.swiperPromise.then(function(){e.swiper.step(e.isSwipeLeft&&0>n||!e.isSwipeLeft&&n>0?0:100*Math.abs(n)/e.width)})}).on("stop",function(){var e=this;e.isCancelSwipe=e.isMoveLeft!==e.isSwipeLeft||Math.abs(e.deltaX)<=10,e.swiperPromise&&e.swiperPromise.then(function(){e._isInAnim=!0,t.queue.then([200,e.isCancelSwipe?0:100,function(){var n=e.swipeActivity,i=t._currentActivity;e._isInAnim=!1,e.isCancelSwipe?(i.isPrepareExitAnimation=!1,i.$el.addClass("active"),e.needRemove&&n.$el.remove(),t.mask.hide()):(n.isForward=e.isSwipeOpen,t._currentActivity=e.swipeActivity,t.navigate(n.url,e.isSwipeOpen),n._enterAnimationEnd(),e.isSwipeOpen?(n.referrer=i.url,n.referrerDir=e.isSwipeLeft?"Right":"Left",i.trigger("Pause")):i.destroy()),t.queue.resolve()}],e.swiper.animate,e.swiper),e.swiperPromise=null,e.swiper=null})})}var i=t("$"),r=t("util"),s=t("bridge"),o=(t("./base"),t("./component")),u=t("./appProto"),l=t("./animation"),f=(t("./linklist"),t("./promise")),h=t("./touch"),p=t("./route"),g=(t("./activity"),r.noop,r.lastIndexOf),b=(Array.prototype.slice,r.getPath,p.trimHash),E=o.extend(Object.assign(u,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,n=i(t.currentTarget),r=n.attr("href");if(/^(http\:|https\:|javascript\:|mailto\:|tel\:)/.test(r)){if(!sl.isInApp||0!=r.indexOf("http"))return void n.addClass("js-link-default");s.openInApp(r)}else"tap"==t.type&&(/^#/.test(r)||(r="#"+r),null!=n.attr("back")?e.back(r):e.forward(r));return!1},"tap [data-back]":function(t){this.back(i(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(i(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},el:'<div class="viewport"><div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:20000;display:none"></div></div>',backGesture:!0,initialize:function(){var t=this;window.Application=this,t.el=t.$el[0],t.mask=t.$el.children(".screen"),t.history=[],t.backGesture&&_(this);var e=!1;i(window).on("back",function(){var n=location.hash;""==n||"#"===n||"/"===n||"#/"===n?e?s.exit():(e=!0,setTimeout(function(){e=!1},2e3),sl.tip("再按一次退出程序")):t.back(t.history[t.history.length-2])})},getCurrentActivity:function(){return this._currentActivity},start:function(e){var n=this,r=i(window),a=location.hash||"/",o=n.$el;n.queue=new f,e?(setTimeout(function(){o.appendTo(document.body),e.resolve()},e),e=new f):o.appendTo(document.body),n.$el=i(n.el),s.hasStatusBar&&i("body").addClass("has_status_bar"),n.hash=a=b(a),n.historyPromise=(new f).resolve(),n.get(a,function(i){n.history.push(a),i.$el.appendTo(n.el),n._currentActivity=i,i.$el.transform(t("anim/"+i.toggleAnim).openEnterAnimationTo),i.then(e).then(function(){i.$el.addClass("active"),i.trigger("Appear").trigger("Show"),n.trigger("Start"),n.queue.resolve()}),r.on("hashchange",function(){var e,t=n.hash=b(location.hash);n.hashChanged?(n.hashChanged=!1,n.historyPromise.resolve()):n.historyPromise.then(function(){e=g(n.history,t),-1==e?n.forward(t):n.back(t)})})}),r.one("load",function(){location.hash||(location.hash="/")})},_toggle:function(t,e,n){var i=this,r=i._currentActivity,s=t.url,a=e.isForward,o=e.duration||300;return i.navigate(s,a),r.path==t.path?(i.checkQueryString(r,t),void i.queue.resolve()):(t.isForward=a,a&&(t.prevActivity=r,t.referrer=r.url,t.referrerDir=r.swipeRightForwardAction==s?"Left":"Right"),void i.get(t,function(s){i._currentActivity=s,w(r,s),i.checkQueryString(s,t),s.then(function(){s.trigger("Appear")});for(var f,u="cubic-bezier(.34,.86,.54,.99)",c=x(a,r,s,e.toggleAnim),h=!1,p=function(){h||(h=!0,s._enterAnimationEnd(),n&&n(s),i.queue.resolve())},d=0,v=c.length;v>d;d++)f=c[d],f.ease=u,f.duration=o,f.el.css(l.transform(f.start).css).animate(l.transform(f.css).css,o,u,p);setTimeout(p,o+300)}))},navigate:function(t,e){var n=this;n.historyPromise.then(function(){var i,r=t!==b(location.hash);if(n.hashChanged=r,e)n.history.push(t),r&&(location.hash=t);else if(i=g(n.history,t),-1==i)n.history.length=0,n.history.push(t),r&&(location.hash=t);else{var s=i+1-n.history.length;r&&s&&history.go(s),n.history.length=i+1}return r?this:null})},match:function(t,e){var n=this,i=this.route.match(t);if(i){var r=this.queue;r.then(function(){return e.call(n,i),r})}else location.hash=this._currentActivity.url},forward:function(t,e){this.match(t,function(t){var n=this._currentActivity;(e||(e={})).isForward=!0,this._toggle(t,e,function(){n.trigger("Pause")})})},back:function(t,e){this.match(t,function(t){var n=this._currentActivity;(e||(e={})).isForward=!1,this._toggle(t,e,function(){n.destroy()})})}}));n.exports=E});define("core/activity",["util","./promise","widget/scroll","./component","bridge","widget/dialog"],function(t,e,n){var i=t("util"),r=t("./promise"),s=t("widget/scroll"),o=t("./component"),a=t("bridge"),u=t("widget/dialog"),h=(Array.prototype.slice,i.indexOf,i.getPath),f=o.extend({el:'<div class="view"></div>',toggleAnim:"def",defBackUrl:"/",autosetBackUrl:!0,_referrer:function(t){if(this.isForward=t.isForward,t.isForward){for(var e,n=t,i=this;(e=n.prevActivity)&&(i=e.route.prevActivity)&&n;){if(i==this){e.route.prevActivity=this.route.prevActivity,e.referrer=e.route.referrer=this.referrer,e.referrerDir=e.route.referrerDir=this.referrerDir,e.swipeRightBackAction=this.swipeRightBackAction;break}n=i.route}this.referrer=t.referrer,this.referrerDir=t.referrerDir}return this.autosetBackUrl&&(backUrl=t.query.from||this.referrer||this.defBackUrl,h(backUrl)!=t.path.toLowerCase()&&(this.swipeRightBackAction=backUrl)),this},_setRoute:function(t){return this.route=t,this.hash=t.hash,this.url=t.url,this.path=t.path,this._query=this.query,this.query=$.extend({},t.query),this},initialize:function(){var t=this,e=r.resolve();t._promise=e,t.className=t.el.className,t.application=t.options.application,t._referrer(t.options.route)._setRoute(t.options.route).on("Create",t.onHtmlLoad).on("Show",t._onShow).on("Destroy",t._onDestroy).on("Pause",t._statusChange).on("QueryChange",t.checkQuery),t.onStart&&t.on("Start",t.onStart),t.onResume&&t.on("Resume",t.onResume),t.onShow&&t.on("Show",t.onShow),t.onPause&&t.on("Pause",t.onPause),t.onQueryChange&&t.on("QueryChange",t.onQueryChange),t.$el.data("path")||(t.$el.data("url",t.url).data("path",t.path),e.then(t.loadTemplate,t)),e.then(t.onCreate,t).then(function(){t.checkQuery()})},loadTemplate:function(){var t=this,e=1,n=function(){e--,0==e&&(t.$el.html(t.razor.html(t.data)).appendTo(t.application.$el),t.trigger("Create"),t._promise.resolve())};return t.route.api&&(e++,$.ajax({url:t.route.api,type:"GET",dataType:"json",success:function(e){t.data=e,n(e)},error:function(t){n({success:!1,content:t.responseText})}})),seajs.use(t.route.template,function(e){t.razor=e,n()}),t._promise},onCreate:i.noop,onHtmlLoad:function(){var t=this;t._scrolls=s.bind(t.$(".scrollview")),t._isShowed=!1},onStart:null,onShow:null,_onShow:function(t){this._statusChange(t),this.onLoad&&this.onLoad(),this._isShowed||this.trigger("Start"),(!this._isShowed||this.isForward)&&(this.trigger("Enter"),this.onEnter&&this.onEnter()),this._isShowed=!0},onPause:null,onResume:null,onStop:null,onQueryChange:null,onResult:function(t,e){return this.listenTo(this.application,t,e)},setResult:function(){return this.application.trigger.apply(this.application,arguments),this},_onDestroy:function(){this._scrolls&&this._scrolls.destory(),this.application.remove(this.url)},_statusChange:function(t){"Pause"==this._status&&this.trigger("Resume"),this._status=t.type},compareUrl:function(t){return h(t)===this.route.path.toLowerCase()},then:function(t){return this._promise.then(t,this),this},forward:function(t,e){this.application.forward(t,e)},back:function(t,e){this.application.back(t,e)},queryString:function(t,e){if("undefined"==typeof e)return this.route.query[t];null===e||e===!1||""===e?delete this.route.query[t]:this.route.query[t]=e||"";var n=$.param(this.route.query);this.application.navigate(this.route.path+(n?"?"+n:""))},_queryActions:{},checkQuery:function(){var i,t=this,e=t.query,n=t._query;$.each(t._queryActions,function(t,r){if(i=e[t]||"",i&&!n||n&&i!=n[t]){var s=r.map[i];s.exec?s.exec=!1:s.fn.apply(r.ctx)}})},bindQueryAction:function(t,e,n){var i=this,s={},o={ctx:e,map:s};return $.each(n,function(r,o){var o=n[r],a=e[o],u={fn:a,exec:!1};s[r]=u,e[o]=function(){a.apply(e,arguments),i.queryString(t)!=r&&(u.exec=!0,i.queryString(t,r))}}),this._queryActions[t]=o,this},createIFrame:function(t){var e=$('<iframe width="'+window.innerWidth+'px" frameborder="0" />').appendTo(t),n=e[0].contentWindow,i=n.document,r=this;return $(i.body).on("click","a[href]",function(t){var e=$(t.currentTarget),n=e.attr("href");return/^(http\:|https\:|javascript\:|mailto\:|tel\:)/.test(n)?sl.isInApp&&0==n.indexOf("http")&&a.openInApp(n):(t.preventDefault(),/^#/.test(n)||(n="#"+n),null!=e.attr("back")?r.back(n):r.forward(n)),!1}),{$el:e,window:n,document:i,html:function(t){i.body.innerHTML="<style>p{ padding:0;margin:0 0 10px 0; }img{width:100%;height:auto;display:block;}</style>"+t,e.css({height:i.documentElement.scrollHeight}),[].forEach.call(i.querySelectorAll("img"),function(t){t.style.width="100%",t.style.height="auto",t.onload=function(){e.css({height:i.documentElement.scrollHeight})}})}}},prompt:function(t,e,n){n="function"==typeof e?e:n,e="function"==typeof e?"":e;var i=this._prompt;i||(this._prompt=i=this.createDialog("prompt",{top:"50%",content:'<input type="text" class="prompt-text" />',buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok(this.$input.val())}}]}),i.$input=i.$(".prompt-text")),i.title(t||"请输入").show(),i.$input.val(e).focus(),i.ok=$.proxy(n,this)},confirm:function(t,e,n){"function"==typeof e&&(n=e,e=t,t="提示");var i=this._confirm;i||(this._confirm=i=this.createDialog("confirm",{buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok()}}]})),i.title(t).show(),i.content(e),i.ok=$.proxy(n,this)},createDialog:function(t,e){var n=this,i=new u(e);return n.bindQueryAction(t,i,{show:"show","":"hide"}),i},isExiting:!1,_startExit:function(){var t=this;if(!t.isExiting){t.isExiting=!0;var e=t.application;e.activeInput&&(e.activeInput.blur(),e.activeInput=null),e.mask.show(),t.$el.removeClass("active")}},_enterAnimationEnd:function(){var t=this;t.application.mask.hide(),t.isExiting=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})}});return f});define("core/touch",["$","util","./animation","../graphics/cubicBezier","./event"],function(t,e,n){var i=t("$"),s=(t("util"),t("./animation")),o=t("../graphics/cubicBezier"),a=t("./event"),l=(Array.prototype.slice,new o(.08,.53,.2,.96)),c=a.mixin(function(t,e){var n=this,r=i(t);n.$el=r,n.el=r[0],n.options=i.extend({enableVertical:!0,enableHorizontal:!1,divisorX:0,divisorY:0,maxDuration:0,momentum:!0},e),this.delegate("touchstart",n.options.children,n._start).delegate("touchmove",n.options.children,n._move).delegate("touchend",n.options.children,n._end)},{minDelta:0,minX:0,maxX:0,minY:0,maxY:0,x:0,y:0,delegate:function(t,e,n){return"undefined"==typeof e&&"function"==typeof n&&(e=n),"function"==typeof e?this.$el.on(t,i.proxy(e,this)):this.$el.on(t,e,i.proxy(n,this)),this},_stopMomentum:function(){return this.momentum?(this.momentum.stop(),this._isClickStopAni=!0,!0):!1},_start:function(t){var e=this,n=t.touches[0];e.pointX=e.startPointX=e.sx=n.pageX,e.pointY=e.startPointY=e.sy=n.pageY,e.isTouchStop=!!t.isHoldScroll,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e.startX=e.x,e.startY=e.y,e.prevPointX=e.prevPointY=0,e.isClickStopMomentum=e._stopMomentum(),e.timestamp=Date.now(),e.trigger(new a("beforestart",{currentTarget:t.currentTarget,isHoldScroll:t.isHoldScroll}))},_move:function(t){if(!(this.isTouchStop||t.isHoldScroll&&(this.isTouchStop=!0))){var s,o,e=this,n=t.touches[0],i=e.startPointX-n.pageX,r=e.startPointY-n.pageY;if(e.deltaX=i,e.deltaY=r,!e.isTouchStart){var u=Math.abs(i)>=e.minDelta&&Math.abs(i)>Math.abs(r),l=!u;if(!l&&!u)return!1;if(l&&!e.options.enableVertical||u&&!e.options.enableHorizontal)return void this.stop();if(e.isTouchStart=!0,e.isDirectionY=l,e.isDirectionX=u,e.dir=u,e.isInit||(e.trigger(new a("init",{currentTarget:t.currentTarget})),e.isInit=!0),e.trigger(new a("start",{currentTarget:t.currentTarget})),e.isTouchStop)return}return e.options.enableHorizontal&&(s=e.startX+i,e.x=s<e.minX?e.minX+(s-e.minX)/2:s>e.maxX?e.maxX+(s-e.maxX)/2:s),e.options.enableVertical&&(o=e.startY+r,e.y=o<e.minY?e.minY+(o-e.minY)/2:o>e.maxY?e.maxY+(o-e.maxY)/2:o),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-n.pageX>0?!0:e.pointX==n.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-n.pageY>0?!0:e.pointY==n.pageY?e.isMoveTop:!1,e.prevPointX=e.oldPointX,e.prevPointY=e.oldPointY,e.oldPointX=e.pointX,e.oldPointY=e.pointY,e.pointX=n.pageX,e.pointY=n.pageY,e.timestamp=Date.now(),e.trigger(new a("move",{currentTarget:t.currentTarget})),!1}},shouldBounceBack:function(){var t=this;return t.options.enableHorizontal&&(t.x<t.minX||t.x>t.maxX)||t.options.enableVertical&&(t.y<t.minY||t.y>t.maxY)},_end:function(t){var n,e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.shouldBounceBack()&&e.bounceBack(),e._stop(),void(t.cancelTap=!0);if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop&&(e.isTouchStop=!0,n=new a("end",{currentTarget:t.currentTarget}),e.trigger(n),i(t.target).trigger("touchcancel"),!n.isDefaultPrevented()))){if(e.shouldBounceBack())return console.log("shouldBounceBack",this.x,this.maxX),void e.bounceBack();var u,c,v,m,g,y,b,r=t.changedTouches[0],h=e.x,f=e.y,p=0,d=0,x=n.maxDuration||e.options.maxDuration,w=l;if(Date.now()-e.timestamp<50){u=r.pageX-(e.prevPointX||e.oldPointX),c=r.pageY-(e.prevPointY||e.oldPointY);var _=Math.min(80,Math.max(20,Math.abs(u))),E=Math.min(80,Math.max(20,Math.abs(c)));u=(0>u?-1:1)*_,c=(0>c?-1:1)*E,w=new o(.05,E/100,Math.min(.2,1-E/100),.96),p=u*Math.abs(u)/-4*1.3,d=c*Math.abs(c)/-4*1.3,g=60*Math.max(Math.abs(u),Math.abs(c),10)}return e.options.divisorX&&(y=p+h,p=y%e.options.divisorX==0?p:e.isMoveLeft?Math.ceil(y/e.options.divisorX)*e.options.divisorX-h:Math.floor(y/e.options.divisorX)*e.options.divisorX-h),e.options.divisorY&&(b=d+f,d=b%e.options.divisorY==0?d:e.isMoveTop?Math.ceil(b/e.options.divisorY)*e.options.divisorY-f:Math.floor(b/e.options.divisorY)*e.options.divisorY-f,console.log(b,d,e.isMoveTop,Math.ceil(b/e.options.divisorY)*e.options.divisorY)),e.options.momentum&&(p||d)?(!g&&(g=200)||x&&g>x&&(g=x),e.momentum=s.animate(function(t,n,i){t=w.get(n/i),v=h+p*t,m=f+d*t,e.options.enableVertical&&(m<e.minY||m>e.maxY)||e.options.enableHorizontal&&!e.options.enableVertical&&(v<e.minX||v>e.maxX)?(e.momentum&&e.momentum.stop(),p=h+p,d=f+d,h=e.x,f=e.y,p=p<e.minX?e.minX+Math.max(-80,(p-e.minX)/36):p>e.maxX?e.maxX+Math.min(100,(p-e.maxX)/36):p,d=d<e.minY?e.minY+Math.max(-80,(d-e.minY)/36):d>e.maxY?e.maxY+Math.min(100,(d-e.maxY)/36):d,d-=f,p-=h,e.momentum=s.animate(function(t){e.options.enableHorizontal&&(e.x=h+p*t),e.options.enableVertical&&(e.y=f+d*t),e.trigger("move")},Math.min(200,(i-n)/4),"easeOutCubic",function(){e.bounceBack()})):(e.options.enableHorizontal&&(e.x=v<e.minX?e.minX:v>e.maxX?e.maxX:v),e.options.enableVertical&&(e.y=m),e.trigger("move"))},g,"ease",function(){e._stop()})):e._stop(),!1}},bounceBack:function(){var t=this,e=t.x,n=t.y,i=0,r=0;t.options.enableHorizontal&&(t.x<t.minX?i=t.minX-t.x:t.x>t.maxX&&(i=t.maxX-t.x)),t.options.enableVertical&&(t.y<t.minY?r=t.minY-t.y:t.y>t.maxY&&(r=t.maxY-t.y)),s.animate(function(s){t.x=e+i*s,t.y=n+r*s,t.trigger("move")},300,"ease",function(){t._stop(),t.trigger("bounceBack")})},scrollTo:function(t,e,n,i){var r=this;if(t=r.options.enableHorizontal?t>=this.maxX?this.maxX:t<=this.minX?this.minX:t:r.x,e=r.options.enableVertical?e>=this.maxY?this.maxY:e<=this.minY?this.minY:e:r.y,n){var o=r.x,a=r.y,u=t-r.x,l=e-r.y;s.animate(function(t){r.x=o+u*t,r.y=a+l*t,r.trigger("move")},n,"ease",i)}else r.x=t,r.y=e,r.trigger("move"),i&&i()},stop:function(){this.isTouchStop=!0},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}});n.exports=c});define("widget/scrollview",["$","core/animation","core/touch"],function(t,e,n){var i=t("$"),s=(t("core/animation"),t("core/touch")),o=function(t){return i('<div class="scroller_container" style="width:100%;"></div>').append(t.children()).appendTo(t.html(""))},a=function(t,e){var n=this;n.options=e=i.extend({},n.options,e),n.$el=i(t).css({overflow:"hidden"}),n.el=n.$el[0],n.$scroller=o(n.$el),n.scroller=n.$scroller[0],this.touch=new s(n.$el,{enableVertical:e.vScroll,enableHorizontal:e.hScroll}),this.touch.on("start",function(){if(this.maxY=Math.max(n.scroller.offsetHeight-n.el.clientHeight,0),e.hScroll){n.$scroller.css({overflowX:"auto"});var t=n.scroller.scrollWidth;n.scroller.style.width=t+"px",this.maxX=Math.max(t-n.el.clientWidth,0)}}).on("move",function(){var t=this;n.scroller.style.webkitTransform="translate3d("+-1*t.x+"px,"+-1*t.y+"px,0)"}).on("stop",function(){n.$el.trigger("scrollStop",{x:this.x,y:this.y,width:n.el.clientWidth,height:n.el.clientHeight,scrollHeight:n.scroller.offsetHeight,scrollWidth:n.scroller.offsetWidth})})};a.prototype.scrollTo=function(t,e,n){this.touch.trigger("start").scrollTo(t,e,n)},a.addScroller=o,n.exports=a});define("widget/scroll",["$","util","../core/animation","./scrollview"],function(t,e,n){var h,i=t("$"),r=t("util"),s=t("../core/animation"),o=t("./scrollview"),a=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var n=t.touches[0],i=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=n.pageY,e.sx=n.pageX,e.st=i[5],e.isLoading=e.isDataLoading}else e.isStop=!0},l=function(t){var e=this;if(!e.isStop){var n=t.touches[0],i=n.pageY-e.sy,r=n.pageX-e.sx;if(e.oy=e.pointY,e.pointY=n.pageY,!e.isStart&&(e.isStart=!0,Math.abs(r)>Math.abs(i)))return void(e.isStop=!0);var s=e.scrollView;return(s?s.touch.y<=0:0==e.parentNode.scrollTop)&&i>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*i,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"释放刷新":"下拉刷新")):e.isStop=!0,e.isStop}},c=function(t){var e=this;if(e.isMoved){var n=t.changedTouches[0],i=e.ty,r=i>70?50:0,o=e.oy-n.pageY,a=function(){e.$.animate({"-webkit-transform":"translate(0px,"+r+"px) translateZ(0)"},300+-1*o,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==r||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(r=0),-5>o?e.$.animate({"-webkit-transform":"translate(0px,"+(i-1.5*o)+"px) translateZ(0)"},-1.5*o,"cubic-bezier(.3,.78,.43,.95)",a):a(),!1}},u=function(){var t=this,e=function(){if(t.$refresh.html("下拉刷新"),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix()[5],n=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+n+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh.call(this,e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},f=function(t){var e=this,n=t.touches[0],i=+new Date;h=t,t.scrolling=!1,t.startTime=i,t.isHoldScroll=i-e.__timestamp<=32,e.__sy=e.__lastPY=e.__pointY=n.pageY,e.__sx=n.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isStop=!1,e.__isScroll=!1},p=function(t){if(!this.__isStop){t.isHoldScroll=h.isHoldScroll;var e=this,n=t.touches[0],i=n.pageY,s=n.pageY-e.__sy,o=n.pageX-e.__sx;if(e.__lastPY=e.__pointY,e.__pointY=i,!e.__isStart){if(e.__isStart=!0,e.options.vScroll&&!e.options.hScroll&&Math.abs(o)>Math.abs(s)||!e.options.vScroll&&e.options.hScroll&&Math.abs(o)<Math.abs(s))return void(e.__isStop=!0);e.__isStop=!1}e.__isMoved=!0,e.__isScroll=!0,r.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70),t.stopPropagation(),e.__timestamp=+new Date}},d=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,t.__params&&t.__params.x==t.scrollLeft&&t.__params.y==t.scrollTop||i(t).trigger("scrollStop",t.__params={x:t.scrollLeft,y:t.scrollTop,width:t.clientWidth,height:t.clientHeight,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth})},80)},v=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,h.scrolling||t.__isMoved||(h.isHoldScroll=t.__timestamp-h.startTime<32,h.scrolling=!0),(t.__hasMomentum||r.android)&&d(t)},m=function(t){var e=this,s=(i(e),t.changedTouches[0].pageY),o=Math.abs(e.__lastPY-s);d(e),r.ios&&5>o?(e.__isStop=!1,e.__hasMomentum=!1):e.__hasMomentum=!0,void 0===t.cancelTap&&(t.cancelTap=e.__isScroll||h.isHoldScroll),(e.__isScroll&&!e.__isStop||h.isHoldScroll)&&(t.stopPropagation(),t.preventDefault()),e.__isScroll=!1,e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){e=i.extend({vScroll:!0,hScroll:!1},e);var n=[],h={items:n,get:function(t){return r.first(this.items,"string"==typeof t?function(e){return e.$el.filter(t).length>0}:function(e){return e.el==t})},eq:function(t){return this.items[t]},destory:function(){this.items.forEach(function(t){t.destory()})}};return("string"==typeof t||t.nodeType?i(t):t).each(function(){var d,g,t=this,h=i(t).addClass("scrollview");if(e&&e.useScroll||r.android&&parseFloat(r.osVersion<=2.3)?g=d=new o(this,e):(t.__timestamp=0,r.ios?h.css({"-webkit-overflow-scrolling":"touch",overflowY:e.vScroll?"scroll":"",overflowX:e.hScroll?"scroll":""}):r.android&&h.css({overflowY:e.vScroll?"auto":"",overflowX:e.hScroll?"auto":""}),h.on("scroll",v).on("touchstart",f).on("touchmove",p).on("touchend",m),t._scrollTop=0,t.options=e,g={el:t,$el:h,destory:function(){h.off("touchstart",f).off("touchmove",p).off("touchend",m).off("scroll",v)},scrollTo:function(e,n,i){if(i){var r=t.scrollLeft,o=t.scrollTop,a=e-r,l=n-o;s.animate(function(e){t._scrollLeft=t.scrollLeft=r+s.step(0,a,e),t._scrollTop=t.scrollTop=o+s.step(0,l,e)},i)}else t._scrollLeft=t.scrollLeft=e,t._scrollTop=t.scrollTop=n}}),t.scroll=g,g.imageLazyLoad=function(e){var n=i("img[data-src]:not([src])",this.$el).css({opacity:0}),r=e?e.y:0,s=e?e.height:this.$el.height(),o=r+s;0!=s&&n&&n.each(function(){for(var e=this.offsetParent,n=this.offsetTop;e&&e!=t&&e!=document.body;)n+=e.offsetTop,e=e.offsetParent;if(o>=n){var r=i(this).one("load error",function(){r.animate({opacity:1},200)}).attr({src:this.getAttribute("data-src")});this.removeAttribute("data-src")}})},h.on("scrollStop",function(t,e){g.imageLazyLoad(e)}),n.push(g),r.isInApp&&h.on("focus","input:not(readonly),textarea:not(readonly)",function(e){var n=e.currentTarget,r=0;do r+=n.offsetTop,n=n.offsetParent;while(n&&t!=n&&!i.contains(n,t));var s=r-(window.innerHeight/4-60);d?d.scrollTo(d.x,s):t._scrollTop=t.scrollTop=s}),e&&e.refresh){var y=h.children(".scroller_container"),x=i('<div class="refresh" style="height:50px;text-align:center;line-height:50px;">下拉刷新</div>');y.length||(y=o.addScroller(h));var b=y[0];b.$refresh=x,b.$=y,b.options=e,d&&(b.scrollView=d),y.css({marginTop:-50}).prepend(x).on("touchstart",a).on("touchmove",l).on("touchend",c).on("refresh",u),this.$refresh=x,this.$scroller=y}}),h}});define("widget/tip",["$","util","core/promise"],function(t,e){var n=t("$"),r=(t("util"),t("core/promise")),s=n('<div class="tip" style="display:none"></div>').on(n.fx.transitionEnd,function(){s.hasClass("tip-hide")&&s.hide()}).appendTo(document.body);e.promise=r.resolve(),e.msec=2e3,e.show=function(){s.hasClass("tip-show")||s.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return s.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){s.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/view"],function(t,e,n){var i=t("$"),r=t("util"),o=t("./../core/view"),s=null,a=o.extend({events:{"tap .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:r.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<len;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=r.pick(t.options,["top","isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[i(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,s.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(){var t=this;t._visible||(t._visible=!0,s||(s=i('<div style="position:absolute;top:0px;bottom:0px;right:0px;width:100%;background: rgba(0,0,0,.5);z-index:2000;display:none"></div>').appendTo(document.body)),s.show(),null==t.el.parentNode&&t.$el.appendTo(document.body),t.$el.css({"-webkit-transform":"",display:"block",top:this.options.top||"50%"}),t.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){t.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}});n.exports=a});define("widget/loader",["$","util"],function(t,e,n){var i=t("$"),r=t("util"),s=i(),o=["$el","url","method","headers","dataType","xhrFields","beforeSend","success","complete","pageIndex","pageSize","append","checkEmptyData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL","MSG_NO_MORE"],a=function(t){void 0!==t.length&&(t={$el:t}),i.extend(this,r.pick(t,o)),t.el&&(this.$el=i(t.el)),!this.$el&&(this.$el=s),this.el=this.$el[0],this.params=i.extend({},this.params,t.params),this.error=t.error||this.showError,this.$scroll=t.$scroll||this.$el,this.$content=t.$content||this.$scroll,this.pageEnabled=!(!t.pageEnabled&&!this.append),void 0!=t.showLoading&&(this.isShowLoading=t.showLoading!==!1&&!!this.el),this.url&&this.setUrl(this.url)};a.url=function(t){return/^http\:\/\//.test(t)?t:this.prototype.baseUri.replace(/\/$/,"")+"/"+t.replace(/^\//,"")},a.prototype={isShowLoading:!0,KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_MSG:"msg",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",MSG_NO_MORE:"没有更多数据了",MSG_LOADING_MORE:"正在加载...",baseUri:i('meta[name="api-base-url"]').attr("content"),method:"POST",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refreshTemplate:'<div class="refreshing"><p class="loading js_loading"></p><p class="msg js_msg"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',complete:r.noop,success:r.noop,error:r.noop,createError:function(t,e){return{success:!1,code:t,msg:e}},check:function(t){var e=!(!t||!t.success);return e},checkEmptyData:!1,hasData:function(t){return t.data&&t.data.length},showMoreLoading:function(){this.showMoreMsg(this.MSG_LOADING_MORE),this.$refreshing.find(".js_loading").show()},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):this.showMoreMsg(t)},showMoreMsg:function(t){var e=this.$refreshing||(this.$refreshing=i(this.refresh)).appendTo(this.$content);e.find(".js_msg").show().html(t),e.show().find(".js_loading").hide()},showError:function(t){var e=this;if(1==this.pageIndex){e.$loading&&this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var n=e.$error||(e.$error=i(e.errorTemplate).on("tap",".js_reload",i.proxy(e.reload,e)).appendTo(e.$el));"string"==typeof t&&(t={msg:t,showReload:!0});var r=n.find(".js_reload");t.showReload?r.show():r.hide(),n.find(".js_msg").html(t.msg||"加载失败"),n.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},showLoading:function(){var t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=i(t.template)),t.$loading.show().appendTo(t.$el)[0].clientHeight,t.$loading.addClass("show"),t.$refreshing&&t.$refreshing.hide()):(t.showMoreLoading(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.removeClass("show")},setHeaders:function(t,e){var n;e?(n={})[t]=e:n=t,void 0===this.headers&&(this.headers={});for(var i in n)this.headers[i]=n[i];return this},setParam:function(t,e){var n;e?(n={})[t]=e:n=t;for(var i in n)e=n[i],i==this.KEY_PAGE?this.pageIndex=e:i==this.KEY_PAGESIZE?this.pageSize=e:this.params[i]=e;return this},getParam:function(t){return t?this.params[t]:this.params},setUrl:function(t){return this.url=/^http\:\/\//.test(t)?t:this.baseUri.replace(/\/$/,"")+"/"+t.replace(/^\//,""),this},reload:function(t,e){this.isLoading||(this.pageIndex=1,this.load(t,e))},load:function(t,e){var n=this;if(!(n.beforeSend&&n.beforeSend()===!1||n.isLoading))return n.isLoading=!0,"function"==typeof t&&(e=t,t=null),n.pageEnabled&&(n.params[n.KEY_PAGE]=n.pageIndex,n.params[n.KEY_PAGESIZE]=n.pageSize),t&&void 0!==t.showLoading&&(n.isShowLoading=t.showLoading),n.isShowLoading&&n.showLoading(),n._xhr=i.ajax({url:n.url,headers:n.headers,xhrFields:n.xhrFields,data:n.params,type:n.method,dataType:n.dataType,cache:!1,error:function(t){n.isShowLoading&&n.hideLoading();var i=n.createError(10001,"网络错误");n.error(i,t),e&&e.call(n,i,t)},success:function(t,i,r){n.isShowLoading&&n.hideLoading(),!n.check||n.check(t)?(n.checkEmptyData===!1||n.hasData(t)?(1!=n.pageIndex&&n.append?n.append(t,i,r):n.success(t,i,r),n.append&&n.checkAutoRefreshing(t)):n.dataNotFound(t),e&&e.call(n,null,t)):(n.error(t,r),e&&e.call(n,t,r))},complete:function(){n._xhr=null,n.isLoading=!1,n.complete()}}),n},_refresh:function(){this.abort().load()},dataNotFound:function(){1==this.pageIndex?this.showError("暂无数据"):this.disableAutoRefreshing()},_scroll:function(t,e){var n=this;!n.isLoading&&e.height+e.y+e.height/2>=e.scrollHeight&&n._refresh()},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,n=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>n[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>n[e.KEY_PAGE]*parseInt(n[e.KEY_PAGESIZE]))?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){this.showMoreLoading("正在载入..."),this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",i.proxy(this._scroll,this)),this.el&&this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.showMoreMsg(this.MSG_NO_MORE))},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$error&&this.$error.off("tap",".js_reload",this.reload)}},a.prototype.request=a.prototype.load,a.extend=r.extend,n.exports=a});define("widget/offline",["$","core/model2"],function(t,e,n){var o,r=(t("$"),t("core/model2")),s=r.ViewModel.extend({el:'<div class="viewport offline" sn-transition-end="this._hide()">        <div class="offline_con">            <div class="ico"></div>            <div class="txt">您的网络不太顺畅哦</div>            <div class="txt_sub">请检查您的手机是否联网</div>            <div class="btn" sn-click="this.reload()">重新加载</div>        </div>    </div>',reload:function(){},initialize:function(){this.$el.appendTo("body")},show:function(t){this.$el.show()[0].clientHeight,this.$el.addClass("show"),"function"==typeof t&&(this.reload=t)},_hide:function(){!this.$el.hasClass("show")&&this.$el.hide()},hide:function(){this.$el.removeClass("show")}});s.getInstance=function(){return o||(o=new s),o},n.exports=s});define("widget/slider",["$","util","core/touch"],function(t,e,n){var i=t("$"),r=t("util"),s=t("core/touch"),o=function(t){t=i.extend({maxDuration:400,hScroll:!0,vScroll:!1,width:"100%",index:0,autoLoop:!1,align:"center",container:null},t),i.extend(this,r.pick(t,["width","loop","render","template","itemTemplate","navTemplate"]));var l,e=this,n=t.data;"string"==typeof e.itemTemplate&&(e.itemTemplate=r.template(e.itemTemplate)),"string"==typeof e.width&&(e.width=parseInt(e.width.replace("%",""))),void 0!==t.index&&(t.index=t.index),this.options=t,e.$el=i(e.template()),e.el=e.$el[0],t.container&&e.$el.appendTo(t.container),e.$slider=l=e.$el.find(".js_slider"),e.slider=l[0],e.$dots=e.$el.find(".js_slide_navs").appendTo(e.$el),this.touch=new s(e.$el,{enableVertical:t.vScroll,enableHorizontal:t.hScroll,momentum:!1}),this.touch.on("start",function(){this.maxX=e.scrollerW-e.wrapperW,this.minX=0,e.options.autoLoop&&e.stopAutoLoop()}).on("move",function(){e.slider.style.webkitTransform="translate3d("+-1*this.x+"px,"+-1*this.y+"px,0)"}).on("end bounceBack",function(n){if("end"!=n.type||!this.shouldBounceBack()){var i="bounceBack"==n.type?t.index:this.isMoveLeft&&this.x-this.startX>0?t.index+1:!this.isMoveLeft&&this.x-this.startX<0?t.index-1:t.index;e._toPage(t.loop?i:0>i?0:i>=e.length?e.length-1:i,"bounceBack"==n.type?0:250),e.options.autoLoop&&e.startAutoLoop()}}),e.set(n),t.imagelazyload&&e._loadImage(),t.arrow&&(e._prev=i('<span class="slider-pre js_pre"></span>').appendTo(e.$el),e._next=i('<span class="slider-next js_next"></span>').appendTo(e.$el),e.$el.on("tap",".js_pre",function(n){e._toPage(t.index-1,250)}).on("tap",".js_next",function(n){e._toPage(t.index+1,250)})),i(window).on("ortchange",i.proxy(e._adjustWidth,e)),t.autoLoop&&e.startAutoLoop(),e.$el.css({overflow:""})};i.extend(o.prototype,{loop:!1,x:0,itemTemplate:'<a href="<%=url%>" forward><img src="<%=src%>" /></a>',renderItem:r.template('<li class="js_slide_item slider-item"><%=$data%></li>'),template:r.template('<div class="slider"><ul class="js_slider slider-con"></ul><ol class="js_slide_navs slider-nav"></ol></div>'),_loadImage:function(){var t=this,e=t.$items.eq(t.options.index);e.prop("_detected")||(t.loop&&(1==t.options.index?e=e.add(t.$slider.children(":last-child")):t.options.index==t.length+1&&(e=e.add(t.$slider.children(":first-child")))),e.find("img[lazyload]").each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),e.prop("_detected",!0))},_adjust:function(){var t=this,e=t.$slider,n=e.children(),i=n.length;t.containerW=t.el.clientWidth,t.wrapperW=t.containerW*t.width/100,t.scrollerW=t.wrapperW*i,e.css({width:i*t.width+"%",marginLeft:"0%"}),n.css({width:100/i+"%"}),t.touch.maxX=t.scrollerW,t.touch.minX=-1*t.wrapperW},_adjustWidth:function(){var t=this;t._adjust(),t.index(t.options.index)},_change:function(){var t=this,e=t.options;e.onChange&&e.onChange.call(t,e.index),t._loadImage(),t.$dots.children().removeClass("curr").eq(e.index).addClass("curr")},_set:function(t){var r,e=this,n="",s=e.options;i.isArray(t)||(t=t?[t]:[]),e._data=t,e.length=t.length;for(var o="",a=0,l=t.length;l>a;a++)n+=e.render(t[a]),o+='<li class="slider-nav-item"></li>';r=e.$slider.html(n),e.$items=r.children(),s.dots&&(e.$dots.html(o),e.$dots.children().eq(s.index).addClass("curr")),e.length<2?e.loop=!1:e.width<30&&(e.loop=!1),e.loop&&(r.prepend(e.$items.eq(e.length-1).clone()),r.append(e.$items.eq(0).clone()),e.$items=r.children())},prepend:function(t){this._data.unshift(t),this.$slider.prepend(this.render(t)),this._adjust()},shift:function(){this._data.shift(),this.$slider.children(":first-child").remove(),this._adjust()},append:function(t){this._data.push(t),this._set(this._data)},set:function(t){this._set(t),this._adjustWidth()},startAutoLoop:function(){var t=this;t.loopTimer||(t.loopTimer=setTimeout(function(){t.index(t.options.index+1,300),t.loopTimer=setTimeout(arguments.callee,t.options.autoLoop)},t.options.autoLoop))},stopAutoLoop:function(){clearTimeout(this.loopTimer),this.loopTimer=null},_toPage:function(t,e){var n=this,i=t>this.$items.length?0:-1>t?this.$items.length-1:t,r=this.wrapperW*(this.loop?i+1:i);n.options.index=t>=n.length?0:0>t?n.length-1:t,n._change(),n.touch.scrollTo(r,0,e,function(){n.options.index!=i&&n.index(t)})},index:function(t,e){var i,n=this.options;return"undefined"==typeof t?n.index:(t=t>=this.length?0:0>t?this.length-1:t,i=this.loop?this.wrapperW*(t+1):this.wrapperW*t,t!=n.index&&(this._change(),n.index=t),void(i!=this.x&&this.touch.scrollTo(i,0,e)))},data:function(t){return this._data[t||this.options.index]},appendItem:function(){var t=i(this.renderItem(""));return this.$slider.append(t),this.length++,this._adjustWidth(),t},prependItem:function(){var t=i(this.renderItem(""));return this.$slider.prepend(t),this.length++,this._adjustWidth(),t},render:function(t){return this.renderItem(this.itemTemplate(t))},destory:function(){i(window).off("ortchange",this._adjustWidth),self.$el.off("tap"),this.touch.destory()}}),n.exports=o});define("widget/tab",["$","util","core/touch","core/model2","../widget/scroll"],function(t,e,n){var s=(t("$"),t("util"),t("core/touch")),o=t("core/model2").Model,l=(t("../widget/scroll"),o.extend({el:'<div class="cp_tab {className}"> <div class="cp_tab__head bottom_border"> <ul class="cp_tab__head_con"> <li class="cp_tab__head_item{index==i?\' curr\':\'\'}" sn-repeat="item,i in items" ref="heads" sn-tap="this.tab(i)">{item}</li> </ul> <div class="cp_tab__cursor" style="width:{cursorWidth}px;-webkit-transform:translate3d({cursorX}px,0px,0px)"></div> </div> <div class="cp_tab__body" ref="body"> <div class="cp_tab__content" style="width:{items.length*100}%" ref="content"> <div class="cp_tab__item" style="width:{100/items.length}%" sn-repeat="item,i in items" ref="items">{this.children[i]}</div> </div> </div> </div>',defaultData:{index:0,cursorX:0},initialize:function(t){var e=this;this.next(function(){this.set({cursorWidth:this.refs.heads[this.data.index].offsetWidth})}),this.on("viewDidUpdate",function(){this.wapperW=e.refs.body.offsetWidth,this.touch.maxX=e.refs.content.offsetWidth-this.wapperW}),this.touch=new s(this.refs.body,{enableVertical:!1,enableHorizontal:!0,momentum:!1}),this.touch.on("start",function(){this.minX=0}).on("move",function(){e.refs.content.style.webkitTransform="translate3d("+-1*this.x+"px,"+-1*this.y+"px,0)";var t=this.x%e.wapperW;if(0!=t){var n=this.isMoveLeft?t/e.wapperW:1-t/e.wapperW,i=e.fix(this.isMoveLeft?Math.ceil(this.x/e.wapperW):Math.floor(this.x/e.wapperW)),r=e.fix(this.isMoveLeft?Math.floor(this.x/e.wapperW):Math.ceil(this.x/e.wapperW));if(r==i)return;var s=e.refs.heads[r],o=s.offsetWidth,a=s.offsetLeft,l=e.refs.heads[i],c=l.offsetLeft;e.set({cursorX:a+(c-a)*n,cursorWidth:o+(o-l.offsetWidth)*n})}}).on("end bounceBack",function(t){if("end"!=t.type||!this.shouldBounceBack()){var n="bounceBack"==t.type?e.data.index:this.isMoveLeft&&this.x-this.startX>0?e.data.index+1:!this.isMoveLeft&&this.x-this.startX<0?e.data.index-1:e.data.index;e.tab(0>n?0:n>=e.data.items.length?e.data.items.length-1:n,"bounceBack"==t.type?0:250)}})},fix:function(t){return 0>t?0:t>=this.data.items.length?this.data.items.length-1:t},tab:function(t,e){var n=this,i=t>=this.data.items.length?0:0>t?this.data.items.length-1:t;n.touch.scrollTo(n.refs.body.offsetWidth*i,0,e,function(){n.set({index:i,cursorX:n.refs.heads[i].offsetLeft,cursorWidth:n.refs.heads[i].offsetWidth})})}}));n.exports=l});define("widget/selector",["$","util","core/touch"],function(t,e,n){var i=t("$"),r=t("util"),s=t("core/touch"),o=function(t){var e=this;i.extend(this,r.pick(t,["itemHeight","template"])),"string"==typeof this.template&&(this.template=r.template(this.template)),t=this.options=i.extend({},t);var n=t.data||[];this.$el=i(this.el),this.el=this.$el[0],this.$scroller=i('<div class="scroller_container selectorcon" style="width:100%;"></div>').appendTo(this.$el),this.scroller=this.$scroller[0],this.$content=i("<ul></ul>").appendTo(this.$scroller),this.set(n),t.value&&this.val(t.value),this.touch=new s(this.$el,{divisorY:this.itemHeight}),this.touch.on("start",function(){this.maxY=Math.max(e.scroller.offsetHeight-e.el.clientHeight,0)}).on("move",function(){var t=this;e.scroller.style.webkitTransform="translate3d("+-1*t.x+"px,"+-1*t.y+"px,0)"}).on("stop",function(){e.index(Math.round(this.y/e.itemHeight))})};o.prototype={el:'<div style="overflow:hidden"></div>',template:r.template("<li><%=text%></li>"),set:function(t){var e=this,n="";return i.each(t,function(t,i){n+=e.template(i)}),this.data=t,this.selectedData=t&&t.length?t[0]:{},this.$content.html(n),this.index(0)},itemHeight:30,_index:0,index:function(t){if("undefined"==typeof t)return this._index;if(t>=this.data.length&&(t=this.data.length-1),-1!=t&&this._index!=t){this.selectedData=this.data[t],this.options.onChange&&this.options.onChange.call(this,t,this.selectedData),this._index=t;var e=t*this.itemHeight;e!=this.y&&this.touch.scrollTo(0,e,200)}return this},val:function(t){if("undefined"==typeof t)return this.selectedData.value;var e=r.indexOf(this.data,function(e){return e.value==t});this.index(e)}};var a=function(t){t=i.extend({complete:function(){},options:[]},t);var e=this,n=i('<div style="position:fixed;top:0px;bottom:0px;left:0px;right:0px;width:100%;background: rgba(0,0,0,0);z-index:1000;display:none;overflow:hidden;"></div>').on("touchmove",!1).appendTo("body");this.$container=n,this.$mask=i('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: rgba(0,0,0,.3);z-index:999;display:none"></div>').appendTo("body"),this.$el=i('<div class="selectorwrap" style="display:none"><div class="selectorbar"><b class="js_click">完成</b></div><div class="selector"></div></div>').appendTo(n),this.$selector=this.$el.find(".selector"),this.selectors=[],n.on("tap",function(t){t.target===n[0]&&e.hide()}),i.isArray(t.options)||(t.options=[t.options]),i.each(t.options,function(t,n){e.add(n)}),this.$el.on(i.fx.transitionEnd,function(t){t.target==this&&(e._visible=e.$el.hasClass("show"),e._visible?(console.log("end"),e.each(function(){this.touch.maxY=Math.max(this.scroller.offsetHeight-this.el.clientHeight,0),this.touch.scrollTo(0,this._index*this.itemHeight)})):(e.$el.hide(),e.$container.hide()))}),this.$click=this.$el.find(".js_click").on("tap",function(){var n=[];i.each(e.selectors,function(t,e){n.push(e.selectedData)}),t.complete&&t.complete.call(e,n),e.hide()})};return a.prototype={_visible:!1,eq:function(t){return this.selectors[t]},each:function(t){i.each(this.selectors,t)},add:function(t){var e=new o(t);this.selectors.push(e),this.$selector.append(e.$el)},hide:function(){var t=this;return this._visible&&(t.$mask.animate({backgroundColor:"rgba(0,0,0,0)"},350,function(){t.$mask.hide().css({backgroundColor:"rgba(0,0,0,.3)"})}),this.$el.removeClass("show")),t},show:function(){var t=this;if(!t._visible){var e=t.$selector.find(".scroller_container").css({color:"#fff"});t.$container.show(),t.$mask.show(),t.$el.show(),e[0].clientHeight,t.$el.addClass("show"),e.animate({color:"#333"},100,"ease-out")}return t},destory:function(){this.$el.off(i.fx.transitionEnd),this.$click.off("click").off("tap"),this.$mask.remove(),this.$container.off("tap").remove()}},a});define("anim/def",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{translate:"99%,0%"},openEnterAnimationTo:{translate:"0%,0%"},openExitAnimationFrom:{translate:"0%,0%"},openExitAnimationTo:{translate:"-50%,0%"},closeEnterAnimationTo:{translate:"0%,0%"},closeEnterAnimationFrom:{translate:"-50%,0%"},closeExitAnimationFrom:{translate:"0%,0%"},closeExitAnimationTo:{translate:"100%,0%"}}}),define("anim/menu",function(){return{openEnterZIndex:1,closeEnterZIndex:2,openExitZIndex:3,closeExitZIndex:1,openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationFrom:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationTo:{translate:"0,0",scale:"1,1"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}}),define("anim/dialog",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{scale:".3,.3",opacity:0},openEnterAnimationTo:{scale:"1,1",opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{scale:"1,1",translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{scale:"1,1",opacity:1},closeExitAnimationTo:{scale:".3,.3",opacity:0}}}),define("anim/fade",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{opacity:0},openEnterAnimationTo:{opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{opacity:1},closeExitAnimationTo:{opacity:0}}});