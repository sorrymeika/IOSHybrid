define("widget/calendar",["$","util","./selector"],function(t,e,n){var r=(t("$"),t("util")),s=t("./selector"),o=function(t){var e=this;t&&t.onChange&&(this.onChange=t.onChange);var n=[],i=[],o=new Date,a=o.getFullYear();o.getMonth()+1,o.getDay();this.daysArray=[31,28,31,30,31,30,31,31,30,31,30,31];for(var u=1949;a+10>=u;u++)n.push({text:u,value:u});for(var u=1;12>=u;u++)i.push({text:u,value:u});e.selector=new s({options:[{template:"<li><%=text%></li>",data:n,onChange:function(t,n){e.year=n.value,e.dateChange()}},{template:"<li><%=text%></li>",data:i,onChange:function(t,n){e.month=n.value,e.dateChange()}},{template:"<li><%=text%></li>"}],complete:function(t){e.onChange(t[0].value+"-"+r.pad(t[1].value)+"-"+r.pad(t[2].value))}}),this.set(o)};return o.prototype.onChange=function(){},o.prototype.dateChange=function(){var t=this.year;this.daysArray[1]=t%4!=0||t%100==0&&t%400!=0?28:29;var e=this.daysArray[this.month-1];if(e!=this.days){for(var n=[],i=1;e>=i;i++)n.push({text:i,value:i});this.selector.eq(2).set(n).val(e)}},o.prototype.set=function(t){t?"number"==typeof t?t=new Date(t):"string"==typeof t&&(t=new Date(Date.parse(t))):t=new Date;var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return this.year!=e&&(this.year=e,this.selector.eq(0).val(e)),this.month!=n&&(this.month=n,this.selector.eq(1).val(n)),this.day!=i&&(this.day=i,this.selector.eq(2)),this.dateChange(),this},o.prototype.show=function(t){return this.selector.show(),this},o.prototype.hide=function(t){return this.selector.hide(),this},o});