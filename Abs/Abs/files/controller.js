define("template/index",["util","./shop/cart"],function(require){var cart=(require("util"),require("./shop/cart")),T={html:function($data){var __="";with($data||{})__+=' <header sn-display="{{isLogin}}"> <div class="head_menu" sn-display="{{bottomTab==3}}" data-forward="/settings"></div> <ul class="head_tab" sn-display="{{bottomTab==0}}"> <li class="{{tab==0?\'curr\':\'\'}}">会员卡</li> <li class="{{tab==1?\'curr\':\'\'}}">去购物</li> <i class="cursor" style="-webkit-transform: translate3d({{tab==1?100:0}}%, 0%, 0);"></i> </ul> <div class="head_title" style="display:{{bottomTab!=0?\'block\':\'none\'}}">{{bottomTab==1?\'查找店铺\':bottomTab==2?"购物车":"我"}}</div> <div class="head_msg" data-forward="/messages" sn-display="{{tab==0||bottomTab!=0}}"> <i sn-display="{{msg!=0}}">{{msg}}</i> </div> <div class="head_all" data-forward="/all" sn-display="{{tab==1&&bottomTab==0}}"> <i sn-display="{{msg!=0}}">{{msg}}</i> </div> </header> <div sn-display="{{!isLogin}}"> <div class="home_mask"></div> <div class="home_text" data-forward="/login"> <h1></h1> <h2>让回家的灯，为爱亮起来。</h2> <h3>开启时尚居家之旅</h3> <h4>LIFE STARTS HERE</h4> </div> <div class="launch"> <img src="images/launch0.jpg" /> <img src="images/launch1.jpg" class="launch_hide" /> <img src="images/launch2.jpg" class="launch_hide" /> </div> </div> <div sn-display="{{isLogin}}"> <div class="main hm_tab_con js_usescroll {{isLogin?"":"isnotlogin"}}" style="-webkit-transform:translate3d({{tab==0?0:-100}}%,0%,0);display:{{bottomTab==0?\'block\':\'none\'}}" data-index="0"> <div class="hm_chart_wrap"> <div class="hm_chart"> <div class="hm_chart_con" sn-tap="chartType=1" sn-display="{{chartType==0}}"> <div class="hd">当前活力值</div> <div class="bd">{{util.formatMoney(energyAnimNum)}}</div> <div class="ft">目标 {{util.formatMoney(levelAmounts)}}</div> </div> <div class="hm_chart_con" style="padding-top:15px" sn-tap="chartType=2" sn-display="{{chartType==1}}"> <div class="hd">我的月礼</div> <div class="bd">{{user.FreeMonths}}</div> </div> <div class="hm_chart_con" style="padding-top:15px" sn-tap="chartType=3" sn-display="{{chartType==2}}"> <div class="hd">我的卡券</div> <div class="bd">{{user.FreeCouponsCount}}</div> </div> <div class="hm_chart_con" style="padding-top:15px" sn-tap="chartType=0" sn-display="{{chartType==3}}"> <div class="hd">积分钱包</div> <div class="bd">{{user.Points}}</div> </div> <canvas class="hm_chart_canvas js_canvas"></canvas> </div> <div class="hm_chart_desc">{{currentLevel}}</div> <div class="hm_steward_link">您现在拥有<em>5</em>条爱管家记录啦！</div> <ul class="hm_chart_list"> <li data-forward="/month"><i>我的月礼</i><em>{{user.FreeMonths}}</em></li> <li data-forward="/coupon"><i>我的卡券</i><em>{{user.FreeCouponsCount}}</em></li> <li data-forward="/mypoint"><i>积分钱包</i><em>{{user.Points}}</em></li> </ul> </div> <ul class="hm_cards"> <li data-forward="/all"><i></i><p>NEW ARRIVAL</p><p>新品上市</p></li> <li data-forward="/list"><i></i><p>BEST BUYS</p><p>本周最热商品</p></li> <li data-forward="/list"><i></i><p>BIG SALE</p><p>季末特惠</p></li> <li data-forward="/list"><i></i><p>ONLINE ONLY</p><p>手机用户专享</p></li> </ul> </div> <div class="main hm_tab_con" style="-webkit-transform:translate3d({{tab==1?0:100}}%,0%,0);display:{{bottomTab==0?\'block\':\'none\'}}" data-index="1"> <div class="hm_shop"> <ul class="hm_shop_cate"> <li data-forward="/all"><i></i>新品<br>上市</li> <li><i></i>本周最热<br>商品</li> <li><i></i>季末<br>清仓</li> <li><i></i>手机用户<br>专享</li> </ul> <div class="hm_shop_banner"><img src="" /></div> <ul class="hm_shop_list"> <li class="hm_shop_list_item"> <img src="" /> <p class="price">￥99</p> <p class="name">名称</p> </li> <li class="hm_shop_list_item"> <img src="" /> <p class="price">￥99</p> <p class="name"></p> </li> </ul> </div> </div> <div class="main" style="display:{{bottomTab==1?\'block\':\'none\'}}"> <div class="baiduMap" sn-html="{{baiduMap}}"> </div> </div> <div class="main" style="display:{{bottomTab==2?\'block\':\'none\'}}"> '+cart.helpers.list()+' </div> <div class="main" style="display:{{bottomTab==3?\'block\':\'none\'}}" data-index="3"> <div class="hm_my_card"> <div class="vip_name">{{currentLevel}}</div> <div class="energy"> 当前活力值<span>{{util.formatMoney(energy)}}</span> </div> <div class="energy_bar"> <span style="width:{{energyPercent}}"></span> </div> <div class="energy_val"> <div class="energy_val_from">0</div> <div class="energy_val_to">1,000</div> </div> </div> <div class="hm_my_barcode"> <div class="barcode" sn-html="{{barcode}}"> </div> <div class="mobile">{{user.Mobile}}</div> </div> <ul class="hm_my_list"> <li data-forward="/month"> <b>我的月礼</b> <span><em>{{user.FreeMonths}}</em>个月</span> </li> <li data-forward="/coupon"> <b>我的卡券</b> <span><em>{{user.FreeCouponsCount}}</em>张</span> </li> <li data-forward="/mypoint"> <b>积分钱包</b> <span><em>{{user.Points}}</em>分</span> </li> <li data-forward="/myorder"> <b>购买记录</b> <span><em>{{user.OrderCount}}</em>条</span> </li> <li data-forward="/steward"> <b>爱管家记录</b> <span><em>{{user.OrderCount}}</em>条</span> </li> </ul> </div> <div class="main js_offline" sn-display="{{isOffline}}"> <div class="home_offline"> <div class="ico"></div> <div class="txt">您的网络不太顺畅哦</div> <div class="txt_sub">请检查您的手机是否联网</div> <div class="btn">重新加载</div> </div> </div> </div> <ul class="footer" sn-display="{{isLogin}}"> <li class="curr">首页</li> <li>附近门店</li> <li>购物车</li> <li>我</li> </ul> <div class="open_msg" style="display:none"> <div class="msg_bd" sn-html="{{message}}"></div> </div> <div class="home_tip_mask" sn-display="{{isLogin&&isFirstOpen}}"></div>';return __},helpers:{}};return T.template=T.html,T});define("views/index",["components","images/style.css","$","util","activity","bridge","../widget/loading","../widget/slider","../core/model2","../widget/scroll","../util/barcode","animation"],function(t,e,i){var n=t("$"),s=t("util"),r=t("activity"),o=t("bridge"),a=t("../widget/loading"),c=(t("../widget/slider"),t("../core/model2")),u=t("../widget/scroll"),h=t("../util/barcode"),p=t("animation");i.exports=r.extend({events:{"tap .head_tab li":function(t){this.model.set("tab",n(t.target).index())},"tap .home_tip_mask":function(t){s.store("isFirstOpen",!1),this.model.set({isFirstOpen:!1})},"tap .open_msg":function(t){n(t.target).hasClass("open_msg")&&n(t.target).removeClass("show")},"tap .js_offline .btn":function(){this.userLoading.reload()},"tap .js_comment_list [data-id]":function(t){},"tap .rainbow_bd":function(t){this.$(".footer li").eq(3).trigger("tap")},"tap .footer li":function(t){var e=this,i=n(t.currentTarget),r=i.index();i.hasClass("curr")||(i.addClass("curr").siblings(".curr").removeClass("curr"),this.model.set({bottomTab:r}),1==r&&(this.model.data.baiduMap||(this.model.set("baiduMap",'<iframe class="js_baidu_map" src="'+o.url("/baiduMap.html?v3")+'" frameborder="0" ></iframe>'),this.$baiduMap=this.$(".js_baidu_map").css({width:window.innerWidth,height:window.innerHeight-47-44-(s.isInApp?20:0)})),o.getLocation(function(t){e.$baiduMap[0].src=o.url("/baiduMap.html?v3#longitude="+t.longitude+"&latitude="+t.latitude)})))},"touchstart .hm_tab_con":function(t){var e=this;this.pointY=this.startY=t.touches[0].pageY,this.pointX=this.startX=t.touches[0].pageX,this.isTouchStop=!1,this.isTouchStart=!1,this.isTouchMoved=!1,this.x=e.model.data.tab?-window.innerWidth:0,this.x1=e.model.data.tab?0:window.innerWidth},"touchmove .hm_tab_con":function(t){var e=this,i=t.touches[0].pageX,n=t.touches[0].pageY,s=e.startX-i,r=e.startY-n;if(!e.isTouchStart){var o=Math.abs(s)>0&&Math.abs(s)>Math.abs(r);if(!o)return void(e.isTouchStop=!0);e.isTouchStart=!0,e.isDirectionX=o}var a=Math.max(-window.innerWidth,Math.min(0,this.x-s)),l=Math.max(0,Math.min(window.innerWidth,this.x1-s));e.moveX=a,e.$tabs.eq(0).css({"-webkit-transform":"translate("+a+"px,0px)","-webkit-transition":"0ms"}),e.$tabs.eq(1).css({"-webkit-transform":"translate("+l+"px,0px)","-webkit-transition":"0ms"}),this.dir=this.pointX-i>0?"left":"right",this.pointX=i,this.pointY=n,e.isTouchMoved=!0},"touchend .hm_tab_con":function(t){var e=this;if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop))return e.isTouchStop=!0,n(t.target).trigger("touchcancel"),e.$tabs.css({"-webkit-transition":"-webkit-transform 300ms ease-out 0ms"}).each(function(){this.clientHeight}),e.moveX!=this.x&&e.model.set({tab:e.model.data.tab?0:1}),!1}},className:"home",onCreate:function(){var t=this;t.user=s.store("user"),t.$tabs=t.$(".hm_tab_con"),n.get(o.url("/api/settings/update?version="+sl.appVersion),function(e){e.success&&e.updateUrl&&t.confirm(e.text,function(){o.update(e.updateUrl,e.versionName)})},"json"),this.model=new c.ViewModel(this.$el,{menu:"head_menu",titleClass:"head_title",isOffline:!1,isLogin:!!t.user,isFirstOpen:null===s.store("isFirstOpen"),msg:0,bottomTab:0,chartType:0,open:function(){o.openInApp(t.user.OpenUrl||"http://m.abs.cn")},openUrl:function(t,e){o.openInApp(e||"http://m.abs.cn")}});var e=this.$main=this.$(".main");u.bind(e),t.$open_msg=this.$(".open_msg").on(n.fx.transitionEnd,function(e){t.$open_msg.hasClass("show")||t.$open_msg.hide()}),u.bind(t.$open_msg.find(".msg_bd"));var i=this.$(".js_canvas")[0];i.width=170,i.height=170,this.canvas=i,this.context=i.getContext("2d"),this.userLoading=new a({url:"/api/user/get",check:!1,checkData:!1,$el:this.$el,success:function(e){0==e.success?503==e.error_code&&(t.user=null,t.model.set("isLogin",!1)):n.extend(t.user,e.data),s.store("user",t.user),t.model.set({isOffline:!1,user:t.user}),t.showEnergy(),t.getUnreadMsg(),e.vdpMessage&&(t.$open_msg.show(),t.$open_msg[0].clientHeight,t.$open_msg.addClass("show"),t.model.set({message:e.vdpMessage}))},error:function(){t.model.set("isOffline",!0)}}),this.launchLoading=new a({url:"/api/settings/ad_list?name=launch&type=base64",check:!1,checkData:!1,$el:n(""),success:function(t){t&&t.data&&t.data.length&&localStorage.setItem("LAUNCH_IMAGE",t.data[0].Src)}}),this.launchLoading.load();var r=this.$(".launch img"),l=this.$(".home_mask").on(n.fx.transitionEnd,function(t){if(l.hasClass("toggle")){l.removeClass("toggle");var e=r.filter(":not(.launch_hide)").addClass("launch_hide");r.eq(e.index()+1==r.length?0:e.index()+1).removeClass("launch_hide")}});setTimeout(function(){l.addClass("toggle"),setTimeout(arguments.callee,3200)},3200),t.onResult("Login",function(){t.user=s.store("user"),t.doWhenLogin()}).onResult("Logout",function(){t.model.set({isLogin:!1})})},_angleFrom:0,drawCircle:function(t){this._angleFrom||(this._angleFrom=1.5*Math.PI);var e=Math.floor(1e3*(1.5+2*t))/1e3*Math.PI,i=this.context,n=this.canvas,s=n.width/2,r=n.height/2,o=s-10;i.clearRect(0,0,n.width,n.height),i.beginPath(),i.arc(s,r,o,this._angleFrom,e,!1),i.lineWidth=19,i.strokeStyle="#fff",i.stroke()},showEnergy:function(){if(this.user){var n,r,a,t=this,e=Math.round(this.user.Amount),i=1,l=["银卡会员","金卡会员","钻石会员","VIP会员","SVIP会员","无敌会员"];t.model.set("vip",e<(a=1e3)?(n=0,r=1e3-e,l[1]):e<(a=5e3)?(n=1,r=5e3-e,l[2]):e<(a=1e4)?(n=2,r=1e4-e,l[3]):e<(a=5e4)?(n=3,r=5e4-e,l[4]):(n=4,r="0",l[5])),i=Math.min(1,e/a),t.model.set({nextLevel:r,currentLevel:l[n],levelAmounts:a,energyPercent:100*i+"%",ucCardAmounts:s.formatMoney(e)+(e>5e4?"":"/"+s.formatMoney(a))}),e!=t.model.data.energy&&(t.model.set({energy:e}),p.animate(function(n){var s=Math.round(p.step(0,e,n));t.model.set("energyAnimNum",s),t.drawCircle(p.step(0,i,n))},800,"ease-out"))}},getUnreadMsg:function(){var t=this;n.get(o.url("/api/user/get_unread_msg_count"),{UserID:t.user.ID,Auth:t.user.Auth},function(e){e.success&&t.model.set("msg",e.count)},"json")},doWhenLogin:function(){var t=this;t.model.set({barcode:h.code93(t.user.Mobile).replace(/0/g,"<em></em>").replace(/1/g,"<i></i>"),user:t.user,isLogin:!0});var e=function(e){t.userLoading.setParam({UserID:t.user.ID,Auth:t.user.Auth,IMEI:e||"CAN_NOT_GET"}).load()};s.isInApp?o.getDeviceToken(e):e(),this.getUnreadMsg()},onLoad:function(){this.user&&(this.showEnergy(),this.doWhenLogin())},onShow:function(){},onPause:function(){},onDestory:function(){}})});define("template/menu",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="menu_bd"> <div class="menu_user" sn-binding="data-back:memberUrl"> <div class="menu_username" sn-binding="display:user"> <h1> <text sn-binding="html:user.UserName|or:user.Mobile"></text> <span>编辑信息</span> </h1> <h2 sn-binding="html:user.BirthDay|date:\'yyyy/MM/dd\'"></h2> </div> <div class="menu_username" sn-binding="display:user|isFalse" style="display:none"> <div class="btn_mid">登录</div> </div> </div> <ul class="menu_list menu_my"> <li data-forward="/month">我的月礼</li> <li data-forward="/mycard">我的卡券</li> <li data-forward="/mypoint">积分钱包</li> <li data-forward="/myorder">我买到的</li> </ul> <ul class="menu_list menu_service"> <!--<li data-forward="/guide">新手指南</li>--> <li><a href="tel:4008205077">联系客服</a></li> </ul> <ul class="menu_list menu_settings"> <li data-forward="/settings">设置</li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/menu",["components","images/style.css","$","util","activity","bridge","core/model","../widget/scroll","../widget/loading"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),o=t("bridge"),a=t("core/model"),l=t("../widget/scroll");t("../widget/loading");return r.extend({toggleAnim:"menu",className:"menu",events:{tap:function(t){},"tap [data-logout]":function(t){}},swipeLeftBackAction:"/",onCreate:function(){l.bind(this.$(".menu_bd")),o.hasStatusBar&&this.$el.find(".fix_statusbar").addClass("fix_statusbar"),this.model=new a.ViewModel(this.$el,{}),this.onShow()},onShow:function(){var e=s.store("user");e?(this.user=e,this.model.set({memberUrl:"/member",logoutOrLogin:"退出",user:e})):this.model.set({memberUrl:"/login",logoutOrLogin:"登录",user:null})},onDestory:function(){}})});define("views/about",["components","images/style.css","$","util","activity","../core/model","../widget/scroll","animation"],function(t,e,i){var r=(t("$"),t("util"),t("activity")),o=t("../core/model"),a=t("../widget/scroll");t("animation");return r.extend({events:{},swipeRightBackAction:"/settings",onCreate:function(){var e=this.$(".main");a.bind(e),this.model=new o.ViewModel(this.$el,{back:"/settings",title:"隐私政策"})},onShow:function(){},onDestory:function(){}})});define("template/member",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <div class="main scrollview"> <div class="member"> <dl class="member_info"> <dt>登录名</dt> <dd><p sn-binding="html:user.Mobile"></p></dd> <dt>姓名</dt> <dd><input sn-binding="value:user.UserName" sn-model="user.UserName" /></dd> <dt>性别：</dt> <dd> <span class="radio" sn-model="user.Gender" value="1" sn-binding="class:user.Gender|case:\'1\':\'checked\':\'\'">男</span> <span class="radio" sn-model="user.Gender" value="2" sn-binding="class:user.Gender|case:\'2\':\'checked\':\'\'">女</span> </dd> <dt>生日</dt> <dd><input type="text" sn-binding="value:user.BirthDay|date:\'yyyy/MM/dd\'" sn-model="user.BirthDay" /></dd> <dt>所在地</dt> <dd sn-on="tap:showCity"><p sn-binding="html:user.City"></p></dd> <dt>家庭人数</dt> <dd><input sn-binding="value:user.FamilySize" sn-model="user.FamilySize" /></dd> <dt>是否有小孩：</dt> <dd> <span class="radio" sn-model="user.HasChild" value="1" sn-binding="class:user.HasChild|equal:true:\'checked\':\'\'">是</span> <span class="radio" sn-model="user.HasChild" value="0" sn-binding="class:user.HasChild|equal:false:\'checked\':\'\'">否</span> </dd> <dt>小孩生日</dt> <dd><input type="text" sn-binding="value:user.ChildBirthDay" sn-model="user.ChildBirthDay" /></dd> </dl> <div class="member_bar"> <b class="btn_mid" sn-on="tap:submit" sn-binding="class:submiting|equal:true:\'disabled\':\'\'">修改</b> </div> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/member",["components","images/style.css","$","util","activity","core/model","../widget/scroll","bridge","../widget/loading","../widget/selector"],function(t,e,i){var n=t("$"),s=t("util"),r=t("activity"),o=t("core/model"),l=(t("../widget/scroll"),t("bridge")),c=t("../widget/loading"),u=t("../widget/selector");return r.extend({events:{"tap .radio":function(t){var e=n(t.currentTarget),i=t.currentTarget.getAttribute("value");this.model.set(e.attr("sn-model"),i)}},onCreate:function(){var t=this;t.swipeRightBackAction=this.route.query.from||"/settings",this.model=new o.ViewModel(this.$el,{title:"个人信息",back:t.swipeRightBackAction,showCity:function(){var i=s.indexOf(t.provinceList,function(e){return e.PRV_ID==t.model.data.user.ProvID});-1!=i&&(t.city.eq(0).index(i),e(t.model.data.user.ProvID)),t.city.show()},submit:function(){this.set("submiting",!0);var e=this.data.user;t.update.setParam({ID:e.ID,Auth:e.Auth,UserName:e.UserName,Gender:e.Gender,BirthDay:e.BirthDay&&s.formatDate(e.BirthDay),ChildBirthDay:e.ChildBirthDay&&s.formatDate(e.ChildBirthDay),CityID:e.CityID,FamilySize:e.FamilySize,HasChild:e.HasChild}).load()}}),this.update=new c({url:"/api/user/update",check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(s.store("user",t.model.data.user),sl.tip("修改成功")):sl.tip(e.msg),t.model.set("submiting",!1)}}),this.city=new u({options:[{template:"<li><%=PRV_DESC%></li>",data:[],onChange:function(t,i,n){e(n.PRV_ID)}},{template:"<li><%=CTY_DESC%></li>",data:[]}],complete:function(e){t.model.set("user.City",e[1].CTY_DESC),t.model.set("user.CityID",e[1].CTY_ID),t.model.set("user.ProvID",e[1].CTY_PRV_ID)}});var e=function(e){var i=s.find(t.cityList,function(t){return t.CTY_PRV_ID==e});if(i.unshift({CTY_PRV_ID:e,CTY_ID:0,CTY_DESC:"请选择"}),t.city.eq(1).set(i),t.model.data.user){var n=s.indexOf(i,function(e){return e.CTY_ID==t.model.data.user.CityID});-1!=n&&t.city.eq(1).index(n)}};n.get(l.url("/api/user/get_city"),function(i){i.province.unshift({PRV_ID:0,PRV_DESC:"请选择"}),t.city.eq(0).set(i.province),t.provinceList=i.province,t.cityList=i.data,e(i.province[0].PRV_ID)},"json")},onShow:function(){var t=this,e=s.store("user");e?(t.user=e,this.loading=new c({url:"/api/user/get",check:!1,checkData:!1,params:{UserID:e.ID,Auth:e.Auth},$el:this.$el,success:function(i){t.user=e=n.extend(e,i.data),s.store("user",e),t.model.set({user:e,"NickName.input":e.NickName,"Address.input":e.Address})}}),this.loading.load()):this.forward("/login")},onDestory:function(){}})});define("template/settings",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <ul class="uc_settings"> <li data-forward="/member">账户信息</li> <li data-forward="/modifypwd">修改密码</li> <li data-forward="/address?from=/settings">收货地址</li> <li data-forward="/guide?from=/settings">隐私政策</li> <li sn-tap="logout">退出登录</li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/settings",["components","images/style.css","$","util","activity","../widget/loading","../core/model2","../widget/scroll","animation"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),a=(t("../widget/loading"),t("../core/model2")),l=t("../widget/scroll");t("animation");return r.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var t=this,e=this.$(".main");l.bind(e),t.swipeRightBackAction=t.route.query.from||"/";var i=s.store("user");this.model=new a.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"设置",user:i,logout:function(){t.confirm("你确认要退出登录?",function(){localStorage.getItem("user")?(s.store("user",null),t.setResult("Logout"),t.back("/")):t.forward("/login")})}})},onShow:function(){},onDestory:function(){}})});define("template/login",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<header> <div sn-binding="html:title" class="head_title"></div> <div class="head_back" sn-binding="data-back:back"></div> </header> <div class="main"> <div class="login_form"> <h1 class="login_hd">注册/登录</h1> <ul class="form"> <li class="form_mobile"><input placeholder="请输入您的手机号码" sn-model="mobile" type="tel" /></li> <li><input placeholder="请输入短信验证码" sn-model="smsCode" type="tel" /><b class="js_valid btn_middle" sn-binding="html:valid"></b></li> <li><input placeholder="请输入好友的邀请码" sn-model="invitedCode" type="tel" /></li> </ul> <div class="login_btn"><b class="btn_large js_login">手机号登录</b> </div> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/login",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation"],function(t,e,i){var n=t("$"),s=t("util"),r=t("activity"),o=t("../widget/loading"),a=t("../core/model"),l=t("../widget/scroll");t("animation");return r.extend({events:{"tap .js_login:not(.disabled)":function(){var t=this.model.get("mobile"),e=this.model.get("smsCode");return t&&s.validateMobile(t)?e?void this.loading.setParam({mobile:t,smsCode:e,invitedCode:this.model.data.invitedCode}).load():void sl.tip("请输入密码"):void sl.tip("请输入正确的手机")},"tap .js_valid:not(.disabled)":function(t){var e=this.model.get("mobile");return e&&s.validateMobile(e)?(this.$valid.addClass("disabled"),this.valid.setParam({mobile:this.model.data.mobile}),void this.valid.load()):void sl.tip("请输入正确的手机")}},swipeRightBackAction:"/",validTimeout:function(){var t=this,e=localStorage.getItem("valid_time");if(e&&parseInt(e)>60){if(e=Math.round((new Date(parseInt(e)).getTime()-Date.now())/1e3),0>=e)return;t.$valid.addClass("disabled"),setTimeout(function(){0>=e?(t.$valid.removeClass("disabled"),t.model.set("valid","获取验证码"),localStorage.removeItem("valid_time")):(t.model.set("valid",e+"秒后再次获取"),e--,setTimeout(arguments.callee,1e3))},1e3)}},onCreate:function(){var t=this,e=this.$(".main");l.bind(e),this.model=new a.ViewModel(this.$el,{title:"快速登录 / 注册",valid:"获取验证码",back:this.route.query.from||"/"}),this.getUser=new o({url:"/api/user/get",check:!1,checkData:!1,$el:this.$el,success:function(){}}),this.loading=new o({url:"/api/user/login",method:"POST",check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(s.store("user",e.data),t.getUser.setParam({UserID:e.data.UserID,Auth:e.data.Auth}).load(function(i,r){r&&s.store("user",n.extend(e.data,r.data)),t.setResult("Login"),t.back(t.route.query.success||"/")})):sl.tip(e.msg)},error:function(t){sl.tip(t.msg)}}),this.valid=new o({url:"/api/user/send_sms",method:"POST",params:{mobile:t.model.data.mobile},check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(localStorage.setItem("valid_time",Date.now()+6e4),t.validTimeout()):sl.tip(e.msg)},error:function(e){sl.tip(e.msg),t.$valid.removeClass("disabled"),this.hideLoading()}}),t.$valid=this.$(".js_valid"),t.validTimeout()},onShow:function(){},onDestory:function(){}})});define("template/user/month",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main uc_month"> <div sn-display="{{user.FreeMonths}}"> <div class="uc_month_card"> <div class="uc_month_card_user"> <b>{{currentLevel}}</b> <span>({{ucCardAmounts}})</span> <p> 亲，不要忘记啦！<br /> 您还有<em>{{user.FreeMonths}}</em>个月的会员礼可以领取哟！ </p> </div> <div class="uc_month_val"> <b>我的月礼</b> <span>({{user.FreeMonths}}/{{user.TotalMonths}})</span> </div> </div> <div class="uc_months_slider"> <ul class="uc_month_slider_tit"> <li>2014</li> <li class="curr">2015</li> <li>2016</li> </ul> <div class="uc_month_slider"> <ul> <li class="uc_month_item"> <p class="img canget"> <img src="{{item.FRE_TITLE_PIC}}" /> </p> <span>10月</span> </li> <li class="uc_month_item"> <p class="img disable"> <img src="{{item.FRE_TITLE_PIC}}" /> </p> <span>10月</span> </li> </ul> </div> </div> </div> <div class="my_nodata" sn-display="{{!user.FreeMonths}}" style="display:none"> <div class="icon"></div> <div class="text">您目前还没有免费领取特权哦！</div> <div class="btn" sn-tap="open">去逛逛吧</div> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/user/month",["components","images/style.css","$","util","activity","widget/loading","core/model2","core/promise","widget/scroll","animation","bridge"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),o=t("widget/loading"),a=t("core/model2"),l=t("core/promise"),c=t("widget/scroll"),h=(t("animation"),t("bridge"));return r.extend({events:{"tap .js_comment":function(){this.forward("/destcomment/"+this.route.data.id)}},swipeRightBackAction:"/",onCreate:function(){var t=this;this.promise=new l,this.$main=this.$(".main"),c.bind(this.$main),this.model=new a.ViewModel(this.$el,{title:"我的月礼",back:this.route.query.from||"/",user:s.store("user"),openPresent:function(e,i){if(i.data.CanGet){var n="";t.user.OpenUrl&&(n=t.user.OpenUrl.substr(t.user.OpenUrl.lastIndexOf("?"))),h.openInApp("http://m.abs.cn/free/"+i.data.FRE_ID+".html"+n)}},open:function(){h.openInApp(t.user.OpenUrl||"http://m.abs.cn")}}),this.loading=new o({url:"/api/user/get_month_free",params:{id:this.route.data.id},check:!1,checkData:!1,$el:this.$el,$content:this.$main.children(":first-child"),$scroll:this.$main,success:function(e){t.model.set({currentMonth:e.currentMonth,data:e.data})}})},onShow:function(){var t=this;if(t.user=this.model.data.user||s.store("user"),t.user){t.model.set({user:t.user});var n,r,a,t=this,e=Math.round(this.user.Amount),i=1,l=["银卡会员","金卡会员","钻石会员","VIP会员","SVIP会员","无敌会员"];t.model.set("vip",e<(a=1e3)?(n=0,r=1e3-e,l[1]):e<(a=5e3)?(n=1,r=5e3-e,l[2]):e<(a=1e4)?(n=2,r=1e4-e,l[3]):e<(a=5e4)?(n=3,r=5e4-e,l[4]):(n=4,r="0",l[5])),i=Math.min(1,e/a),t.model.set({energy:e,nextLevel:r,currentLevel:l[n],levelAmounts:a,energyPercent:100*i+"%",ucCardAmounts:s.formatMoney(e)+(e>5e4?"":"/"+s.formatMoney(a))}),!t.isLoad&&(t.isLoad=!0)&&t.loading.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load()}else t.forward("/login?success="+this.route.url+"&from=/")},onDestory:function(){}})});define("template/user/coupon",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main uc_coupon"> <div class="uc_coupon_help">使用规则</div> <div class="uc_coupon_get"> <input type="text" placeholder="请输入券码" /> <b class="btn">我要领券</b> </div> <ul class="uc_coupon_hd"> <li class="{{isOverdue?\'\':\'curr\'}}" sn-tap="isOverdue=false">优惠券</li> <li class="{{isOverdue?\'curr\':\'\'}}" sn-tap="isOverdue=true">免邮卡</li> </ul> <ul class="uc_coupon_list js_not_overdue" sn-display="{{!isOverdue}}"> <li sn-repeat="item in data" class="{{(item.VCA_VCT_ID == 4 ? \'free\' : item.VCA_VCT_ID == 2 ? \'vct2\' : item.VCA_VCT_ID == 5 ? \'vct5\' : \'\') + (item.IsOverdue ? \' dis\' : \'\')}}"> <div class="price">{{util.currency(item.VCA_DEDUCT_AMOUNT,\'\')}}</div> <div class="name">{{item.VCA_VCT_ID==4?\'免邮卡\':item.VCA_NAME}}</div> <div class="time">有效期:{{item.IsOverdue?\'已过期\':(util.formatDate(item.CSV_START_DT,\'yyyy/MM/dd\')+\'-\'+util.formatDate(item.CSV_END_DT,\'yyyy/MM/dd\'))}}</div> <div class="share"> <i>分享</i> </div> </li> </ul> <ul class="uc_coupon_list js_overdue" sn-display="{{isOverdue}}"> <li sn-repeat="item in data1" class="{{(item.VCA_VCT_ID == 4 ? \'free\' : item.VCA_VCT_ID == 2 ? \'price10\' : item.VCA_VCT_ID == 1 ? \'price50\' : \'\') + (item.IsOverdue ? \' dis\' : \'\')}}"> <div class="price">{{util.currency(item.VCA_DEDUCT_AMOUNT,\'\')}}</div> <div class="name">{{item.VCA_VCT_ID==4?\'免邮卡\':item.VCA_NAME}}</div> <div class="time">有效期:{{util.formatDate(item.CSV_START_DT,\'yyyy/MM/dd\')}}-{{util.formatDate(item.CSV_END_DT,\'yyyy/MM/dd\')}}</div> <div class="share"> <i>分享</i> </div> </li> </ul> <div class="my_nodata" sn-display="{{isOverdue&&!data1.length||!isOverdue&&!data.length}}"> <div class="icon"></div> <div class="text">您目前还没有卡券哦</div> <div class="btn" sn-tap="open">去逛逛吧</div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/user/coupon",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation","bridge"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),o=t("widget/loading"),a=t("core/model2"),l=t("widget/scroll"),u=(t("animation"),t("bridge")),h=function(t){if(console.log(t),!t.eq(0).hasClass("show")&&t.length){var e=t.length,i=e-1;t.parent().css({height:100*e}),t.each(function(t,e){e.style.zIndex=t}),setTimeout(function(){var e=arguments.callee,n=t.eq(i);n[0].clientHeight,n.addClass("show"),setTimeout(function(t){return function(){n.animate({opacity:1,translate:"0px,"+100*t+"px"},450*t,"ease-out"),i--,i>=0&&e()}}(i),300)},200)}};return r.extend({events:{},swipeRightBackAction:"/",onCreate:function(){var t=this,e=this.$(".main");l.bind(e),a.Filters.cardClass=function(t){return(4==t.VCA_VCT_ID?"free":2==t.VCA_VCT_ID?"price10":1==t.VCA_VCT_ID?"price50":"")+(t.IsOverdue?" dis":"")},this.model=new a.ViewModel(this.$el,{back:"/",title:"我的卡券",isOverdue:!1,open:function(){u.openInApp(t.user.OpenUrl||"http://m.abs.cn")}}),t.loading=new o({url:"/api/user/voucher_list",params:{status:1},$el:this.$el,check:!1,checkData:!1,success:function(e){if(e.closeNumber&&t.confirm("您有"+e.closeNumber+"张优惠券马上就要过期啦，<br>尽快使用哦",function(){}),e&&e.data&&0!=e.data.length){var i=s.find(e.data,function(t){return 4!=t.VCA_VCT_ID});i.sort(function(t,e){return t.IsOverdue&&!e.IsOverdue?1:!t.IsOverdue&&e.IsOverdue?-1:t.CSV_END_DT>e.CSV_END_DT?1:t.CSV_END_DT==e.CSV_END_DT?0:-1}),t.model.set("data",i);var n=s.find(e.data,function(t){return 4==t.VCA_VCT_ID});n.sort(function(t,e){return t.IsOverdue&&!e.IsOverdue?1:!t.IsOverdue&&e.IsOverdue?-1:t.CSV_END_DT>e.CSV_END_DT?1:t.CSV_END_DT==e.CSV_END_DT?0:-1}),t.model.set("data1",n),t.showItemsWithAnim()}else t.model.set("data",[]),t.model.set("data1",[]);t.model.set("data1",[{VCA_VCT_ID:4,VCA_DEDUCT_AMOUNT:20,VCA_NAME:"asdf"}]),t.showItemsWithAnim()}}),t.model.on("change:isOverdue",function(){t.model.data.isOverdue&&t.showItemsWithAnim()}),t.user=s.store("user")},showItemsWithAnim:function(){var t=this,e=t.$(t.model.data.isOverdue?".js_overdue":".js_not_overdue").children("li");h(e)},onShow:function(){var t=this;t.user=s.store("user"),t.user?!t.isLoad&&(t.isLoad=!0)&&t.loading.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load():t.forward("/login?success="+this.route.url+"&from=/")},onDestory:function(){}})});define("template/user/address",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main uc_address"> <div class="uc_address_new js_add_address">添加新地址</div> <ul class="uc_address_con"> <li class="default"> <p class="hd"><span class="name">姓名</span><span class="mobi">12345678888</span></p> <p class="con">上海市浦东新区XXX街道浦东大道2000号阳光世界大厦3楼</p> </li> <li class="curr default"> <p class="hd"><span class="name">姓名</span><span class="mobi">12345678888</span></p> <p class="con">上海市浦东新区XXX街道浦东大道2000号阳光世界大厦3楼</p> </li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/user/address",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var r=(t("$"),t("util"),t("activity")),a=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");i.exports=r.extend({events:{"tap .js_bind:not(.disabled)":function(){},"tap .js_add_address":function(){this.forward("/addaddress?from="+encodeURIComponent(this.route.url))}},onCreate:function(){var t=this,e=t.$(".main");t.swipeRightBackAction=t.route.query.from||"/",l.bind(e),t.model=new a.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"收获地址"})},onShow:function(){},onDestory:function(){}})});define("template/user/addaddress",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <div class="uc_addaddress"> <ul> <li><input type="text" placeholder="收货人姓名" /></li> <li><input type="tel" placeholder="手机号码" /></li> <li><input type="tel" placeholder="邮政编码" /></li> <li class="js_area">省、市、区</li> <li><input type="text" placeholder="详细地址"></li> <li class="set_default checked">设为默认地址</li> </ul> <b class="btn">保&nbsp;&nbsp;存</b> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/user/addaddress",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","widget/selector","animation"],function(t,e,i){var r=(t("$"),t("util"),t("activity")),a=(t("widget/loading"),t("core/model2")),l=t("widget/scroll"),c=t("widget/selector");t("animation");i.exports=r.extend({events:{"tap .js_bind:not(.disabled)":function(){},"tap .js_area":function(){this.selector.show()}},onCreate:function(){var t=this,e=t.$(".main");t.swipeRightBackAction=t.route.query.from||"/address",l.bind(e),t.model=new a.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"添加地址"}),t.selector=new c({options:[{template:"<li><%=name%></li>",onChange:function(t,e,i){}},{template:"<li><%=name%></li>"}],complete:function(t){console.log(t)}}),t.selector.eq(0).set([{name:"省"}])},onShow:function(){},onDestory:function(){}})});define("template/user/modifypwd",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <div class="uc_pwd"> <dl class="uc_pwd_con"> <dt>原密码</dt> <dd> <input type="password" placeholder="请输入您的密码"> </dd> <dt>新密码</dt> <dd> <input type="password" placeholder="请输入您的新密码"> </dd> <dt>确认密码</dt> <dd> <input type="password" placeholder="请再次输入您的新密码"> </dd> </dl> <div class="action"><b class="btn">确&nbsp;认</b></div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/user/modifypwd",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var r=(t("$"),t("util"),t("activity")),a=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");i.exports=r.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var t=this,e=t.$(".main");t.swipeRightBackAction=t.route.query.from||"/settings",l.bind(e),t.model=new a.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"修改密码"})},onShow:function(){},onDestory:function(){}})});define("template/mycard",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <ul class="mycard_hd"> <li sn-binding="class:isOverdue|equal:false:\'curr\':\'\'" sn-on="tap:isOverdue=false">优惠券</li> <li sn-binding="class:isOverdue|equal:false:\'\':\'curr\'" sn-on="tap:isOverdue=true">免邮卡</li> </ul> <div class="main mycard"> <ul class="mycard_con js_not_overdue" sn-binding="display:isOverdue|not"> <!-- <li class="free"> <div class="name">免邮券</div> <div class="time"><div class="hd">有效期</div><div class="con">2015/07/30</div></div> </li>--> <li sn-repeat="item in data" sn-binding="class:item|cardClass"> <div class="price" sn-binding="html:item.VCA_DEDUCT_AMOUNT|currency,display:item.VCA_VCT_ID|equal:4|not"></div> <div class="name" sn-binding="html:item.VCA_VCT_ID|equal:4:\'免邮卡\':item.VCA_NAME"><!--单笔订单满300可用--></div> <div class="time"><div class="hd">有效期</div><div class="con" sn-binding="html:item.CSV_START_DT|date:\'yyyy/MM/dd\'|concat:\'至\',display:item.IsOverdue|not"></div><div class="con" sn-binding="html:item.CSV_END_DT|date:\'yyyy/MM/dd\',display:item.IsOverdue|not"></div><div class="overdue" sn-binding="display:item.IsOverdue" style="display:none">已过期</div></div> </li> </ul> <ul class="mycard_con js_overdue" sn-binding="display:isOverdue"> <li sn-repeat="item in data1" class="free" sn-binding="class:item.IsOverdue|equal:true:\'dis\':\'\'"> <div class="price" sn-binding="html:item.VCA_DEDUCT_AMOUNT|currency,display:item.VCA_VCT_ID|equal:4|not"></div> <div class="name" sn-binding="html:item.VCA_VCT_ID|equal:4:\'免邮卡\':item.VCA_NAME"><!--单笔订单满300可用--></div> <div class="time"><div class="hd">有效期</div><div class="con" sn-binding="html:item.CSV_START_DT|date:\'yyyy/MM/dd\'|concat:\'至\',display:item.IsOverdue|not"></div><div class="con" sn-binding="html:item.CSV_END_DT|date:\'yyyy/MM/dd\',display:item.IsOverdue|not"></div><div class="overdue" sn-binding="display:item.IsOverdue" style="display:none">已过期</div></div> </li> </ul> <div class="my_nodata" sn-binding="display:data|eval:\'$1?!$2.length:!$0.length\':isOverdue:data1" style="display:none"> <div class="icon"></div> <div class="text">您目前还没有卡券哦</div> <div class="btn" sn-on="tap:open">去逛逛吧</div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/mycard",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation","bridge"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),a=t("../widget/loading"),o=t("../core/model"),l=t("../widget/scroll"),u=(t("animation"),t("bridge")),d=function(t){if(!t.eq(0).hasClass("show")&&t.length){var e=t.length,i=e-1;t.parent().css({height:100*e}),t.each(function(t,e){e.style.zIndex=t}),setTimeout(function(){var e=arguments.callee,n=t.eq(i);n[0].clientHeight,n.addClass("show"),setTimeout(function(t){return function(){n.animate({opacity:1,translate:"0px,"+100*t+"px"},450*t,"ease-out"),i--,i>=0&&e()}}(i),300)},200)}};return r.extend({events:{},swipeRightBackAction:"/",onCreate:function(){var t=this,e=this.$(".main");l.bind(e),o.Filter.cardClass=function(t){return(4==t.VCA_VCT_ID?"free":2==t.VCA_VCT_ID?"price10":1==t.VCA_VCT_ID?"price50":"")+(t.IsOverdue?" dis":"")},this.model=new o.ViewModel(this.$el,{back:"/",title:"我的卡券",isOverdue:!1,open:function(){u.openInApp(t.user.OpenUrl||"http://m.abs.cn")}}),t.loading=new a({url:"/api/user/voucher_list",params:{status:1},$el:this.$el,check:!1,checkData:!1,success:function(e){if(e.closeNumber&&t.confirm("您有"+e.closeNumber+"张优惠券马上就要过期啦，<br>尽快使用哦",function(){}),t.model.set({test:[{data:e.data}]}),e&&e.data&&0!=e.data.length){var i=s.find(e.data,function(t){return 4!=t.VCA_VCT_ID});i.sort(function(t,e){return t.IsOverdue&&!e.IsOverdue?1:!t.IsOverdue&&e.IsOverdue?-1:t.CSV_END_DT>e.CSV_END_DT?1:t.CSV_END_DT==e.CSV_END_DT?0:-1}),t.model.set("data",i);var n=s.find(e.data,function(t){return 4==t.VCA_VCT_ID});n.sort(function(t,e){return t.IsOverdue&&!e.IsOverdue?1:!t.IsOverdue&&e.IsOverdue?-1:t.CSV_END_DT>e.CSV_END_DT?1:t.CSV_END_DT==e.CSV_END_DT?0:-1}),t.model.set("data1",n);var r=t.$(".js_not_overdue").children("li");d(r)}else t.model.set("data",[]),t.model.set("data1",[])}}),t.model.on("change:isOverdue",function(){if(t.model.data.isOverdue){var e=t.$(".js_overdue").children("li");d(e)}}),t.user=s.store("user")},onShow:function(){var t=this;t.user=s.store("user"),t.user?!t.isLoad&&(t.isLoad=!0)&&t.loading.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load():t.forward("/login?success="+this.route.url+"&from=/")},onDestory:function(){}})});define("template/messages",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <div class="main message_center"> <div class="message_card" sn-repeat="item in data"> <div class="hd"> <h2 sn-binding="html:item.MSG_TITLE"></h2> <h3 sn-binding="html:item.MSG_DT|date:\'yyyy.MM.dd\'"></h3> </div> <div class="bd" sn-binding="html:item.MSG_CONTENT"></div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/messages",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),a=t("../widget/loading"),o=t("../core/model"),l=t("../widget/scroll");t("animation");return r.extend({events:{},onCreate:function(){var t=this,e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/",title:"消息中心"}),this.loading=new a({url:"/api/user/get_msg",$el:this.$el,checkData:!1,success:function(e){e.data||this.showError("暂无消息"),t.model.set("data",e.data)},append:function(e){t.model.get("data").append(e.data)}})},onShow:function(){var t=this;t.user=s.store("user"),t.user?t.loading.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load():t.forward("/login?success="+this.route.url+"&from=/")},onDestory:function(){}})});define("template/mypoint",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <div class="main mypoint"> <div sn-binding="display:points|equal:0|not"> <div class="curr">当前积分：<b sn-binding="html:points"></b></div> <div class="notice">*您的积分可以直接抵扣现金使用。<span>（100积分＝1元）</span></div> <div class="hd">积分记录</div> <ul class="mypoint_list"> <li sn-repeat="item in data"> <p class="from" sn-binding="html:item.HPT_PIT_ID|equal:1:item.CNL_DESC:item.POT_DESC"></p> <p class="date" sn-binding="html:item.HPT_DT|date:\'yyyy.MM.dd\'"></p> <p class="points" sn-binding="html:item.HPT_POINT_AMOUNT|round|eval:\'$0>0?\\\'+\\\'+$0:$0\',class:item.HPT_POINT_AMOUNT|lt:0|equal:true:\'minus\':\'\'"></p> </li> </ul> </div> <div class="my_nodata" sn-binding="display:points|equal:0" style="display:none"> <div class="icon"></div> <div class="text">您目前还没有积分记录哦</div> <div class="btn" sn-on="tap:open">去逛逛吧</div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/mypoint",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation","bridge"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),a=t("../widget/loading"),o=t("../core/model"),l=t("../widget/scroll"),u=(t("animation"),t("bridge"));return r.extend({events:{},swipeRightBackAction:"/",onCreate:function(){var t=this,e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/",title:"我的积分",open:function(){u.openInApp(t.user.OpenUrl||"http://m.abs.cn")}})},onShow:function(){var t=this,t=this,e=s.store("user");e?(t.user=e,this.loading=new a({url:"/api/user/get_points",check:!1,checkData:!1,params:{UserID:e.ID,Auth:e.Auth},$el:this.$el,success:function(e){t.model.set(e)}}),this.loading.load()):this.forward("/login")},onDestory:function(){}})});define("template/myorder",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <ul class="myorder_hd" sn-binding="display:data|eval:\'$0&&$0.length||($1!=0)\':\'currentType\'"> <li class="curr" sn-on="tap:select:0">全部</li> <li sn-on="tap:select:1">待付款</li> <li sn-on="tap:select:2">待发货</li> <li sn-on="tap:select:3">配送中</li> <li sn-on="tap:select:4">已完成</li> </ul> <div class="main myorder"> <ul class="con" sn-binding="display:data"> <li sn-repeat="item in data" sn-binding="class:item.CNL_CLT_ID|format:\'type{0}\'" sn-on="tap:openOrder:item"> <div class="hd" sn-binding="data-id:item.PUS_ID"><b class="from" sn-binding="html:item.CNL_DESC"></b><span class="status" sn-binding="html:item.PUS_DESC"></span></div> <div class="info" sn-on="tap:openOrder:item"> <span sn-binding="html:item.PUR_CODE|format:\'订单号：{0}\'"></span> <span sn-binding="html:item.PUR_DT|date"></span> </div> <div class="bd" sn-repeat="prd in item.Children" sn-on="tap:openPrd:prd:item"> <img sn-binding="src:prd.WPP_LIST_PIC|or:\'images/default.jpg\'" src="images/default.jpg" onerror="this.src=\'images/default.jpg\'" /> <div class="con"> <h2 sn-binding="html:prd.PRD_NAME"></h2> <h3>颜色：<span sn-binding="html:prd.PRD_COLOR"></span></h3> <h4>尺寸：<span sn-binding="html:prd.PRD_SPEC"></span></h4> </div> <p class="priceinfo"> <span class="price" sn-binding="html:prd.PRD_MEMBER_PRICE|currency:\'￥\'"></span> <span class="qty" sn-binding="html:prd.LPK_QTY|format:\'x{0}\'"></span> </p> </div> <div class="ft"> 总价：<span sn-binding="html:item.PUR_AMOUNT|currency:\'￥\'"></span> <b class="btn_sml" sn-binding="display:item.XPU_EXPRESS_CODE|equal:null|not" sn-on="tap:showExpress:item">查看物流</b> </div> <div class="express" sn-binding="display:item.showExpress" style="display:none"> <div class="express_con"> <p>物流公司：<span sn-binding="html:item.EXP_NAME"></span></p> <p>运单号码：<span sn-binding="html:item.XPU_EXPRESS_CODE"></span></p> <p>如需跟踪物流详情 请复制运单号前往<span sn-binding="html:item.EXP_NAME"></span>官方网站查询</p> </div> </div> </li> </ul> <div class="my_nodata" sn-binding="display:data|eval:\'$1==0&&(!$0||!$0.length)\':currentType" style="display:none"> <div class="icon"></div> <div class="text">您目前还没有购物记录哦</div> <div class="btn" sn-on="tap:open">去逛逛吧</div> </div> <div class="my_nodata" sn-binding="display:data|eval:\'$1!=0&&(!$0||!$0.length)\':currentType" style="display:none"> <div class="icon"></div> <div class="text">您还没有相关的订单</div> <div class="btn" sn-on="tap:open">去逛逛吧</div> </div> </div> <div class="open_msg" style="display:none"> <div class="msg_bd msg_alert"> 这款产品已经售罄喽 <div class="btn_go">随便逛逛</div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/myorder",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation","bridge"],function(t,e,i){var n=t("$"),s=t("util"),r=t("activity"),a=t("../widget/loading"),o=t("../core/model"),l=t("../widget/scroll"),u=(t("animation"),t("bridge"));return r.extend({events:{"tap .open_msg":function(t){n(t.target).hasClass("open_msg")&&n(t.target).removeClass("show")},"tap .btn_go":function(){u.openInApp(this.user.OpenUrl)}},swipeRightBackAction:"/",onCreate:function(){var t=this,e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/",title:"我买到的",currentType:0,select:function(e,i){n(e.currentTarget).hasClass("curr")||(n(e.currentTarget).addClass("curr").siblings(".curr").removeClass("curr"),t.loading.setParam(0==i?{status:0,payStatus:0}:1==i?{status:0,payStatus:3}:2==i?{status:18,payStatus:0}:3==i?{status:19,payStatus:0}:{status:8,payStatus:0}).reload(),t.model.set("currentType",i))},open:function(){u.openInApp(t.user.OpenUrl||"http://m.abs.cn")},openOrder:function(e,i){if("待付款"==i.data.PUS_DESC){var n="";n=t.user.OpenUrl?t.user.OpenUrl.substr(t.user.OpenUrl.lastIndexOf("?"))+"&from=native":"?from=native",u.openInApp("http://m.abs.cn/pay/"+i.data.PUR_ID+".html"+n)}},openPrd:function(e,i,n){e.stopPropagation(),"待付款"!=n.data.PUS_DESC||"IMG"==e.target.tagName?i.data.PRD_DISCONTINUED_FLAG?(t.$open_msg.show(),t.$open_msg[0].clientHeight,t.$open_msg.addClass("show")):i.data.Url&&u.openInApp(i.data.Url):this.data.openOrder(e,n)},showExpress:function(t,e){e.set("showExpress",!e.data.showExpress),t.stopPropagation()}}),t.$open_msg=this.$(".open_msg").on(n.fx.transitionEnd,function(e){t.$open_msg.hasClass("show")||t.$open_msg.hide()}),t.loading=new a({url:"/api/order/list",$el:this.$el,checkData:!1,success:function(e){t.model.set("data",e.data)},append:function(e){t.model.get("data").append(e.data)}}),t.user=s.store("user")},onShow:function(){var t=this;t.user=s.store("user"),t.user?t.loading.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load():t.forward("/login?success="+this.route.url+"&from=/")},onDestory:function(){}})});define("template/activity",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <div class="main destwrap actwrap"> <div class="destimg"> <img sn-binding="src:data.Pic" /> <div class="destfav" sn-binding="html:data.Favorite"></div> <h1 sn-binding="html:data.Name"></h1> </div> <div class="activity_info"> <div class="act_signup"><b class="act_signup_num" sn-binding="html:data.SignUpQty"></b>报名</div> <div class="act_time"><text sn-binding="html:data.StartTime|date:\'yyyy年MM月dd日 hh:mm\'"></text>~<text sn-binding="html:data.FinishTime|date:\'yyyy年MM月dd日 hh:mm\'"></text></div> <div class="act_address" sn-binding="html:data.Address"></div> </div> <div class="destinfo"> <h2>详情</h2> <div class="destcontent" sn-binding="html:data.Content"></div> </div> <div class="destinfo"> <h2><span class="destcomment js_comment">发表评论</span>评论</h2> <div class="destcontent"> <ul class="quan_list"> <li class="quan_item" sn-repeat="item in comments" sn-binding="data-id:item.ID"> <div class="quan_user"> <img sn-binding="src:item.Avatars" /> <div class="bd"> <h2 sn-binding="html:item.NickName|or:item.Mobile"></h2> <div class="time" sn-binding="html:item.CommentTime|date:\'MM-dd hh:ss\'"></div> </div> </div> <div class="quan_con" sn-binding="html:item.Content"></div> </li> </ul> </div> </div> </div> <footer class="signup_bar"> <b class="btn_signup js_submit">我要报名</b> </footer> ';return __},helpers:{}});return T.template=T.html,T});define("views/activity",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../core/promise","../widget/scroll","animation"],function(t,e,i){var s=(t("$"),t("util")),r=t("activity"),a=t("../widget/loading"),o=t("../core/model"),l=t("../core/promise"),c=t("../widget/scroll");t("animation");return r.extend({events:{"tap .js_submit:not(.disabled)":function(t){this.user?(this.$submit.addClass("disabled"),this.submit.setParam({UserID:this.user.ID,Auth:this.user.Auth}).load()):this.forward("/login?success="+this.route.url+"&from="+this.route.url)},"tap .js_comment":function(){this.forward("/actcomment/"+this.route.data.id)}},onCreate:function(){var t=this;this.promise=new l,this.$main=this.$(".main"),c.bind(this.$main),o.Filter.precent=function(t){return parseFloat(t)+"%"},this.model=new o.ViewModel(this.$el,{title:"活动详情",back:this.route.query.from||"/"}),this.loading=new a({url:"/api/activity/get",params:{id:this.route.data.id},check:!1,checkData:!1,$el:this.$el,$content:this.$main.children(":first-child"),$scroll:this.$main,success:function(e){t.promise.then(function(){t.model.set(e)}),localStorage.setItem("destination",JSON.stringify(e.data))}}),this.loading.load(),this.$submit=this.$el.find(".js_submit"),this.submit=new a({url:"/api/activity/signup",params:{id:this.route.data.id},check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(sl.tip("报名成功！"),t.model.set("data.SignUpQty",t.model.data.data.SignUpQty+1)):sl.tip(e.msg),t.$submit.removeClass("disabled")}}),this.comments=new a({url:"/api/activity/comment_list",$el:t.$(".quan_list"),success:function(e){t.model.set("comments",e.data)},append:function(e){t.model.get("comments").append(e.data)}}),this.comments.load(),t.onResult("actcomment_success",function(){t.comments.reload()})},onLoad:function(){this.promise.resolve()},onShow:function(){this.user=s.store("user")},onDestory:function(){}})});define("template/register",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div sn-binding="html:title" class="head_title"></div> <div class="head_back" sn-binding="data-back:back"></div> </header> <div class="main"> <div class="login_form"> <ul class="form"> <li><input placeholder="输入手机号" sn-model="mobile" /></li> <li><input placeholder="验证码" sn-model="smsCode" type="text" /> <b class="js_valid btn_middle" sn-binding="html:valid"></b></li> <li><input placeholder="设置密码" sn-model="password" type="password" /></li> <li><input placeholder="再次输入确认密码" sn-model="password1" type="password" /></li> </ul> <div class="login_btn"><b class="btn_large js_bind">确定注册</b> </div> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/register",["components","images/style.css","$","util","activity","../widget/loading","../core/model","../widget/scroll","animation","util/md5"],function(t,e,i){var s=(t("$"),t("util")),a=t("activity"),r=t("../widget/loading"),o=t("../core/model"),l=t("../widget/scroll"),u=(t("animation"),t("util/md5"));return a.extend({events:{"tap .js_bind:not(.disabled)":function(){var t=this.model.data.mobile,e=this.model.data.password,i=this.model.data.password1,n=this.model.data.smsCode;return t&&s.validateMobile(t)?e!=i?void sl.tip("两次密码输入不一致"):n?void this.loading.setParam({mobile:t,password:u.md5(e),smsCode:n}).load():void sl.tip("请输入验证码"):void sl.tip("请输入正确的手机")},"tap .js_valid:not(.disabled)":function(t){var e=this.model.get("mobile");return e&&s.validateMobile(e)?(this.$valid.addClass("disabled"),this.valid.setParam({mobile:this.model.data.mobile}),void this.valid.load()):void sl.tip("请输入正确的手机")}},validTimeout:function(){var t=this,e=localStorage.getItem("valid_time");if(e&&parseInt(e)>60){if(e=Math.round((new Date(parseInt(e)).getTime()-Date.now())/1e3),0>=e)return;t.$valid.addClass("disabled"),setTimeout(function(){0>=e?(t.$valid.removeClass("disabled"),t.model.set("valid","获取验证码"),localStorage.removeItem("valid_time")):(t.model.set("valid",e+"秒"),e--,setTimeout(arguments.callee,1e3))},1e3)}},onCreate:function(){var t=this,e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{title:"注册",valid:"获取验证码",back:this.route.query.from||"/login"}),this.loading=new r({url:"/api/user/register",method:"POST",check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(localStorage.setItem("user",JSON.stringify(e.data)),t.back(t.route.query.success||"/")):sl.tip(e.msg)},error:function(t){sl.tip(t.msg)}}),this.valid=new r({url:"/api/user/send_sms",method:"POST",params:{mobile:t.model.data.mobile},check:!1,checkData:!1,$el:this.$el,success:function(e){e.success?(localStorage.setItem("valid_time",Date.now()+6e4),t.validTimeout()):sl.tip(e.msg)}}),t.$valid=this.$(".js_valid"),t.validTimeout()},onShow:function(){},onDestory:function(){}})});define("template/guide",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" sn-binding="data-back:back"></div> <div sn-binding="html:title" class="head_title"></div> </header> <div class="main guide"> <div class="guide_hd"> 恭喜您成为ABS爱彼此家居会员！<br> 我们为您准备了以下惊喜： </div> <div class="guide_bd"> <ul class="hd"> <li></li> <li>免费礼</li> <li>免费定制</li> <li>免邮费</li> </ul> <ul class="row"> <li> <span>SVIP会员</span> <p>累计金额<br>≥￥50000</p> </li> <li><p>600个月<br>免费礼</p></li> <li></li> <li></li> </ul> <ul class="row"> <li> <span>VIP会员</span> <p>￥10000≦<br>累计金额<br>＜￥50000</p> </li> <li><p>12个月<br>免费礼</p></li> <li></li> <li></li> </ul> <ul class="row"> <li> <span>钻石会员</span> <p>￥5000≦<br>累计金额<br>＜￥10000</p> </li> <li><p>12个月<br>免费礼</p></li> <li></li> <li class="none"></li> </ul> <ul class="row"> <li> <span>金卡会员</span> <p>￥1000≦<br>累计金额<br>＜￥5000</p> </li> <li><p>12个月<br>免费礼</p></li> <li></li> <li class="none"></li> </ul> <ul class="row"> <li> <span>银卡会员</span> <p>￥0＜<br>累计金额<br>＜￥1000</p> </li> <li class="none"><p></p></li> <li></li> <li class="none"></li> </ul> <div class="more"><p>ABS会员专享权益，最终解释权归上海爱彼此家居用品股份有限公司所有。</p> </div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/guide",["components","images/style.css","$","util","activity","widget/loading","core/model","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},swipeRightBackAction:"/settings",onCreate:function(){var e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/settings",title:"新手指南"})},onShow:function(){},onDestory:function(){}})});define("template/shop/index",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_search"> <input type="text" placeholder="热门搜索：新月枕" /> </div> </header> <div class="main"> <ul class="sp_all_cates"> <li class="curr" data-forward="/list">出行</li> <li>睡眠</li> <li>美食</li> <li>沐浴</li> <li>休闲</li> <li>家务</li> <li>空间</li> <li>儿童</li> </ul> <div class="sp_all_banner"><img src="" /></div> <ul class="sp_all_list"> <li class="sp_all_list_item"><a><img /></a></li> <li class="sp_all_list_item"><a><img /></a></li> <li class="sp_all_list_item"><a><img /></a></li> <li class="sp_all_list_item"><a><img /></a></li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/shop/index",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var t=this;t.swipeRightBackAction=t.route.query.from||"/";var e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"标题"})},onShow:function(){},onDestory:function(){}})});define("template/shop/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <ul class="sp_list_sort"> <li class="curr">新品</li> <li>销量</li> <li>价格</li> </ul> <ul class="sp_list"> <li class="sp_list_item" data-forward="/item/1"> <img src=""/> <p class="price"><b>￥20</b><del>￥50&nbsp;</del></p> <p class="name">名称名称名称名称名称名称名称名称</p> </li> <li class="sp_list_item"> <img src="" /> <p class="price"><b>￥20</b><del>￥50</del></p> <p class="name">名称名称名称名称名称名称名称名称</p> </li> <li class="sp_list_item"> <img src="" /> <p class="price"><b>￥20</b><del>￥50</del></p> <p class="name">名称名称名称名称名称名称名称名称</p> </li> <li class="sp_list_item"> <img src="" /> <p class="price"><b>￥20</b><del>￥50</del></p> <p class="name">名称名称名称名称名称名称名称名称</p> </li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/shop/list",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var t=this,e=t.$(".main");t.swipeRightBackAction=t.route.query.from||"/",l.bind(e),t.model=new o.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"床品"})},onShow:function(){},onDestory:function(){}})});define("template/shop/item",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<div class="pd_item_wrap"> <header class="header_trans"> <div class="head_back" data-back="{{back}}"></div> <div class="head_right"> <a class="head_call" href="tel:4008205077"></a> <div class="head_share js_share"></div> </div> </header> <div class="main pd_item"> <div class="pd_slider"></div> <div class="pd_info_wrap"> <div class="pd_info"> <h1>Mikey蝴蝶结兔毛保暖耳罩</h1> <p class="price">000-000</p> <del class="ori_price"></del> <p class="pd_code"> <span class="code">商品编码 code</span> <span class="sale">销售 xxx 件</span> </p> </div> <div class="pd_share js_share"></div> </div> <ul class="pd_sign"> <li>满99包邮</li> <li>30天退换货保障</li> </ul> <div class="pd_select_plus"> 买指定羊毛系列产品，￥99任选3件 </div> <div class="pd_select_size js_select_size"> 选择 尺码 颜色分类 </div> <div class="pd_item_con"> <h2>商品特点：</h2> <div class="con"> 1. 帮面选用棉麻混纺面料，舒适、透气性兼具； <br> 2. 天然黄麻中底，采用立体编织技术，穿着舒适，有足底按摩的功效； 黄麻面料拥有抗霉菌性，具有透气调节温度的功效，长时间保持干爽； 3. EVA材质防滑大底，轻便舒适，不伤地板； 4. 款式升级：素色与条纹拼接； 女款更增加蕾丝元素。 </div> </div> <div class="pd_jump_detail" data-forward="/detail/{{id}}"><b>图文详情</b><em>建议在WIFI情况下查看</em></div> <div class="pd_help"> 如果您有任何疑问，欢迎联系我们的客服。 <br> 联系热线：400-820-5077 周一至周日 9:00-19:00 </div> </div> <footer class="pd_buy"> <b class="btn_cart"><i></i></b> <b class="btn_buy js_buy">加入购物车</b> </footer> </div> <div class="pd_size_wrap js_size {{isShowSize?\'\':\'out\'}}" style="display:none"> <div class="pd_size"> <div class="pd_size_close" sn-tap="isShowSize=false"></div> <div class="base_info"> <div class="img"><img src="" alt=""></div> <div class="info"> <h2 class="price">¥000</h2> <div class="qty">库存xxx件</div> <p class="other"> <em>选择</em> <em>尺码</em> <em>颜色分类</em> </p> </div> </div> <div class="pd_size_con"> <div class="pd_size_select"> <div class="hd">尺码</div> <ul> <li class="curr">3吗</li> <li>1</li> <li>2</li> <li>2</li> <li>2</li> </ul> </div> <div class="pd_size_select"> <div class="hd">颜色分类</div> <ul> <li>3吗</li> <li>1</li> <li>2</li> </ul> </div> </div> <div class="pd_size_buy"> <p class="hd">购买数量</p> <p class="qty"><em>-</em> <input type="text" class="qty" value="1" /> <em>+</em> </p> </div> <b class="btn_large btn_confirm">确认</b> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/shop/item",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","components/share","animation"],function(t,e,i){var n=t("$"),a=(t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll"),c=t("components/share");t("animation");return a.extend({events:{"tap .js_buy:not(.disabled)":function(){this.forward("/cart?from="+this.route.url)},"tap .js_share":function(){this.share.show()},"tap .js_select_size":function(){this.$(".js_size").show(),this.model.set({isShowSize:!0})},"tap .js_size":function(t){n(t.target).hasClass("js_size")&&this.model.set({isShowSize:!1})}},className:"pd_item_bg",onCreate:function(){var t=this,e=t.$(".main");t.$size=this.$(".js_size"),t.listenTo(t.$size,n.fx.transitionEnd,function(e){t.$size.hasClass("out")&&t.$size.hide()}),t.swipeRightBackAction=t.route.query.from||"/",l.bind(e),t.model=new o.ViewModel(t.$el,{back:t.swipeRightBackAction,title:"床品",id:1}),t.share=new c({title:"分享商品至"}),t.share.$el.appendTo(t.$el)},onShow:function(){},onDestory:function(){}})});define("template/shop/detail",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main pd_detail" sn-html="{{content}}"> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/shop/detail",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");i.exports=a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var t=this;t.swipeRightBackAction=t.route.query.from||"/item/"+t.route.data.id,t.model=new o.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"图文详情",id:t.route.data.id}),l.bind(t.$(".main"))},onShow:function(){},onDestory:function(){}})});define("template/shop/cart",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff <header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> '+this.helpers.list()+' </div> <footer class="ct_list_action"> <div class="total">总计：<b>￥200</b></div> <div class="btn_buy js_buy">结 算</div> </footer> <div class="ct_coupon_wrap {{isShowCoupon?\'\':\'out\'}}" style="display:none"> <div class="ct_coupon"> <div class="ct_coupon_hd">选择优惠券</div> <div class="ct_coupon_use"> <input type="text" placeholder="请输入券码" /> <b class="btn">使用</b> </div> <div class="ct_coupon_list"> <div class="hd">已有优惠券</div> <ul class="bd"> <li sn-repeat="item in coupon|filter:couponType==4?item.VCA_VCT_ID==4:(item.VCA_VCT_ID!=4)" class="{{(item.VCA_VCT_ID == 4 ? \'free\' : item.VCA_VCT_ID == 2 ? \'vct2\' : item.VCA_VCT_ID == 5 ? \'vct5\' : \'\') + (item.IsOverdue ? \' dis\' : \'\')}}"> <div class="price">{{util.currency(item.VCA_DEDUCT_AMOUNT,\'\')}}</div> <div class="name">{{item.VCA_VCT_ID==4?\'免邮卡\':item.VCA_NAME}}</div> <div class="time">有效期:{{item.IsOverdue?\'已过期\':(util.formatDate(item.CSV_START_DT,\'yyyy/MM/dd\')+\'-\'+util.formatDate(item.CSV_END_DT,\'yyyy/MM/dd\'))}}</div> </li> <div class="nodata">暂无优惠券</div> </ul> </div> </div> </div>';return __},helpers:{list:function(){var t="";return t+=' <div class="ct_list_wrap" sn-display="{{util.isTrue(data)}}"> <ul class="ct_list"> <li class="ct_list_item"> <div class="ct_list_item_con"> <img src="" /> <div class="con"> <b class="name">Mavis多功能榨汁活力瓶</b> <p class="size">尺寸：XXL</p> <p class="color">颜色：绿色</p> <p class="qty"> <span class="minus">-</span> <input type="text" value="1" /> <span class="plus">+</span> </p> </div> <div class="ft"> <b class="price">￥000</b> <del>￥000</del> </div> </div> </li> <li class="ct_list_item"> <div class="ct_list_item_con"> <img src="" /> <div class="con"> <b class="name">Mavis多功能榨汁活力瓶</b> <p class="size">尺寸：XXL</p> <p class="color">颜色：绿色</p> <p class="qty"> <span class="minus">-</span> <input type="text" value="1" /> <span class="plus">+</span> </p> </div> <div class="ft"> <b class="price">￥000</b> <del>￥000</del> </div> </div> </li> </ul> <ul class="ct_list_info"> <li><span>商品总价</span><em><b class="price">￥000</b></em></li> <li class="link js_use_coupon"><span>使用优惠券</span><em><b>5</b>张可用</em></li> <li class="link js_use_point"><span>积分抵扣</span><em><b>400</b>积分可用</em></li> <li class="link js_use_freecard"><span>运费</span><em><b>1</b>张免邮卡可用</em></li> <li><span>总计</span><em><b class="price">￥000</b></em></li> </ul> </div> <div class="my_nodata" sn-display="{{util.isFalse(data)}}"> <div class="icon"></div> <div class="text">您的购物车内还没有商品</div> <div class="btn">去逛逛吧</div> </div> '}}});return T.template=T.html,T});define("views/shop/cart",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var n=t("$"),s=t("util"),a=t("activity"),r=t("widget/loading"),o=t("core/model2"),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_buy:not(.disabled)":function(){var t=this;this.forward("/buy?from="+t.route.url)},"touchmove .ct_coupon_wrap":function(t){return!1},"tap .ct_coupon_wrap":function(t){n(t.target).hasClass("ct_coupon_wrap")&&this.model.set({isShowCoupon:!1})},"tap .js_use_coupon":function(){this.$coupon.show(),this.model.set({couponType:0,isShowCoupon:!0})},"tap .js_use_point":function(){this.prompt("输入要使用的积分","100",function(t){console.log(t)})},"tap .js_use_freecard":function(){this.$coupon.show(),this.model.set({couponType:4,isShowCoupon:!0})}},onCreate:function(){var t=this;l.bind(t.$(".main")),l.bind(t.$(".ct_coupon_list .bd")),t.swipeRightBackAction=t.route.query.from||"/",t.user=s.store("user"),t.model=new o.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"我的购物车",data:[{}]}),this.$coupon=t.$(".ct_coupon_wrap"),t.listenTo(t.$coupon,n.fx.transitionEnd,function(e){t.$coupon.hasClass("out")&&t.$coupon.hide()}),t.coupon=new r({url:"/api/user/voucher_list",params:{status:1},$el:this.$el,check:!1,checkData:!1,success:function(e){if(e&&e.data&&0!=e.data.length){var i=e.data;i.sort(function(t,e){return t.IsOverdue&&!e.IsOverdue?1:!t.IsOverdue&&e.IsOverdue?-1:t.CSV_END_DT>e.CSV_END_DT?1:t.CSV_END_DT==e.CSV_END_DT?0:-1}),t.model.set("coupon",i)}else t.model.set("coupon",[])}}),t.user&&t.doWhenLogin(),t.onResult("Login",function(){t.doWhenLogin()})},doWhenLogin:function(){var t=this;this.user=s.store("user"),this.coupon.setParam({UserID:t.user.ID,Auth:t.user.Auth}).load()},onShow:function(){var t=this;t.user||t.forward("/login?success="+t.route.url+"&from="+t.swipeRightBackAction)},onDestory:function(){}})});define("template/shop/buy",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <div class="sp_buy"> <div class="sp_buy_hd js_address"> <div class="info"><span class="name">姓名</span><span class="mobi">12341234124</span></div> <div class="loc">上海市浦东新区XXX街道浦东大道2000号阳光世界大厦3楼</div> </div> <div class="sp_buy_bd sp_buy_bill"> <div class="hd">支付结算</div> <ul> <li><span>商品价</span><em>¥200</em></li> <li><span>优惠券</span><em>-¥200</em></li> <li><span>积分</span><em>-¥200</em></li> <li><span>运费</span><em>+¥200</em></li> <li><span>总计</span><b>¥200</b></li> </ul> </div> <div class="sp_buy_bd sp_buy_pay"> <div class="hd">支付方式</div> <ul> <li class="ico_alipay checked">支付宝支付</li> <li class="ico_wxpay">微信支付</li> </ul> </div> </div> </div> <footer class="sp_buy_action"> <div class="total">总计：<b>￥200</b></div> <div class="btn_buy">结 算</div> </footer>';return __},helpers:{}});return T.template=T.html,T});define("views/shop/buy",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){},"tap .js_address":function(){this.forward("/address?from="+this.route.path)}},onCreate:function(){var t=this,e=t.$(".main");t.swipeRightBackAction=t.route.query.from||"/",l.bind(e),t.model=new o.ViewModel(this.$el,{back:t.swipeRightBackAction,title:"确认订单"}),t.onResult("setDefaultAddress",function(e,i){t.model.set({address:i})})},onShow:function(){},onDestory:function(){}})});define("template/steward/index",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <div class="stw_title_bar"> <div class="hd">总共<em>15</em>条爱管家记录</div> <i class="stw_title_bar_thumb ico{{displayType==0?\' curr\':\'\'}}" sn-tap="displayType=0"></i> <i class="stw_title_bar_list ico{{displayType==1?\' curr\':\'\'}}" sn-tap="displayType=1"></i> </div> <ul class="stw_list" sn-display="{{displayType==1}}"> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10</div> <!--<div class="text"> <p>提醒：文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字</p> </div>--> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10 </div> <div class="text"> </div> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> </ul> <div class="stw_category" sn-display="{{displayType==0}}"> <div class="stw_category_item"> <div class="hd"> <span>出行</span> </div> <ul class="stw_list"> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10 </div> <!--<div class="text"> <p>提醒：文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字文字</p> </div>--> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10 </div> <div class="text"> </div> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> </ul> </div> <div class="stw_category_item curr"> <div class="hd"> <span>睡眠</span> </div> <ul class="stw_list"> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10 </div> <div class="text"> </div> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> <li class="stw_list_item"> <div class="thumb"> <img /> <b class="btn">再来一个</b> </div> <div class="con" data-forward="/steward/1"> <h4>Tagine摩洛哥酷彩系列耐高温陶瓷塔吉锅（8寸）</h4> <div class="date">最新购入时间：2015/10/10 </div> <div class="text"> </div> <a class="link" href="/">查看详情&gt;&gt;</a> </div> </li> </ul> </div> </div> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/steward/index",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},swipeRightBackAction:"/",onCreate:function(){var e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/",title:"爱管家",displayType:1})},onShow:function(){},onDestory:function(){}})});define("template/steward/item",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main"> <ul class="stw_items"> <li class="stw_items_item"> <a href="/steward/detail/1?steward_id=1"><img src="" /></a> </li> <li class="stw_items_item"> <a href="/steward/detail/2?steward_id=1"><img src="" /></a> </li> </ul> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/steward/item",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_buy:not(.disabled)":function(){}},swipeRightBackAction:"/steward",onCreate:function(){var e=this.$(".main");l.bind(e),this.model=new o.ViewModel(this.$el,{back:"/steward",title:"爱管家"})},onShow:function(){},onDestory:function(){}})});define("template/steward/detail",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='\ufeff<header> <div class="head_back" data-back="{{back}}"></div> <div class="head_title">{{title}}</div> </header> <div class="main stw_detail"> </div>';return __},helpers:{}});return T.template=T.html,T});define("views/steward/detail",["components","images/style.css","$","util","activity","widget/loading","core/model2","widget/scroll","animation"],function(t,e,i){var a=(t("$"),t("util"),t("activity")),o=(t("widget/loading"),t("core/model2")),l=t("widget/scroll");t("animation");return a.extend({events:{"tap .js_bind:not(.disabled)":function(){}},onCreate:function(){var e=this.$(".main");this.swipeRightBackAction="/steward/"+this.route.query.steward_id,l.bind(e),this.model=new o.ViewModel(this.$el,{back:this.swipeRightBackAction,title:"爱管家"})},onShow:function(){},onDestory:function(){}})});