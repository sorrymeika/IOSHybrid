define("components/menu",["$","util","widget/popup","widget/toast","core/model2","models/user"],function(t,e,n){var a=(t("$"),t("util"),t("widget/popup"),t("widget/toast"),t("core/model2").Model),u=t("models/user"),c=a.extend({el:'<div class="menu_exit menu"> <div class="menu_user h_l flex"> <img onerror="this.src=\'images/default.jpg\'" sn-src="{sl.resource(user.avatars)}" class="g_avatars dp_b" data-forward="/user/person" /> <p class="fs_m ml_m flexitem" data-forward="/user/person"> <span class="name dp_b">{user.user_name}</span> <span class="msg dp_b">ID：{user.user_id}</span> </p> <p class="user-qrcode mr_m" data-forward="/user/qrcode"></p> </div> <div class="menu_sign h_s ml_l mt_m fw_xs" data-forward="/user/set/sign_text"> {user.sign_text || \'编辑个性签名\'} </div> <ul class="menu_list" ref="list"> <li class="user-fav" data-forward="/user/fav"> <span class="va_m">我的收藏</span> </li> <li class="user-wishlist" data-forward="/user/like"> <span class="va_m">我的喜好</span> </li> <li class="user-chat" data-forward="/user/messages"> <span class="va_m">我的消息</span> </li> <li class="user-setting" data-forward="/user/settings"> <span class="va_m">系统设置</span> </li> <li class="user-list" data-forward="/user/qa"> <span class="va_m">常见问题</span> </li> </ul> </div>',initialize:function(){this.set({user:u}),this.bindScrollTo(this.refs.list)}});n.exports=c});define("components/imagePicker",["$","util","widget/popup","widget/toast","core/model2","models/user","bridge"],function(t,e,n){var l,s=(t("$"),t("util"),t("widget/popup")),c=(t("widget/toast"),t("core/model2").Model,t("models/user"),t("bridge"));n.exports={show:function(t,e){var n=[{text:"从相册选择图片",click:function(){c.image.photo(function(t){l.hide(),l=null,e(t)})}},{text:"拍照",click:function(){c.image.camera(function(t){l.hide(),l=null,e(t)})}},{text:"取消",click:function(){this.hide()}}];"function"==typeof t?(e=t,t=null):n.unshift({text:t}),l=s.options({options:n})},hide:function(){l&&l.hide()}}});define("widget/photoViewer",["core/model2","$","./scroll","util"],function(t,e,n){var i=t("core/model2").Model,r=t("$");t("./scroll"),t("util");n.exports=i.extend({el:'<div class="cp_photoviewer" sn-tap="this.resetSize()" sn-touchstart="this.touchStart()" sn-touchmove="this.touchMove()" sn-touchend="this.touchEnd()"> <ul class="cp_photoviewer__con" ref="content" style="-webkit-transform:translate({x}px,0px);width:{images.length*100}%"> <li class="cp_photoviewer__item" sn-repeat="item in images"><div class="cp_photoviewer__item_con" ref="items"><p ref="bds"><img style="-webkit-transform:translate(-50%,-50%) rotate({item.r}deg) scale({item.s});-webkit-transform-origin: 50% 50%;" sn-src="{item.src}" ref="images" /></p></div></li> </ul> </div>',attributes:{card:0,x:0,y:0,r:0,s:1,index:0,images:[]},index:function(t){return void 0===t?this.attributes.index:void this.set({x:-1*t*(this.$el.offsetWidth||window.innerWidth),index:t})},resetSize:function(){this.currentItem.set({s:1})},setImages:function(t){t.forEach(function(t){t.r=0,t.s=1}),this.set({images:t})},initialize:function(){this._start=this._start.bind(this),this._move=this._move.bind(this),this._end=this._end.bind(this),this._("images").each(function(t){t.set({r:0,s:1})}),this.set({x:-1*this.attributes.index*(this.$el.offsetWidth||window.innerWidth)})},viewDidUpdate:function(){var t=this;this.refs.items&&this.refs.items.forEach(function(e){e.scroll||(t.bindScrollTo(e,{hScroll:!0,vScroll:!0}),r(e).on("touchstart",t._start).on("touchmove",t._move).on("touchend",t._end))})},_start:function(t){this.__startScrollX=t.currentTarget.scrollLeft,this.__sx=this.__lastX=t.touches[0].pageX,this.__sy=this.__lastY=t.touches[0].pageY,this.__isPreventScroll=-1,this.__isY=-1},_move:function(t){if(2!=t.touches.length){var e=t.currentTarget;if(-1==this.__isY){if(Math.abs(t.touches[0].pageY-this.__lastY)>Math.abs(t.touches[0].pageX-this.__lastX))return void(this.__isY=!0);this.__isY=!1}else if(this.__isY)return;var n=t.touches[0].pageX<this.__lastX;this.__lastX=t.touches[0].pageX,this.isMoveLeft=n,-1===this.__isPreventScroll&&(n&&this.__startScrollX>=e.scrollWidth-e.clientWidth||!n&&this.__startScrollX<=0?(this.__isPreventScroll=!0,this.originX=this.attributes.x):this.__isPreventScroll=!1),this.__isPreventScroll===!0&&(t.preventDefault(),this.touchMove(t))}},_end:function(t){this.__isPreventScroll&&this.touchEnd(t)},touchStart:function(t){var e=t.touches;this.startTouches=[].map.call(e,function(t){return{x:t.pageX,y:t.pageY}}),this.isStart=!0,this.touchLen=-1,this.originX=this.attributes.x,this.originY=this.attributes.y,this.originR=this.attributes.r;var n=n;if(this.currentItem=this._("images["+n+"]"),this.originR=this.currentItem.get("r"),this.originS=this.currentItem.get("s"),this.currentEl=this.refs.items[n],this.currentImage=this.refs.images[n],this.currentBd=this.refs.bds[n],2==e.length){var i=e[0].pageX-e[1].pageX,r=e[0].pageY-e[1].pageY;this.startR=180*Math.atan2(r,i)/Math.PI,this.startL=Math.sqrt(i*i+r*r)}},touchMove:function(t){var e=this;if(this.isStart){var n=t.touches;if(-1!=this.touchLen){if(this.touchLen!=n.length)return void(this.isStart=!1)}else this.touchLen=n.length;if(r(t.target).trigger("touchcancel"),1==this.touchLen){if(this.isTwo)return;var i=n[0].pageX-this.startTouches[0].x,s=n[0].pageY-this.startTouches[0].y,o=e.originX+i,a=this.$el[0].offsetWidth-this.refs.content.offsetWidth;e.set({x:o>0?o/2:a>o?a+(o-a)/2:o,y:e.originY+s})}else{var u=n[0].pageX-n[1].pageX,c=n[0].pageY-n[1].pageY,h=(180*Math.atan2(c,u)/Math.PI,Math.sqrt(u*u+c*c));e.currentItem.set({s:e.originS*(h/this.startL)})}return!1}},touchEnd:function(t){this.isStart=!1;var e=this,n=this.$el[0].offsetWidth,i=this.$el[0].offsetHeight;if(1==this.touchLen){r(this.refs.content).addClass("anim_ease")[0].clientHeight;var s=n-this.refs.content.offsetWidth,o=this.attributes.x,a=this.attributes.index*n*-1;o=o>0?0:s>o?s:a>o&&this.isMoveLeft?a-n:o>a&&!this.isMoveLeft?a+n:a;var u=-1*o/n,c=u!==this.attributes.index;this.set({x:o,index:u}).next(function(){setTimeout(function(){r(e.refs.content).removeClass("anim_ease"),c&&(e.currentItem.set({s:1}),e.currentBd.style.width="100%",e.currentBd.style.height="100%")},300)})}else{var s=e.currentImage.offsetWidth*e.currentItem.attributes.s,l=e.currentImage.offsetHeight*e.currentItem.attributes.s;s>n?(this.currentBd.style.width=s+"px",this.currentEl.scrollLeft=(s-n)/2):this.currentBd.style.width="100%",l>i?(this.currentBd.style.height=l+"px",this.currentEl.scrollTop=(l-i)/2):this.currentBd.style.height="100%"}}})});define("components/yunMiRules",[],function(t,e,n){var i='<div class="fs_s ym_rules"> 用户可以在云米账户摇云米、赚云米、<br /> 用云米、做任务，畅享移动和生活。<br /> 1、摇云米：通过摇一摇方式，按照用<br /> 户获取规则，随机在用户好友、用户手<br /> 机通讯录中获取6个用户生成的50%云<br /> 米。<br /> 2、赚云米：系统根据计算规则按时间<br /> 顺序生成云米，用户在下一次云米生成<br /> 前需收获云米，否则会被下一次生成的<br /> 云米替代；<br /> 用户自行收获云米，则可获得100%的<br /> 云米，如果被好友摇一摇收获，则用户<br /> 和好友各收获50%。两种行为按照先做<br /> 先得原则执行。<br /> 3、用云米：用户可以选择云米兑换省<br /> 内流量。<br /> 4、做任务：用户可以通过推荐分享和<br /> 做云米任务获得额外的云米。<br /> </div>',r='<div class="fs_s ym_rules">    系统根据计算规则按时间顺序生成云米，<br />    用户在下一次云米生成前需收获云米，<br />    否则会被下一次生成的云米替代<br /></div>';n.exports={rule:i,rule2:r}});