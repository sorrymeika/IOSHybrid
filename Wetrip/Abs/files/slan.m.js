!function(e,i){function a(e){return function(i){return{}.toString.call(i)=="[object "+e+"]"}}function m(){return c++}function _(e){return e.match(v)[0]}function f(e){for(e=e.replace(p,"/");e.match(g);)e=e.replace(g,"/");return e=e.replace(b,"$1/")}function y(e){var i=e.length-1,t=e.charAt(i);return"#"===t?e.substring(0,i):".js"===e.substring(i-2)||e.indexOf("?")>0||".css"===e.substring(i-3)||"/"===t?e:e+".js"}function k(e){var t,i=s.paths;return i&&(t=e.match(w))&&l(i[t[1]])&&(e=i[t[1]]+t[2]),e}function T(e){var i=s.vars;return i&&e.indexOf("{")>-1&&(e=e.replace($,function(e,t){return l(i[t])?i[t]:e})),e}function q(e){var i=s.map,t=e;if(i)for(var a=0,n=i.length;n>a;a++){var l=i[a];if(t=r(l)?l(e)||e:e.replace(l[0],l[1]),t!==e)break}return t}function I(e,i){var t,a=e.charAt(0);if(D.test(e))t=e;else if("."===a)t=f((i?_(i):s.cwd)+e);else if("/"===a){var n=s.cwd.match(x);t=n?n[0]+e.substring(1):e}else t=s.base+e;return 0===t.indexOf("//")&&(t=location.protocol+t),t}function A(e,i){if(!e)return"";var t=s.alias&&s.alias[e];t&&l(t)&&(e=t),e=k(e),e=T(e),e=y(e);var a=I(e,i);return a=q(a),!t||Q[a]||l(t)||(Q[a]={exports:t,status:ie.EXECUTED,exec:te.prototype.exec}),a}function F(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function V(e,i,t,s){var a=R.test(e),n=N.createElement(a?"link":"script");t&&(n.charset=t),o(s)||n.setAttribute("crossorigin",s),a?i():H(n,i,a,e),a?(n.rel="stylesheet",n.href=e):(n.async=!0,n.src=e),E=n,L?P.insertBefore(n,L):P.appendChild(n),E=null}function H(e,i,t,a){function l(){e.onload=e.onerror=e.onreadystatechange=null,t||s.debug||P.removeChild(e),e=null,i()}var n="onload"in e;n?(e.onload=l,e.onerror=function(){h("error",{uri:a,node:e}),l()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&l()}}function G(){if(E)return E;if(U&&"interactive"===U.readyState)return U;for(var e=P.getElementsByTagName("script"),i=e.length-1;i>=0;i--){var t=e[i];if("interactive"===t.readyState)return U=t}}function z(e){var i=[];return e.replace(X,"").replace(J,function(e,t,s){s&&i.push(s)}),i}function te(e,i){this.uri=e,this.dependencies=i||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var t=e.seajs={version:"2.2.3"},s=t.data={},n=a("Object"),l=a("String"),d=Array.isArray||a("Array"),r=a("Function"),o=a("Undefined"),c=0,u=s.events={};t.on=function(e,i){var s=u[e]||(u[e]=[]);return s.push(i),t},t.off=function(e,i){if(!e&&!i)return u=s.events={},t;var a=u[e];if(a)if(i)for(var n=a.length-1;n>=0;n--)a[n]===i&&a.splice(n,1);else delete u[e];return t};var h=t.emit=function(e,i){var a,s=u[e];if(s)for(s=s.slice();a=s.shift();)a(i);return t},v=/[^?#]*\//,p=/\/\.\//g,g=/\/[^/]+\/\.\.\//,b=/([^:/])\/\//g,w=/^([^/:]+)(\/.+)$/,$=/{([^{]+)}/g,D=/^\/\/.|:\//,x=/^.*?\/\/.*?\//,N=document,M=_(N.URL),j=N.scripts,C=N.getElementById("seajsnode")||j[j.length-1],S=_(F(C)||M);t.resolve=A;{var E,U,P=N.head||N.getElementsByTagName("head")[0]||N.documentElement,L=P.getElementsByTagName("base")[0],R=/\.css(?:\?|$)/i;+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536}t.request=V;var K,J=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,X=/\\\\/g,Q=t.cache={},Y={},Z={},ee={},ie=te.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};te.prototype.resolve=function(){for(var e=this,i=e.dependencies,t=[],s=0,a=i.length;a>s;s++)t[s]=te.resolve(i[s],e.uri);return t},te.prototype.load=function(){var e=this;if(!(e.status>=ie.LOADING)){e.status=ie.LOADING;var i=e.resolve();h("load",i);for(var s,t=e._remain=i.length,a=0;t>a;a++)s=te.get(i[a]),s.status<ie.LOADED?s._waitings[e.uri]=(s._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var n={};for(a=0;t>a;a++)s=Q[i[a]],s.status<ie.FETCHING?s.fetch(n):s.status===ie.SAVED&&s.load();for(var l in n)n.hasOwnProperty(l)&&n[l]()}},te.prototype.onload=function(){var e=this;e.status=ie.LOADED,e.callback&&e.callback();var t,s,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(s=Q[t],s._remain-=i[t],0===s._remain&&s.onload());delete e._waitings,delete e._remain},te.prototype.fetch=function(e){function d(){t.request(n.requestUri,n.onRequest,n.charset,n.crossorigin)}function o(){delete Y[l],Z[l]=!0,K&&(te.save(a,K),K=null);var e,i=ee[l];for(delete ee[l];e=i.shift();)e.load()}var i=this,a=i.uri;i.status=ie.FETCHING;var n={uri:a};h("fetch",n);var l=n.requestUri||a;return!l||Z[l]?void i.load():Y[l]?void ee[l].push(i):(Y[l]=!0,ee[l]=[i],h("request",n={uri:a,requestUri:l,onRequest:o,charset:r(s.charset)?s.charset(l):s.charset,crossorigin:r(s.crossorigin)?s.crossorigin(l):s.crossorigin}),void(n.requested||(e?e[n.requestUri]=d:d())))},te.prototype.exec=function(){function s(e){return te.get(s.resolve(e)).exec()}var e=this;if(e.status>=ie.EXECUTING)return e.exports;e.status=ie.EXECUTING;var t=e.uri;s.resolve=function(e){return te.resolve(e,t)},s.async=function(e,i){return te.use(e,i,t+"_async_"+m()),s};var a=e.factory,n=r(a)?a(s,e.exports={},e):a;return n===i&&(n=e.exports),delete e.factory,e.exports=n,e.status=ie.EXECUTED,h("exec",e),n},te.resolve=function(e,i){var s={id:e,refUri:i};return h("resolve",s),s.uri||t.resolve(s.id,i)},te.define=function(e,t,s){var a=arguments.length;1===a?(s=e,e=i):2===a&&(s=t,d(e)?(t=e,e=i):t=i),!d(t)&&r(s)&&(t=z(s.toString()));var n={id:e,uri:te.resolve(e),deps:t,factory:s};if(!n.uri&&N.attachEvent){var l=G();l&&(n.uri=l.src.replace(/\?.*/g,""))}h("define",n),n.uri?te.save(n.uri,n):K=n},te.save=function(e,i){var t=te.get(e);t.status<ie.SAVED&&(t.id=i.id||e,t.dependencies=i.deps||[],t.factory=i.factory,t.status=ie.SAVED)},te.get=function(e,i){return Q[e]||(Q[e]=new te(e,i))},te.use=function(i,t,s){var a=te.get(s,d(i)?i:[i]);a.callback=function(){for(var i=[],s=a.resolve(),n=0,l=s.length;l>n;n++)i[n]=Q[s[n]].exec();t&&t.apply(e,i),delete a.callback},a.load()},te.preload=function(e){var i=s.preload,t=i.length;t?te.use(i,function(){i.splice(0,t),te.preload(e)},s.cwd+"_preload_"+m()):e()},t.use=function(e,i){return te.preload(function(){te.use(e,i,s.cwd+"_use_"+m())}),t},te.define.cmd={},e.define=te.define,t.Module=te,s.fetchedList=Z,s.cid=m,t.require=function(e){var i=te.get(te.resolve(e));return i.status<ie.EXECUTING&&(i.onload(),i.exec()),i.exports};var se=/^(.+?\/)(\?\?)?(seajs\/)+/;s.base=(S.match(se)||["",S])[1],s.dir=S,s.cwd=M,s.charset="utf-8",s.preload=function(){var e=[],i=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return i+=" "+N.cookie,i.replace(/(seajs-\w+)=1/g,function(i,t){e.push(t)}),e}(),t.config=function(e){for(var i in e){var a=e[i],l=s[i];if(l&&n(l))for(var r in a)l[r]=a[r];else d(l)?a=l.concat(a):"base"===i&&("/"!==a.slice(-1)&&(a+="/"),a=I(a)),s[i]=a}return h("config",e),t}}}(this);var Zepto=function(){function C(t){return null==t?String(t):T[k.call(t)]||"object"}function M(t){return"function"==C(t)}function S(t){return null!=t&&t==t.window}function I(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function E(t){return"object"==C(t)}function P(t){return E(t)&&!S(t)&&Object.getPrototypeOf(t)==Object.prototype}function F(t){return"number"==typeof t.length}function L(t){return r.call(t,function(t){return null!=t})}function O(t){return t.length>0?i.fn.concat.apply([],t):t}function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(t){return t in d?d[t]:d[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function H(t,e){return"number"!=typeof e||c[R(t)]?e:e+"px"}function V(t){var e,i;return o[t]||(e=l.createElement(t),l.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),o[t]=i),o[t]}function B(t){return"children"in t?a.call(t.children):i.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function Z(i,n,s){for(e in n)s&&(P(n[e])||A(n[e]))?(P(n[e])&&!P(i[e])&&(i[e]={}),A(n[e])&&!A(i[e])&&(i[e]=[]),Z(i[e],n[e],s)):n[e]!==t&&(i[e]=n[e])}function z(t,e){return null==e?i(t):i(t).filter(e)}function J(t,e,i,n){return M(e)?e.call(t,i,n):e}function G(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function X(e,i){var n=e.className,s=n&&n.baseVal!==t;return i===t?s?n.baseVal:n:void(s?n.baseVal=i:e.className=i)}function W(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?i.parseJSON(t):t:e):t}catch(n){return t}}function Y(t,e){e(t);for(var i in t.childNodes)Y(t.childNodes[i],e)}var t,e,i,n,q,D,s=[],a=s.slice,r=s.filter,l=window.document,o={},d={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},u=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/^(?:body|html)$/i,v=/([A-Z])/g,f=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],b=l.createElement("table"),_=l.createElement("tr"),y={tr:l.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:_,th:_,"*":l.createElement("div")},w=/complete|loaded|interactive/,$=/^[\w-]*$/,T={},k=T.toString,x={},N=l.createElement("div"),j={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(t){return t instanceof Array};return x.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,a=!s;return a&&(s=N).appendChild(t),n=~x.qsa(s,e).indexOf(t),a&&N.removeChild(t),n},q=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},D=function(t){return r.call(t,function(e,i){return t.indexOf(e)==i})},x.fragment=function(e,n,s){var r,o,d;return m.test(e)&&(r=i(l.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(h,"<$1></$2>")),n===t&&(n=u.test(e)&&RegExp.$1),n in y||(n="*"),d=y[n],d.innerHTML=""+e,r=i.each(a.call(d.childNodes),function(){d.removeChild(this)})),P(s)&&(o=i(r),i.each(s,function(t,e){f.indexOf(t)>-1?o[t](e):o.attr(t,e)})),r},x.Z=function(t,e){return t=t||[],t.__proto__=i.fn,t.selector=e||"",t},x.isZ=function(t){return t instanceof x.Z},x.init=function(e,n){var s;if(!e)return x.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&u.test(e))s=x.fragment(e,RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);s=x.qsa(l,e)}else{if(M(e))return i(l).ready(e);if(x.isZ(e))return e;if(A(e))s=L(e);else if(E(e))s=[e],e=null;else if(u.test(e))s=x.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);s=x.qsa(l,e)}}return x.Z(s,e)},i=function(t,e){return x.init(t,e)},i.extend=function(t){var e,i=a.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){Z(t,i,e)}),t},x.qsa=function(t,e){var i,n="#"==e[0],s=!n&&"."==e[0],r=n||s?e.slice(1):e,l=$.test(r);return I(t)&&l&&n?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:a.call(l&&!n?s?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},i.contains=function(t,e){return t!==e&&t.contains(e)},i.type=C,i.isFunction=M,i.isWindow=S,i.isArray=A,i.isPlainObject=P,i.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},i.inArray=function(t,e,i){return s.indexOf.call(e,t,i)},i.camelCase=q,i.trim=function(t){return null==t?"":String.prototype.trim.call(t)},i.uuid=0,i.support={},i.expr={},i.map=function(t,e){var i,s,a,n=[];if(F(t))for(s=0;s<t.length;s++)i=e(t[s],s),null!=i&&n.push(i);else for(a in t)i=e(t[a],a),null!=i&&n.push(i);return O(n)},i.each=function(t,e){var i,n;if(F(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},i.grep=function(t,e){return r.call(t,e)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){T["[object "+e+"]"]=e.toLowerCase()}),i.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(t){return i(i.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return i(a.apply(this,arguments))},ready:function(t){return w.test(l.readyState)&&l.body?t(i):l.addEventListener("DOMContentLoaded",function(){t(i)},!1),this},get:function(e){return e===t?a.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return s.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return M(t)?this.not(this.not(t)):i(r.call(this,function(e){return x.matches(e,t)}))},add:function(t,e){return i(D(this.concat(i(t,e))))},is:function(t){return this.length>0&&x.matches(this[0],t)},not:function(e){var n=[];if(M(e)&&e.call!==t)this.each(function(t){e.call(this,t)||n.push(this)});else{var s="string"==typeof e?this.filter(e):F(e)&&M(e.item)?a.call(e):i(e);this.forEach(function(t){s.indexOf(t)<0&&n.push(t)})}return i(n)},has:function(t){return this.filter(function(){return E(t)?i.contains(this,t):i(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!E(t)?t:i(t)},last:function(){var t=this[this.length-1];return t&&!E(t)?t:i(t)},find:function(t){var e,n=this;return e="object"==typeof t?i(t).filter(function(){var t=this;return s.some.call(n,function(e){return i.contains(e,t)})}):1==this.length?i(x.qsa(this[0],t)):this.map(function(){return x.qsa(this,t)})},closest:function(t,e){var n=this[0],s=!1;for("object"==typeof t&&(s=i(t));n&&!(s?s.indexOf(n)>=0:x.matches(n,t));)n=n!==e&&!I(n)&&n.parentNode;return i(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=i.map(n,function(t){return(t=t.parentNode)&&!I(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return z(e,t)},parent:function(t){return z(D(this.pluck("parentNode")),t)},children:function(t){return z(this.map(function(){return B(this)}),t)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(t){return z(this.map(function(t,e){return r.call(B(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return i.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=V(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=M(t);if(this[0]&&!e)var n=i(t).get(0),s=n.parentNode||this.length>1;return this.each(function(a){i(this).wrapAll(e?t.call(this,a):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){i(this[0]).before(t=i(t));for(var e;(e=t.children()).length;)t=e.first();i(t).append(this)}return this},wrapInner:function(t){var e=M(t);return this.each(function(n){var s=i(this),a=s.contents(),r=e?t.call(this,n):t;a.length?a.wrapAll(r):s.append(r)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var n=i(this);(e===t?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(t){return i(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return i(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;i(this).empty().append(J(this,t,e,n))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?"":""+e})},attr:function(i,n){var s;return"string"==typeof i&&n===t?0==this.length||1!==this[0].nodeType?t:"value"==i&&"INPUT"==this[0].nodeName?this.val():!(s=this[0].getAttribute(i))&&i in this[0]?this[0][i]:s:this.each(function(t){if(1===this.nodeType)if(E(i))for(e in i)G(this,e,i[e]);else G(this,i,J(this,n,t,this.getAttribute(i)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&G(this,t)})},prop:function(e,i){return e=j[e]||e,i===t?this[0]&&this[0][e]:this.each(function(t){this[e]=J(this,i,t,this[e])})},data:function(e,i){e="data-"+e.replace(v,"-$1").toLowerCase();var n=this[0];if(n._data_cache||(n._data_cache={}),i===t){var s=n._data_cache[e]||(n._data_cache[e]=W(n.getAttribute(e)));return s}return n._data_cache[e]=i,M(i)||x.isZ(i)?this:this.attr(e,i)},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=J(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=i(this),s=J(this,t,e,n.offset()),a=n.offsetParent().offset(),r={top:s.top-a.top,left:s.left-a.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,n){if(arguments.length<2){var s=this[0],a=getComputedStyle(s,"");if(!s)return;if("string"==typeof t)return s.style[q(t)]||a.getPropertyValue(t);if(A(t)){var r={};return i.each(A(t)?t:[t],function(t,e){r[e]=s.style[q(e)]||a.getPropertyValue(e)}),r}}var l="";if("string"==C(t))n||0===n?l=R(t)+":"+H(t,n):this.each(function(){this.style.removeProperty(R(t))});else for(e in t)t[e]||0===t[e]?l+=R(e)+":"+H(e,t[e])+";":this.each(function(){this.style.removeProperty(R(e))});return this.each(function(){this.style.cssText+=";"+l})},index:function(t){return t?this.indexOf(i(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?s.some.call(this,function(t){return this.test(X(t))},U(t)):!1},addClass:function(t){return t?this.each(function(e){n=[];var s=X(this),a=J(this,t,e,s);a.split(/\s+/g).forEach(function(t){i(this).hasClass(t)||n.push(t)},this),n.length&&X(this,s+(s?" ":"")+n.join(" "))}):this},removeClass:function(e){return this.each(function(i){return e===t?X(this,""):(n=X(this),J(this,e,i,n).split(/\s+/g).forEach(function(t){n=n.replace(U(t)," ")}),void X(this,n.trim()))})},toggleClass:function(e,n){return e?this.each(function(s){var a=i(this),r=J(this,e,s,X(this));r.split(/\s+/g).forEach(function(e){(n===t?!a.hasClass(e):n)?a.addClass(e):a.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var i="scrollTop"in this[0];return e===t?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var i="scrollLeft"in this[0];return e===t?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),s=p.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(i(t).css("margin-top"))||0,n.left-=parseFloat(i(t).css("margin-left"))||0,s.top+=parseFloat(i(e[0]).css("border-top-width"))||0,s.left+=parseFloat(i(e[0]).css("border-left-width"))||0,{top:n.top-s.top,left:n.left-s.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||l.body;t&&!p.test(t.nodeName)&&"static"==i(t).css("position");)t=t.offsetParent;return t})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(e){var n=e.replace(/./,function(t){return t[0].toUpperCase()});i.fn[e]=function(s){var a,r=this[0];return s===t?S(r)?r["inner"+n]:I(r)?r.documentElement["scroll"+n]:(a=this.offset())&&a[e]:this.each(function(t){r=i(this),r.css(e,J(this,s,t,r[e]()))})}}),g.forEach(function(t,e){var n=e%2;i.fn[t]=function(){var t,a,s=i.map(arguments,function(e){return t=C(e),"object"==t||"array"==t||null==e?e:x.fragment(e)}),r=this.length>1;return s.length<1?this:this.each(function(t,l){a=n?l:l.parentNode,l=0==e?l.nextSibling:1==e?l.firstChild:2==e?l:null,s.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!a)return i(t).remove();Y(a.insertBefore(t,l),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},i.fn[n?t+"To":"insert"+(e?"Before":"After")]=function(e){return i(e)[t](this),this}}),x.Z.prototype=i.fn,x.uniq=D,x.deserializeValue=W,i.zepto=x,i}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function u(t){return t._zid||(t._zid=e++)}function m(t,e,i,n){if(e=h(e),e.ns)var s=p(e.ns);return(r[u(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!s.test(t.ns)||i&&u(t.fn)!==u(i)||n&&t.sel!=n)})}function h(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function p(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function v(t,e){return t.del&&!o&&t.e in d||!!e}function f(t){return c[t]||o&&d[t]||t}function g(e,n,s,a,l,o,d){var m=u(e),p=r[m]||(r[m]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return t(document).ready(s);var r=h(n);r.fn=s,r.sel=l,r.e in c&&(s=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?r.fn.apply(this,arguments):void 0}),r.del=o;var u=o||s;r.proxy=function(t){if(t=T(t),!t.isImmediatePropagationStopped()){t.data=a;var n=u.apply(e,t._args==i?[t]:[t].concat(t._args));return n===!1&&(t.preventDefault(),t.stopPropagation()),n}},r.i=p.length,p.push(r),"addEventListener"in e&&e.addEventListener(f(r.e),r.proxy,v(r,d))})}function b(t,e,i,n,s){var a=u(t);(e||"").split(/\s/).forEach(function(e){m(t,e,i,n).forEach(function(e){delete r[a][e.i],"removeEventListener"in t&&t.removeEventListener(f(e.e),e.proxy,v(e,s))})})}function T(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each($,function(t,i){var s=n[t];e[t]=function(){return this[i]=_,s&&s.apply(n,arguments)},e[i]=y}),(n.defaultPrevented!==i?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=_)),e}function k(t){var e,n={originalEvent:t};for(e in t)w.test(e)||t[e]===i||(n[e]=t[e]);return T(n,t)}var i,e=1,n=Array.prototype.slice,s=t.isFunction,a=function(t){return"string"==typeof t},r={},l={},o="onfocusin"in window,d={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents",t.event={add:g,remove:b},t.proxy=function(e,i){if(s(e)){var n=function(){return e.apply(i,arguments)};return n._zid=u(e),n}if(a(i))return t.proxy(e[i],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var _=function(){return!0},y=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,$={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,r,l,o,d){var c,u,m=this;return e&&!a(e)?(t.each(e,function(t,e){m.on(t,r,l,e,d)}),m):(a(r)||s(o)||o===!1||(o=l,l=r,r=i),(s(l)||l===!1)&&(o=l,l=i),o===!1&&(o=y),m.each(function(i,s){d&&(c=function(t){return b(s,t.type,o),o.apply(this,arguments)}),r&&(u=function(e){var i,a=t(e.target).closest(r,s).get(0);return a&&a!==s?(i=t.extend(k(e),{currentTarget:a,liveFired:s}),(c||o).apply(a,[i].concat(n.call(arguments,1)))):void 0}),g(s,e,o,l,r,u||c)}))},t.fn.off=function(e,n,r){var l=this;return e&&!a(e)?(t.each(e,function(t,e){l.off(t,n,e)}),l):(a(n)||s(r)||r===!1||(r=n,n=i),r===!1&&(r=y),l.each(function(){b(this,e,r,n)}))},t.fn.trigger=function(e,i){return e=a(e)||t.isPlainObject(e)?t.Event(e):T(e),e._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,i){var n,s;return this.each(function(r,l){n=k(a(e)?t.Event(e):e),n._args=i,n.target=l,t.each(m(l,e.type||e),function(t,e){return s=e.proxy(n),n.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){a(t)||(e=t,t=e.type);var i=document.createEvent(l[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];return i.initEvent(t,n,!0),T(i)}}(Zepto),function(t){function u(e,i,n){var s=t.Event(i);return t(e).trigger(s,n),!s.isDefaultPrevented()}function m(t,e,n,s){return t.global?u(e||i,n,s):void 0}function h(e){e.global&&0===t.active++&&m(e,null,"ajaxStart")}function p(e){e.global&&!--t.active&&m(e,null,"ajaxStop")}function v(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||m(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void m(e,i,"ajaxSend",[t,e])}function f(t,e,i,n){var s=i.context,a="success";i.success.call(s,t,a,e),n&&n.resolveWith(s,[t,a,e]),m(i,s,"ajaxSuccess",[e,i,t]),b(a,e,i)}function g(t,e,i,n,s){var a=n.context;n.error.call(a,i,e,t),s&&s.rejectWith(a,[i,e,t]),m(n,a,"ajaxError",[i,n,t||e]),b(e,i,n)}function b(t,e,i){var n=i.context;i.complete.call(n,e,t),m(i,n,"ajaxComplete",[e,i]),p(i)}function _(){}function y(t){return t&&(t=t.split(";",2)[0]),t&&(t==d?"html":t==o?"json":r.test(t)?"script":l.test(t)&&"xml")||"text"}function w(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function $(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void 0)}function T(e,i,n,s){return t.isFunction(i)&&(s=n,n=i,i=void 0),t.isFunction(n)||(s=n,n=void 0),{url:e,data:i,success:n,dataType:s}}function x(e,i,n,s){var a,r=t.isArray(i),l=t.isPlainObject(i);t.each(i,function(i,o){a=t.type(o),s&&(i=n?s:s+"["+(l||"object"==a||"array"==a?i:"")+"]"),!s&&r?e.add(o.name,o.value):"array"==a||!n&&"object"==a?x(e,o,n,i):e.add(i,o)})}var n,s,e=0,i=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,r=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,o="application/json",d="text/html",c=/^\s*$/;t.active=0,t.ajaxJSONP=function(n,s){if(!("type"in n))return t.ajax(n);var d,m,a=n.jsonpCallback,r=(t.isFunction(a)?a():a)||"jsonp"+ ++e,l=i.createElement("script"),o=window[r],c=function(e){t(l).triggerHandler("error",e||"abort")},u={abort:c};return s&&s.promise(u),t(l).on("load error",function(e,i){clearTimeout(m),t(l).off().remove(),"error"!=e.type&&d?f(d[0],u,n,s):g(null,i||"error",u,n,s),window[r]=o,d&&t.isFunction(o)&&o(d[0]),o=d=void 0}),v(u,n)===!1?(c("abort"),u):(window[r]=function(){d=arguments},l.src=n.url.replace(/\?(.+)=\?/,"?$1="+r),i.head.appendChild(l),n.timeout>0&&(m=setTimeout(function(){c("timeout")},n.timeout)),u)},t.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:o,xml:"application/xml, text/xml",html:d,text:"text/plain"},crossDomain:!0,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i=t.extend({},e||{}),a=t.Deferred&&t.Deferred();for(n in t.ajaxSettings)void 0===i[n]&&(i[n]=t.ajaxSettings[n]);h(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),$(i),i.cache===!1&&(i.url=w(i.url,"_="+Date.now()));var r=i.dataType,l=/\?.+=\?/.test(i.url);if("jsonp"==r||l)return l||(i.url=w(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),t.ajaxJSONP(i,a);var T,o=i.accepts[r],d={},u=function(t,e){d[t.toLowerCase()]=[t,e]},m=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,p=i.xhr(),b=p.setRequestHeader;if(a&&a.promise(p),i.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",o||"*/*"),(o=i.mimeType||o)&&(o.indexOf(",")>-1&&(o=o.split(",",2)[0]),p.overrideMimeType&&p.overrideMimeType(o)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&u("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(s in i.headers)u(s,i.headers[s]);if(p.setRequestHeader=u,p.onreadystatechange=function(){if(4==p.readyState){p.onreadystatechange=_,clearTimeout(T);var e,n=!1;if(p.status>=200&&p.status<300||304==p.status||0==p.status&&"file:"==m){r=r||y(i.mimeType||p.getResponseHeader("content-type")),e=p.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=p.responseXML:"json"==r&&(e=c.test(e)?null:t.parseJSON(e))}catch(s){n=s}n?g(n,"parsererror",p,i,a):f(e,p,i,a)}else g(p.statusText||null,p.status?"error":"abort",p,i,a)}},v(p,i)===!1)return p.abort(),g(null,"abort",p,i,a),p;if(i.xhrFields)for(s in i.xhrFields)p[s]=i.xhrFields[s];var k="async"in i?i.async:!0;p.open(i.type,i.url,k,i.username,i.password);for(s in d)b.apply(p,d[s]);return i.timeout>0&&(T=setTimeout(function(){p.onreadystatechange=_,p.abort(),g(null,"timeout",p,i,a)},i.timeout)),p.send(i.data?i.data:null),p},t.get=function(){return t.ajax(T.apply(null,arguments))},t.post=function(){var e=T.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=T.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var l,s=this,r=e.split(/\s/),o=T(e,i,n),d=o.success;return r.length>1&&(o.url=r[0],l=r[1]),o.success=function(e){s.html(l?t("<div>").html(e.replace(a,"")).find(l):e),d&&d.apply(s,arguments)},t.ajax(o),this};var k=encodeURIComponent;t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(k(t)+"="+k(null===e||void 0===e?"":e))},x(i,t,e),i.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var i,e=[];return t([].slice.call(this.get(0).elements)).each(function(){i=t(this);var n=i.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&e.push({name:i.attr("name"),value:i.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(Zepto),define&&define("zepto",[],function(){return Zepto});!function(t){function o(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"}function d(){if(a=null,e.last){var i=t.Event("longTap");i.cancelTouch=u,e.el.trigger(i)}}function c(){a&&clearTimeout(a),a=null}function u(){i&&clearTimeout(i),n&&clearTimeout(n),s&&clearTimeout(s),a&&clearTimeout(a),i=n=s=a=null,e={}}var i,n,s,a,e={},r=750;t(document).ready(function(){var n,l,p,m=0,h=0,v="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];t(document).on(v[0],function(s){m=h=0,p="mousedown"==s.type?s:s.touches[0],s.touches&&1===s.touches.length&&e.x2&&(e.x2=void 0,e.y2=void 0),n=Date.now(),l=n-(e.last||n),e.el=t(s.target),i&&clearTimeout(i),e.x1=p.pageX,e.y1=p.pageY,l>0&&250>=l&&(e.isDoubleTap=!0),e.last=n,a=setTimeout(d,r)}).on(v[1],function(t){("mousemove"!=t.type||"last"in e)&&(p="mousemove"==t.type?t:t.touches[0],c(),e.x2=p.pageX,e.y2=p.pageY,m+=Math.abs(e.x1-e.x2),h+=Math.abs(e.y1-e.y2))}).on(v[2],function(n){if(c(),e.x2&&Math.abs(e.x1-e.x2)>30||e.y2&&Math.abs(e.y1-e.y2)>30)s=setTimeout(function(){e.el.trigger("swipe"),e.el.trigger("swipe"+o(e.x1,e.x2,e.y1,e.y2)),e={}},0);else if("last"in e)if(30>m&&30>h&&!n.cancelTap&&e.el[0]===n.target){var a=t.Event("tap");a.cancelTouch=u,e.el.trigger(a),e.isDoubleTap?(e.el&&e.el.trigger("doubleTap"),e={}):i=setTimeout(function(){i=null,e.el&&e.el.trigger("singleTap"),e={}},250)}else e={};m=h=0}).on(v[3],u),t(window).on("scroll",u)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);!function(t,e){function y(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function w(t){return n?n+t:t.toLowerCase()}var n,c,u,m,h,p,v,f,g,b,i="",r={Webkit:"webkit",Moz:"",O:"o"},l=window.document,o=l.createElement("div"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};t.each(r,function(t,s){return o.style[t+"TransitionProperty"]!==e?(i="-"+t.toLowerCase()+"-",n=s,!1):void 0}),c=i+"transform",_[u=i+"transition-property"]=_[m=i+"transition-duration"]=_[p=i+"transition-delay"]=_[h=i+"transition-timing-function"]=_[v=i+"animation-name"]=_[f=i+"animation-duration"]=_[b=i+"animation-delay"]=_[g=i+"animation-timing-function"]="",t.fx={off:n===e&&o.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:w("TransitionEnd"),animationEnd:w("AnimationEnd")},t.fn.animate=function(i,n,s,a,r){return t.isFunction(n)&&(a=n,s=e,n=e),t.isFunction(s)&&(a=s,s=e),t.isPlainObject(n)&&(s=n.easing,a=n.complete,r=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(i,n,s,a,r)},t.fn.anim=function(i,n,s,a,r){var l,w,k,o={},T="",$=this,x=t.fx.transitionEnd,q=!1;if(n===e&&(n=t.fx.speeds._default/1e3),r===e&&(r=0),t.fx.off&&(n=0),"string"==typeof i)o[v]=i,o[f]=n+"s",o[b]=r+"s",o[g]=s||"linear",x=t.fx.animationEnd;else{w=[];for(l in i)d.test(l)?T+=l+"("+i[l]+") ":(o[l]=i[l],w.push(y(l)));T&&(o[c]=T,w.push(c)),n>0&&"object"==typeof i&&(o[u]=w.join(", "),o[m]=n+"s",o[p]=r+"s",o[h]=s||"linear")}return k=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(x,k)}else t(this).unbind(x,k);q=!0,t(this).css(_),a&&a.call(this)},n>0&&(this.bind(x,k),setTimeout(function(){q||k.call($)},1e3*n+25)),this.size()&&this.get(0).clientLeft,this.css(o),0>=n&&setTimeout(function(){$.each(function(){k.call(this)})},0),this},o=null}(Zepto);!function(t,e){t.matchMedia=function(){var e=0,i="sl-media-detect",n=t.fx.transitionEnd,s=t.fx.cssPrefix,a=t("<style></style>").append("."+i+"{"+s+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(s){var l,d,r=i+e++,o=[],c=1,u=[],m=0,h=function(t,e){-1==u.indexOf(t)&&(u.push(t),a.append("@media "+t+" { #"+r+" { width: "+c+"px; } }\n"),c++,("undefined"==typeof e||e)&&m++)};return h(s,!1),l=t('<div class="'+i+'" id="'+r+'"></div>').appendTo("body").on(n,function(){return m>0?void m--:(d.matches=1===l.width(),void t.each(o,function(e,i){t.isFunction(i)&&i.call(d,d)}))}),d={append:h,matches:1===l.width(),media:s,addListener:function(t){return o.push(t),this},removeListener:function(t){var e=o.indexOf(t);return~e&&o.splice(e,1),this}}}}()}(Zepto);!function(t,e){t.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},t(function(){t.matchMedia(t.mediaQuery.ortchange).addListener(function(){t(window).trigger("ortchange")}),t.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),t(window).trigger("heightchange")})})}(Zepto);define("util",[],function(){var d,t=Array.prototype,e=t.slice,i=t.concat,n=navigator.userAgent,a=n.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),s=n.match(/MSIE (\d+)/i),r=n.match(/(Android);?[\s\/]+([\d.]+)?/),l=!!r,o=0;a?d=a[2].split("_"):r?d=r[2].split("."):s&&(d=s[1].split("."));var c=function(t,e){var i="0000000000000000"+t;return i.substr(i.length-(e||2))},u={isInApp:/SLApp/.test(n),ios:!!a,ie:!!s,android:l,osVersion:d?parseFloat(d[0]+"."+d[1]):0,isInWechat:/micromessenger/i.test(navigator.userAgent),guid:function(){return++o},isFalse:function(t){return!t||$.isArray(t)&&!t||"object"==typeof t&&u.isEmptyObject(t)},isTrue:function(t){return!this.isFalse(t)},isEmptyObject:function(t){for(var e in t)return!1;return!0},extend:function(t){var e=this,i=function(){e.apply(this,arguments)},n=function(){this.constructor=i};n.prototype=e.prototype,i.prototype=new n;for(var a in t)i.prototype[a]=t[a];for(var a in e)i[a]=e[a];return i},random:function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},log:function(t){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;overflow:auto"></div>').appendTo("body")),this.$log.html(t+"|"+this.$log.html())},indexOf:function(t,e){for(var i="function"==typeof e,n=t.length,a=0;n>a;a++)if(i?e(t[a],a):t[a]==e)return a;return-1},lastIndexOf:function(t,e){for(var i="function"==typeof e,n=t.length-1;n>=0;n--)if(i?e(t[n],n):t[n]==e)return n;return-1},first:function(t,e){for(var i,n=0,a=t.length;a>n;n++)if(i=t[n],e(i,n))return i;return null},find:function(t,e){for(var n,i=[],a=0,s=t.length;s>a;a++)n=t[a],e(n,a)&&i.push(n);return i},select:function(t,e){for(var i=[],n=t.length,a=0;n>a;a++)i.push(e(t[a],a));return i},pick:function(t,n){var s,a={};if(null==t)return a;if("function"==typeof n)for(s in t){var r=t[s];n(r,s,t)&&(a[s]=r)}else for(var l=i.apply([],e.call(arguments,1)),o=0,d=l.length;d>o;o++)s=l[o],s in t&&(a[s]=t[s]);return a},pad:c,formatMoney:function(t){return(t+"").replace(/(\d{3})+(\.|$)/,function(t,e){return t.replace(/\d{3}/g,function(t){return","+t})}).replace(/^,/,"")},deepValue:function(t,e){"string"==typeof e&&(e=e.split("."));for(var i=0,n=e.length;n>i;i++)t=t[e[i]];return t},format:function(t,e){var i=arguments;return t.replace(/\{(\d+)\}/g,function(t,e){return i[parseInt(e)+1]})},formatDate:function(t,e){if("string"==typeof t&&/^\/Date\(\d+\)\/$/.test(t))t=new Function("return new "+t.replace(/\//g,""))();else if("number"==typeof t)t=new Date(t);else if(!t)return"";var i=t.getFullYear()+"",n=t.getMonth()+1,a=t.getDate(),s=t.getHours(),r=t.getMinutes(),l=t.getSeconds(),o=t.getMilliseconds()+"0000";return(e||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,i).replace(/y{2}/,i.substr(2,2)).replace(/M{2}/,c(n)).replace(/M/,n).replace(/d{2,}/,c(a)).replace(/d/,t).replace(/H{2,}/i,c(s)).replace(/H/i,s).replace(/m{2,}/,c(r)).replace(/m/,r).replace(/s{2,}/,c(l)).replace(/s/,l).replace(/f+/,function(t){return o.substr(0,t.length)})},style:function(t){var e=document,i=e.getElementsByTagName("head")[0],n=e.createElement("style");n.type="text/css";try{n.appendChild(e.createTextNode(t))}catch(a){n.styleSheet.cssText=t}return i.appendChild(n),n},currency:function(t,e){return(void 0===e||null===e?"￥":e)+Math.round(100*parseFloat(t))/100},template:function(t,e){var i="var __p=[];var $data=obj||{};with($data){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(t,e){return"',"+e.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(t,e){return"');"+e.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',n=new Function("obj",i);return e?n(e):n},encodeHTML:function(t){return(""+t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(t){return t.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(t,e,i,n){if("undefined"==typeof e){var a=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null}if(null===typeof e){if(e=this.cookie(name),null==e)return;i=-1}if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),i=";expires="+s.toGMTString()}document.cookie=t+"="+escape(e)+(i||"")+";path="+(n||"/")},store:window.localStorage?function(t,e){return"undefined"==typeof e?JSON.parse(localStorage.getItem(t)):void(null===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},circlePoint:function(t,e,i,n){return{x:t+i*Math.cos(n*Math.PI/180),y:e+i*Math.sin(n*Math.PI/180)}},validateEmail:function(t){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(t)},validateMobile:function(t){return/^1[0-9]{10}$/.test(t)}};return u});define("util/md5",[],function(){function n(t){return w(c(_(t),t.length*i))}function c(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,a=-1732584194,s=271733878,r=0;r<t.length;r+=16){var l=i,o=n,d=a,c=s;i=m(i,n,a,s,t[r+0],7,-680876936),s=m(s,i,n,a,t[r+1],12,-389564586),a=m(a,s,i,n,t[r+2],17,606105819),n=m(n,a,s,i,t[r+3],22,-1044525330),i=m(i,n,a,s,t[r+4],7,-176418897),s=m(s,i,n,a,t[r+5],12,1200080426),a=m(a,s,i,n,t[r+6],17,-1473231341),n=m(n,a,s,i,t[r+7],22,-45705983),i=m(i,n,a,s,t[r+8],7,1770035416),s=m(s,i,n,a,t[r+9],12,-1958414417),a=m(a,s,i,n,t[r+10],17,-42063),n=m(n,a,s,i,t[r+11],22,-1990404162),i=m(i,n,a,s,t[r+12],7,1804603682),s=m(s,i,n,a,t[r+13],12,-40341101),a=m(a,s,i,n,t[r+14],17,-1502002290),n=m(n,a,s,i,t[r+15],22,1236535329),i=h(i,n,a,s,t[r+1],5,-165796510),s=h(s,i,n,a,t[r+6],9,-1069501632),a=h(a,s,i,n,t[r+11],14,643717713),n=h(n,a,s,i,t[r+0],20,-373897302),i=h(i,n,a,s,t[r+5],5,-701558691),s=h(s,i,n,a,t[r+10],9,38016083),a=h(a,s,i,n,t[r+15],14,-660478335),n=h(n,a,s,i,t[r+4],20,-405537848),i=h(i,n,a,s,t[r+9],5,568446438),s=h(s,i,n,a,t[r+14],9,-1019803690),a=h(a,s,i,n,t[r+3],14,-187363961),n=h(n,a,s,i,t[r+8],20,1163531501),i=h(i,n,a,s,t[r+13],5,-1444681467),s=h(s,i,n,a,t[r+2],9,-51403784),a=h(a,s,i,n,t[r+7],14,1735328473),n=h(n,a,s,i,t[r+12],20,-1926607734),i=p(i,n,a,s,t[r+5],4,-378558),s=p(s,i,n,a,t[r+8],11,-2022574463),a=p(a,s,i,n,t[r+11],16,1839030562),n=p(n,a,s,i,t[r+14],23,-35309556),i=p(i,n,a,s,t[r+1],4,-1530992060),s=p(s,i,n,a,t[r+4],11,1272893353),a=p(a,s,i,n,t[r+7],16,-155497632),n=p(n,a,s,i,t[r+10],23,-1094730640),i=p(i,n,a,s,t[r+13],4,681279174),s=p(s,i,n,a,t[r+0],11,-358537222),a=p(a,s,i,n,t[r+3],16,-722521979),n=p(n,a,s,i,t[r+6],23,76029189),i=p(i,n,a,s,t[r+9],4,-640364487),s=p(s,i,n,a,t[r+12],11,-421815835),a=p(a,s,i,n,t[r+15],16,530742520),n=p(n,a,s,i,t[r+2],23,-995338651),i=v(i,n,a,s,t[r+0],6,-198630844),s=v(s,i,n,a,t[r+7],10,1126891415),a=v(a,s,i,n,t[r+14],15,-1416354905),n=v(n,a,s,i,t[r+5],21,-57434055),i=v(i,n,a,s,t[r+12],6,1700485571),s=v(s,i,n,a,t[r+3],10,-1894986606),a=v(a,s,i,n,t[r+10],15,-1051523),n=v(n,a,s,i,t[r+1],21,-2054922799),i=v(i,n,a,s,t[r+8],6,1873313359),s=v(s,i,n,a,t[r+15],10,-30611744),a=v(a,s,i,n,t[r+6],15,-1560198380),n=v(n,a,s,i,t[r+13],21,1309151649),i=v(i,n,a,s,t[r+4],6,-145523070),s=v(s,i,n,a,t[r+11],10,-1120210379),a=v(a,s,i,n,t[r+2],15,718787259),n=v(n,a,s,i,t[r+9],21,-343485551),i=g(i,l),n=g(n,o),a=g(a,d),s=g(s,c)}return Array(i,n,a,s)}function u(t,e,i,n,a,s){return g(b(g(g(e,t),g(n,s)),a),i)}function m(t,e,i,n,a,s,r){return u(e&i|~e&n,t,e,a,s,r)}function h(t,e,i,n,a,s,r){return u(e&n|i&~n,t,e,a,s,r)}function p(t,e,i,n,a,s,r){return u(e^i^n,t,e,a,s,r)}function v(t,e,i,n,a,s,r){return u(i^(e|~n),t,e,a,s,r)}function g(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function b(t,e){return t<<e|t>>>32-e}function _(t){for(var e=Array(),n=(1<<i)-1,a=0;a<t.length*i;a+=i)e[a>>5]|=(t.charCodeAt(a/i)&n)<<a%32;return e}function w(e){for(var i=t?"0123456789ABCDEF":"0123456789abcdef",n="",a=0;a<4*e.length;a++)n+=i.charAt(e[a>>2]>>a%4*8+4&15)+i.charAt(e[a>>2]>>a%4*8&15);return n}var t=0,i=8;return{md5:n}});define("common",["util","$","bridge"],function(t,e,i){var n=t("util"),a=t("$"),s=t("bridge");e.isFavorite=function(t,e){var i=n.store("user");if(i&&i.Favorite){var a=JSON.parse(i.Favorite);if(a=a[t])return-1!=n.indexOf(a,e)}return!1},e.favorite=function(t,e,i){var r=n.store("user");if(r){var l,o;r.Favorite?l=JSON.parse(r.Favorite):r.Favorite=l={},l[t]?o=l[t]:l[t]=o=[];var d=n.indexOf(o,e);-1!=d?i||o.splice(d,1):i&&o.push(e),r.Favorite=JSON.stringify(l),a.post(s.url("/api/user/update"),{UserID:r.ID,Auth:r.Auth,Favorite:r.Favorite,FavoriteID:e,FavoriteType:t,IsFavorite:i}),n.store("user",r)}return!1}});define("bridge",["$","util"],function(t,e,i){var n=t("$"),a=t("util"),s=navigator.userAgent,r=a.ios,o=a.android,c=(Array.prototype.slice,n(window)),u=n('meta[name="api-base-url"]').attr("content"),m={};window.hybridFunctions=m,window.trigger=function(){n.fn.trigger.apply(c,arguments)},window.callJS=function(t){c.trigger(t.method,t.params)};var p=0,v=function(t,e,i){var n,a;"object"==typeof t?i=n.callback:("function"==typeof e&&(i=e,e=null),n={method:t,params:e}),"function"==typeof i&&(a="hybridCallback"+ ++p,n.callback=a,m[a]=function(){i.apply(null,arguments),delete m[a]}),alert("slapp://"+JSON.stringify(n))},f={isInApp:/SLApp/.test(s),isAndroid:o,android:o,ios:r,versionName:"1.0",exec:v,tip:function(t){v("tip",t+"")},openInApp:function(t){v("openInApp",t+"")},open:function(t){v("open",t+"")},pickImage:function(t){v("pickImage",t)},takePhoto:function(t){setTimeout(function(){v("takePhoto",t)},0)},queryThumbnailList:function(t){v("queryThumbnailList",t)},pickColor:function(t){v("pickColor",t)},getDeviceToken:function(t){v("getDeviceToken",t)},getLocation:function(t){v("getLocation",t)},pay:function(t,e){v("pay",t,e)},share:function(){v("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(t){return/^http\:\/\//.test(t)?t:u+t},post:function(t,e,i,n){n="function"==typeof i?i:n,i="function"==typeof i?null:i,v("post",{url:this.url(t),files:i,data:e},n)},exit:function(){v("exit")},update:function(t,e,i){v("updateApp",{downloadUrl:t,versionName:e},i)}};return f.hasStatusBar=f.isInApp&&a.ios&&a.osVersion>=7,f});define("graphics/matrix2d",[],function(){function t(t,e,i,n,s,a){this.setValues(t,e,i,n,s,a)}var e=t.prototype;return t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,n,s,a){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=s||0,this.ty=a||0,this},e.append=function(t,e,i,n,s,a){var r=this.a,o=this.b,l=this.c,d=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=r*t+l*e,this.b=o*t+d*e,this.c=r*i+l*n,this.d=o*i+d*n),this.tx=r*s+l*a+this.tx,this.ty=o*s+d*a+this.ty,this},e.prepend=function(t,e,i,n,s,a){var r=this.a,o=this.c,l=this.tx;return this.a=t*r+i*this.b,this.b=e*r+n*this.b,this.c=t*o+i*this.d,this.d=e*o+n*this.d,this.tx=t*l+i*this.ty+s,this.ty=e*l+n*this.ty+a,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,n,s,a,r,o,l,d){if(a%360)var c=a*t.DEG_TO_RAD,u=Math.cos(c),m=Math.sin(c);else u=1,m=0;return r||o?(r*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),e,i),this.append(u*n,m*n,-m*s,u*s,0,0)):this.append(u*n,m*n,-m*s,u*s,e,i),(l||d)&&(this.tx-=l*this.a+d*this.c,this.ty-=l*this.b+d*this.d),this},e.prependTransform=function(e,i,n,s,a,r,o,l,d){if(a%360)var c=a*t.DEG_TO_RAD,u=Math.cos(c),m=Math.sin(c);else u=1,m=0;return(l||d)&&(this.tx-=l,this.ty-=d),r||o?(r*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(u*n,m*n,-m*s,u*s,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),e,i)):this.prepend(u*n,m*n,-m*s,u*s,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),s=this.a,a=this.b;return this.a=s*i+this.c*n,this.b=a*i+this.d*n,this.c=-s*n+this.c*i,this.d=-a*n+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a),s=Math.abs(1-i/n);return 1e-5>s?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"},t});define("graphics/tween",[],function(t,e,i){i.exports={linear:function(t,e,i,n){return i*t/n+e},ease:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n,a,s){if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s))+e},easeOutElastic:function(t,e,i,n,a,s){if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/s)+i+e},easeInOutElastic:function(t,e,i,n,a,s){if(0==t)return e;if(2==(t/=n/2))return e+i;if(s||(s=.3*n*1.5),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+e:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)*.5+i+e},easeInBack:function(t,e,i,n,a){return void 0==a&&(a=1.70158),i*(t/=n)*t*((a+1)*t-a)+e},easeOutBack:function(t,e,i,n,a){return void 0==a&&(a=1.70158),i*((t=t/n-1)*t*((a+1)*t+a)+1)+e},easeInOutBack:function(t,e,i,n,a){return void 0==a&&(a=1.70158),(t/=n/2)<1?i/2*t*t*(((a*=1.525)+1)*t-a)+e:i/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},easeInBounce:function(t,e,i,n){return i-Tween.Bounce.easeOut(n-t,0,i,n)+e},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,n){return n/2>t?.5*Tween.easeInOutBounce(2*t,0,i,n)+e:.5*Tween.easeInOutBounce(2*t-n,0,i,n)+.5*i+e}}});define("core/base",[],function(t,e,i){Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Date.now||(Date.now=function(){return+new Date});var n=function(){var t=this,e=Array.prototype.slice.call(arguments),i=e.shift();if(i)for(var n in i)t.options[n]=i[n];t.initialize.apply(t,e),t.options.initialize&&t.options.initialize.apply(t,e)};n.prototype={options:{},initialize:function(){}},n.extend=function(t,e){var a,i=this;"function"!=typeof t&&(e=t,t=function(){i.apply(this,arguments)});var s=function(){this.constructor=t};if(s.prototype=i.prototype,t.prototype=new s,a=e.options,"undefined"!=typeof a){for(var r in a)t.prototype.options[r]=a[r];delete e.options}for(var r in e)t.prototype[r]=e[r];return t.__super__=i.prototype,t.extend=n.extend,t},window.sl=window.slan={},i.exports=n});define("core/promise",["./linklist"],function(t,e,i){var n=t("./linklist"),s=Array.prototype.slice,a=/^\$(\d+)$/,r=function(t,e,i){for(var o,n=[],s=0,r=t.length;r>s;s++)o=t[s],n.push("string"==typeof o?a.test(o)?e[parseInt(o.match(a)[1])]:o.replace(/^\$\$/,"$"):o);return n.push(i),n},o=function(t,e,i){if(!(this instanceof o))return new o(t,e,i);var s=this;this.queue=new n,this.state=2,this.resolveSelf=function(){s.resolve.apply(s,arguments)},e||"number"!=typeof t?t&&(this.state=0,this.then(t,e,i)):(this.state=0,this.start(t))};o.prototype={reject:function(t){this.resolve(t||"unknow error",null)},resolve:function(){var n,a,r,t=this,e=s.call(arguments),i=t.queue.shift();if(i)if(t.state=1,n=i[0],a=i[1],n instanceof o)n.then(t.resolveSelf);else if("function"==typeof n)r=n.apply(a,e),r instanceof o?r!==t&&r.then(t.resolveSelf):t.resolve(null,r);else if(n instanceof Array)for(var l=[],d=[],c=0,u=0,m=n.length;m>u;u++)!function(i,n,s){"function"==typeof i&&(i=i.apply(a,e)),i instanceof o?i.then(function(e,i){e&&(l[n]=e),c++,d[n]=i,c>=s&&t.resolve(l,d)}):(c++,d[n]=i,c>=s&&t.resolve(null,d))}(n[u],u,m);else t.resolve(null,e);else t.state=0;return t},when:function(t,e){return t instanceof Array||(t=[t]),this.queue.append([t,e||this]),1!=this.state&&this.resolve(),this},map:function(t,e,i){var n=this,s=function(){var i=arguments;return n._count=t.length,n.result=[],n.errors=[],t.forEach(function(t,s){t instanceof Array||(t=[t]),e.apply(this,r(t,i,function(t,e){n.next(s,t,e)}))}),n};return n.queue.append([s,i||this]),n},each:function(t,e,i){var n=this,s=function(){return n._count=t.length,n.result=[],n.errors=[],t.forEach(function(t,i){e.apply(this,[i,t])}),n};return n.queue.append([s,i||this]),n},start:function(t){var e=this,i=function(){return e._count=t,e.result=[],e.errors=[],e};return e.queue.append([i,this]),e},next:function(t,e,i){this._count--,e&&(this.errors[t]=e),this.result[t]=i,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(t){var e=this;return function(){e.then(s.call(arguments),t,this)}},then:function(t,e,i){var s,n=this;return t instanceof Array?(s=e,e=function(){return s.apply(this,r(t,arguments,n.resolveSelf)),n}):(i=e,e=t,t=null),n.queue.append([e,i||this]),n.state||n.resolve(),n}},o.resolve=function(){return(new o).resolve()},i.exports=o});define("core/linklist",[],function(t,e,i){var n=function(){this._idlePrev=this,this._idleNext=this},s=function(t){return t._idlePrev==t?null:t._idlePrev},a=function(t){t._idleNext&&(t._idleNext._idlePrev=t._idlePrev),t._idlePrev&&(t._idlePrev._idleNext=t._idleNext),t._idleNext=null,t._idlePrev=null};n.prototype={length:0,init:function(t){t={data:t},this.list=t,this.length=1,t._idleNext=t,t._idlePrev=t},get:function(t){var e=null;return this.each(function(i){return t(i)===!0?(e=i,!1):void 0}),e},find:function(t){var e=[];return this.each(function(i){t(i)===!0&&e.push(i)}),e},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(t){for(var i,e=this._idlePrev;e!=this&&(i=e._idlePrev,t.call(e,e.data)!==!1);)e=i},next:s,append:function(t,e){return e||(t={data:t}),t._idleNext=this._idleNext,this._idleNext._idlePrev=t,t._idlePrev=this,this._idleNext=t,this.length++,t},contains:function(t){var e=!1;return this.each(function(i){return t===i?(e=!0,!1):void 0}),e},shift:function(){var t=this._idlePrev;return t!=this?(this._remove(t),t.data):null},_remove:function(t){0!=this.length&&(this.length--,a(t))},remove:function(t){var e=this;e.each(function(i){return i===t?(e._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},i.exports=n});define("core/event",["$","./base"],function(t,e,i){function d(t,e,i){(t||"").split(r).forEach(function(t){i(t,e)})}function c(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function u(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function h(t,e,i,n){var s,a;return a=u(e),a.ns&&(s=c(a.ns)),t.filter(function(t){return!(!t||a.e&&t.e!==a.e||a.ns&&!s.test(t.ns)||i&&t.cb!==i&&t.cb._cb!==i||n&&t.ctx!==n)})}function m(t,e){return this instanceof m?(e&&n.extend(this,e),this.type=t,this):new m(t,e)}var n=t("$"),s=t("./base"),a=[].slice,r=/\s+/,o=function(){return!1},l=function(){return!0};return m.prototype={isDefaultPrevented:o,isPropagationStopped:o,preventDefault:function(){this.isDefaultPrevented=l},stopPropagation:function(){this.isPropagationStopped=l}},s.event={createEvent:m,on:function(t,e,i){var s,n=this;return e?(s=this._events||(this._events=[]),d(t,e,function(t,e){var a=u(t);a.cb=e,a.ctx=i,a.ctx2=i||n,a.id=s.length,s.push(a)}),this):this},one:function(t,e,i){var n=this;return e?(d(t,e,function(t,e){var s=function(){return n.off(t,s),e.apply(i||n,arguments)};s._cb=e,n.on(t,s,i)}),this):this},off:function(t,e,i){var n=this._events;return n?t||e||i?(d(t,e,function(t,e){h(n,t,e,i).forEach(function(t){delete n[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var i,n,s,r,o,e=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new m(t)),i=a.call(arguments,1),t.args=i,i.unshift(t),n=h(this._events,t.type))for(r=n.length;++e<r;)if((s=t.isPropagationStopped())||!1===(o=n[e]).cb.apply(o.ctx2,i)){s||(t.stopPropagation(),t.preventDefault());break}return this}},s.Event=m,s.event});define("core/view",["$","util","./base","./event"],function(t,e,i){var n=t("$"),s=t("util"),a=t("./base"),r=t("./event"),o=Array.prototype.slice,l=function(){var e,t=this,i=o.call(arguments),a=i.shift();t._bindListenTo=[],n.isPlainObject(a)?(e=a,a=null):e=i.shift(),t.options=n.extend({},t.options,e),t.options.className&&(t.className=t.options.className),t.options.el&&(t.el=t.options.el),t.cid=s.guid(),t.setElement(a||t.el),t.initialize.apply(t,i),t.options.initialize&&t.options.initialize.apply(t,i),t.on("Destroy",t.onDestroy)};l.prototype=Object.create(r),n.extend(l.prototype,{options:{},initialize:s.noop,setElement:function(t,e){return t&&(this.$el&&this.undelegateEvents(),this.$el=n(t),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),e!==!1&&this.delegateEvents()),this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(t,e){var i=this;if(e){var a=t.split(" "),r=a.shift().replace(/,/g,".delegateEvents"+i.cid+" ");e=n.proxy(n.isFunction(e)?e:i[e],i),a.length>0&&""!==a[0]?i.$el.on(r,a.join(" "),e):i.$el.on(r,e)}else for(var s in t)i.listen(s,t[s]);return i},listenTo:function(t){var e=o.apply(arguments),i=e[e.length-1];return"function"!=typeof t.on&&(t=n(t)),e[0]=t,e[e.length-1]=n.proxy(i,this),this._bindListenTo.push(o.apply(e)),e.shift().on.apply(t,e),this},$:function(t){return this.$el.find(t)},onDestroy:s.noop,destroy:function(){var i,e=(this.$el,this);n.each(this._bindListenTo,function(t,e){i=e.shift(),i.off.apply(i,e)}),e.undelegateEvents(),e.$el.remove(),e.trigger("Destroy")}}),l.extend=function(){var s,t=this,e=o.call(arguments),i=e[0];return"function"!=typeof i?(i=null,e.unshift({})):e[0]={},s=n.extend.apply(n,e),i=a.extend.apply(t,i?[i,s]:[s]),i.prototype.events=n.extend({},i.__super__.events,i.prototype.events),i.extend=arguments.callee,i},i.exports=l});define("core/model",["$","util","./base","./event"],function(t,e,i){var n=t("$"),s=t("util"),r=(t("./base"),t("./event")),o=Array.prototype.slice,l={date:s.formatDate,isFalse:function(t,e,i){return 1==arguments.length?s.isFalse(t):s.isFalse(t)?e:i},isTrue:function(t,e,i){return 1==arguments.length?s.isTrue(t):s.isTrue(t)?e:i},json:function(t){return JSON.stringify(t instanceof w||t instanceof T?t.data:t)},length:function(t){return t instanceof T?t.data.length:t&&t.length||0},join:function(t,e){return t instanceof T?t.data.join(e):t.join(e)},replace:function(t,e,i){return t.replace(e,i)},is:function(t,e){switch(e){case"array":return n.isArray(t);case"object":return n.isPlainObject(t);default:return typeof t==e}},equal:function(t,e,i,n){return 2==arguments.length?t==e:t==e?i:n},eval:function(t,e){for(var i={},n=this._evalCache||(this._evalCache={}),s=n[e]||(n[e]=new Function("$args","with($args){ return "+e+"}")),a=0,r=0,o=arguments.length;o>a;a++)1!=a&&(i["$"+r]=arguments[a],r++);return s.call(this,i)},lt:function(t,e){return e>t},lte:function(t,e){return e>=t},gt:function(t,e){return t>e},gte:function(t,e){return t>=e},choose:function(t,e,i){return t?e:i},or:function(t,e){return t||e},and:function(t,e){return t&&e},not:function(t){return!t},lowercase:function(t){return t.toLowerCase()},uppercase:function(t){return t.toUpperCase()},currency:function(t,e){return(e||"")+Math.round(100*parseFloat(t))/100},concat:function(){return o.call(arguments).join("")},round:function(t){return Math.round(t)},max:Math.max,min:Math.min,mul:function(t,e){return parseFloat(t)*parseFloat(e)},plus:function(t,e){return parseFloat(t)+parseFloat(e)},minus:function(t,e){return parseFloat(t)-parseFloat(e)},format:function(t){var e,i=arguments[1];return 2==arguments.length&&"object"==typeof t?e=t:(e=o.call(arguments),e.splice(1,1)),i.replace(/\{([_a-zA-Z0-9]+)\}/g,function(t,i){return e[i]})},"case":function(t){for(var e=o.call(arguments,1),i=0,n=e.length;n>i;i+=2)if(t==e[i])return e[i+1];return n%2==0?void 0:e[n-1]},listen:function(t,e,i,n,s,a,r){var o;if(n&&(o="_bind_filter"+s.prop+("number"==typeof n?n:"")+"_"+r,!e[o]&&(e[o]=!0)||!n[o]&&(n[o]=!0))){a=a.split(".");var d=a.pop(),c=a.length<=0?t:t.get(a.join("."))||t.set(a.join("."),{}).get(a);c.on("change"+(d?":"+d:""),function(){e._elAttr(n,s.prop,s.filter(l,e,e.data[i]))})}}},d=/\s*\|\s*([a-zA-Z_0-9]+)((?:\s*(?:\:|;)\s*\({0,1}\s*([a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')\){0,1})*)/g,c=/\s*\:\s*([a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')/g,u=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,h=function(t,e){var r,o,l,i="",n="var S=this;",s=0,a=0;return t.replace(d,function(t,d,h){i+="V=F."+d+"(V",h.replace(c,function(t,d){var c;u.test(d)?c=d:(r=d.split("."),o=r.shift(),!e||o!=e.alias&&!(l=e.modelAlias[o])?(c="M.root.data."+d,n+='if(E)F.listen(M.root,M,K,E,S,"'+d+'",'+s++ +");"):d==e.alias?(c="M.data",n+="if(E)F.listen(M.parent,M,K,E,S,M._key,"+s++ +");"):(o==e.alias&&(l=e.collectionName),d=r.join("."),c="A"+a++,n+="var "+c+';var P=M;while(P){if(P.key=="'+l+'^child"){if(E)F.listen(P,M,K,E,S,"'+d+'",'+s++ +");"+c+"=P.data."+d+";break;}P=P.parent.parent;}")),i+=","+c}),i+=");"}),i+="return V;",new Function("F","M","V","K","E",n+i)},m=function(t,e){return t.filter(e).add(t.find(e))},p=function(t,e){var i=e.split("."),n=i.shift();if(n==t.alias)return{collection:t.collectionName,variable:i.join(".")};var s=t.modelAlias[n];return s?{collection:s,variable:i.join(".")}:void 0},f=function(t){var e={isExp:"="==t[0],args:[]};return e.isExp?e.args.push(t.substr(1)):t.replace(c,function(t,i){e.args.push(i)}),e},v=/([a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})((?:\s*\|\s*filter\s*\:\s*.+?){0,1})(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/g,g=/\b([a-zA-Z_0-9-\.]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\|\s*[a-zA-Z_0-9]+(?:\s*\:\s*\({0,1}\s*(?:[a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')\){0,1})*)*)(\s|,|$)/g,b=/\b([a-zA-Z\s]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\:\s*(?:[a-zA-Z_0-9\.]+|'(?:\\'|[^'])*'))*|\s*=\s*(?:[a-zA-Z_0-9\.]+|'(?:\\'|[^'])*'))(\s|,|$)/g,y=function(t){this.count=0,this.repeats={},this.bindings={},this.events=[],this.eventNames=[],this.eventid=0,this.scan(t)};y.prototype.scan=function(t){{var o,i=this.repeats,s=this.bindings,a=this.events,r=this.eventNames,l=this.count,d=this.eventid;m(t,"[sn-repeat]").each(function(){var t=n(this),e=this,s=this.getAttribute("sn-repeat"),a=t.parents("[sn-repeat-alias]"),r={},l={};a.each(function(){var t=this.getAttribute("sn-repeat-name");r[this.getAttribute("sn-repeat-alias")]=t;var e=this.snIndexAlias;e&&(l[e]=t)}),s.replace(v,function(t,n,s,a,d,c){var m,u=a.split("."),h=u.length;1!==h&&(m=r[u[0]],m&&(u[0]=m+"^child",a=u.join("."))),e.setAttribute("sn-repeat-alias",n),e.setAttribute("sn-repeat-name",a),s&&(e.snIndexAlias=s,l[s]=a);var p=document.createElement("script");p.setAttribute("type","text/placeholder");var f,v={loopIndexAlias:l,collectionName:a,alias:n,modelAlias:r,template:e};d&&(v.filter=d),c&&(v.orderBy=c),-1==a.indexOf(".")&&(v.placeHolder=p),o=i[a],o?f=a+"_"+o.push(v):(i[a]=[v],f=a+"_1"),v.placeHolderName=f,p.setAttribute("sn-placeholder",f),e.parentNode.insertBefore(p,e)})}).remove()}for(var u in i)for(var y=i[u],_=0,w=y.length;w>_;_++){var x=y[_],$=n(x.template);m($,"[sn-binding],[sn-model],[sn-on]").each(function(){var t=this,e=this.getAttribute("sn-binding"),i=this.getAttribute("sn-model"),o=this.getAttribute("sn-on");if(t.setAttribute("sn-id",++l),i&&(i=p(x,i),i&&(this.setAttribute("sn-collection",i.collection),this.setAttribute("sn-model",i.variable))),o){this.setAttribute("sn-on",d);var m=a[d];o.replace(b,function(t,e,i,s,o){-1==r.indexOf(e)&&(r[r.length]=e),m||(m=a[d]={});var l=i+s;m[e]=n.extend(f(o),{name:p(x,l)||l,repeat:x})}),d++}e&&e.replace(g,function(t,e,i,n,a){var r;i==x.alias?i=x.collectionName+"^child"+n:x.loopIndexAlias&&x.loopIndexAlias[i]?i=x.loopIndexAlias[i]+"^child.^"+i:(r=x.modelAlias[i])&&(i=r+"^child"+n),(s[i]||(s[i]=[])).push({el:l,prop:a?{prop:e,filter:h(a,x)}:e})})})}m(t,"[sn-binding],[sn-on]").each(function(){var t=this.getAttribute("sn-binding"),e=this.getAttribute("sn-on"),i=this;if(t&&t.replace(g,function(t,e,n,a,r){n+=a,(s[n]||(s[n]=[])).push({el:i,prop:r?{prop:e,filter:h(r)}:e})}),e){this.setAttribute("sn-on",d);var o=a[d];e.replace(b,function(t,e,i,s,l){-1==r.indexOf(e)&&(r[r.length]=e),o||(o=a[d]={}),o[e]=n.extend(f(l),{name:i+s})}),d++}})};var _=function(t,e,i){if(0==e.indexOf("style."))t.style[e.substr(6)]=i;else switch(e){case"text":t.innerHTML=s.encodeHTML(i);break;case"html":t.innerHTML=i;break;case"display":t.style.display=s.isFalse(i)?"none":"block"==i||"inline"==i||"inline-block"==i||"none"==i||"-webkit-box"==i?i:"";break;case"value":t.value!=i&&(t.value=i);break;case"style":n(t).css(i);break;case"class":"undefined"==typeof t.initClassName&&(t.initClassName=t.className||""),t.className=t.initClassName+" "+("string"!=typeof i&&i?l.join(i," "):i);break;default:null===i||void 0===i?t.removeAttribute(e):t.setAttribute(e,i)}},w=function(t,e,i,n){if(4==arguments.length&&!this.created){var s={};if(this.$el=n,this.model=s,this._key=e,this.data={},i instanceof w)this.parent=i,this.key=i.key?i.key+"."+e:e,this.root=i.root;else{if(!(i instanceof T))throw new Error("Model's parent mast be Collection or Model");this.parent=i,this.key=i.key+"^child",this.root=i.root}t&&this.set(t),i.data[e]=this.data,this.created=!0}};w.prototype=Object.create(r),n.extend(w.prototype,{constructor:w,_redraw:function(){var t;for(var e in this.model)t=this.model[e],t instanceof w||t instanceof T?t._redraw():this._syncView(e,t)},_syncView:function(t,e,i){var s,a,r,o,n=this.root.finder.bindings[t&&this.key?this.key+"."+t:this.key||t];if(n)for(var d=0,c=n.length;c>d;d++)s=n[d],a=s.el,r=s.prop,"string"!=typeof r?(o=r.filter(l,this,e,t,a),r=r.prop):o=e,this._elAttr(a,r,o,i);return this},_syncOwnView:function(){return this.root!=this&&(this._syncView("",this.data),this.created&&this.parent instanceof w&&this.parent.trigger("change:"+this._key,this.data),this.parent.shouldUpdateView&&this.parent._syncOwnView()),this},_elAttr:function(t,e,i,n){"number"==typeof t?m(n||this.$el,'[sn-id="'+t+'"]').each(function(){_(this,e,i)}):_(t,e,i)},get:function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),n.isArray(t)){for(var e=this,i=0,s=t.length;s>i;i++)if(e instanceof w)e=e.model[t[i]];else{if(!(e instanceof T))return null;e=e.models[t[i]]}return e}return this.model[t]},dirty:function(){var t,e={};for(var i in this.data)t=this.data[i],this.originalData[i]!=t&&(e[i]=t);return e},set:function(t,e){var s,a,r,i=this,o=this.model;if(i.shouldUpdateView=!1,n.isPlainObject(t))r=t;else{if("undefined"==typeof e)return e=t,t="",console.log(this,t,e),this.parent&&this.parent instanceof T&&(this.parent.data[this.parent.models.indexOf(this)]=e),this.data=e,void this._syncOwnView();(r={})[t]=e}this.originalData||(this.originalData=r);var c,l=[],d=[],a=!1,u=[];for(var h in r)this.data[h]=r[h];for(var h in r)if(s=o[h],c=r[h],s!==c){var m=h.split(".");if(m.length>1){t=m.pop(),o=this;for(var v,p=0,f=m.length;f>p;p++)if(h=m[p],v=o,o instanceof w)o=o.model[h],o||(o=v.model[h]=new w(null,h,v,v.$el),v.data[h]=o.data);else if(o instanceof T&&(o=o.models[h],!o))throw new Error("[Collection index is bigger than length!]");o.set(t,c)}else if(s instanceof w)null===c||void 0===c?s.clear():s.set(c);else if(s instanceof T){if(!n.isArray(c)){if(null!=c)throw new Error("[Array to "+typeof c+" error]不可改变"+h+"的数据类型");c=[]}s.set(c)}else n.isPlainObject(c)?d.push(o[h]=new w(null,h,this,this.$el),c):n.isArray(c)?(o[h]=new T,l.push(h)):(this.data[h]=c,o[h]=c,this.created&&(this.trigger("change:"+h,c),this!=this.root&&this.root.trigger("change:"+(this.key?this.key+"."+h:h),this,h,c)));u.push(h,c),a||(a=!0)}for(var p=0,f=d.length;f>p;p+=2)d[p].set(d[p+1]);for(var p=0,f=l.length;f>p;p++)t=l[p],o[t].constructor(this.data[t],t,this);if(a){this.root!=this&&this._syncOwnView();for(var p=0,f=u.length;f>p;p+=2)this._syncView(u[p],u[p+1])}return i.shouldUpdateView=!0,this},clear:function(){var t={};for(var e in this.data)t[e]=null;this.set(t)},toJSON:function(){return n.extend(!0,{},this.data)}});var x={contains:function(t,e){return-1!=t.indexOf(e)}},$=function(t,e){var i=this;if(this.list=[],this.collection=t,n.extend(this,e),this.selector='[sn-placeholder="'+this.placeHolderName+'"]',!this.placeHolder&&this.collection.parent.$el&&(this.placeHolder=this.collection.parent.$el.find(this.selector)[0]),this.isInCollection=!n.contains(document.body,this.placeHolder),this.filter){var s="{";for(var a in this.modelAlias){var r=this.modelAlias[a];s+=a+":model.parent.parent";for(var o=t.parent;o&&o.key!=r+"^child";)o=o.parent,s+=".parent";s+=".data,"}s+=this.alias+":model.data}";var l="var self=this,collection=this.collection;with($.extend({},collection.root.data,"+s+",filter)){",d=this.filter.replace(/^\s*\|\s*filter\s*\:/,"");l+="return "+d,l+="}",this.filter=new Function("filter","model",l);for(var c=d.split(/[\=\>\<\?\s\:\(\),]+/g),h=0,m=c.length;m>h;h++)if(!u.test(c[h])){var o,p=c[h].split("."),f=p[0];if(!f||x[f])continue;if(f==this.alias)p[0]=t.key+"^child";else{var r=this.modelAlias[f];r&&(p[0]=r+"^child")}t.root.on("change:"+p.join("."),function(){i.update()})}}};$.prototype={update:function(){var t=document.createDocumentFragment(),e=0,i=this.list,s=this.orderBy;s&&i.sort(function(t,e){return t=t.model.data[s],e=e.model.data[s],t>e?1:e>t?-1:0});for(var a=0,r=i.length;r>a;a++){var o=i[a];if(!this.filter||this.filter(x,o.model)){t.appendChild(o.el);var l=this.template.snIndexAlias;l&&o.model._syncView("^"+l,e,n(o.el).attr("sn-index-"+l,e)),e++}else o.el.parentNode&&o.el.parentNode.removeChild(o.el)}this.appendChild(t)},get:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t)return this.list[e]},add:function(t,e){this.list.push({model:t,el:e})},appendChild:function(t){this.isInCollection?this.collection.parent.$el.find(this.selector).add(this.placeHolder).before(t):this.placeHolder.parentNode.insertBefore(t,this.placeHolder)},clear:function(){for(var t=this.list.length-1;t>=0;t--)this.list[t].el.parentNode.removeChild(this.list[t].el);this.list.length=0},remove:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t){this.list[e].el.parentNode.removeChild(this.list[e].el),this.list.splice(e,1);break}}};var T=function(t,e,i){if(3==arguments.length){this.models=[],this.data=[],this.key=e,this._key=e,this.repeats=[],this.parent=i,i.key&&(this.key=i.key+"."+this.key),this.root=i.root;var n=this.root.finder.repeats[this.key];if(n)for(var a=0,r=n.length;r>a;a++)this.repeats.push(new $(this,n[a]));t&&this.set(t)}};T.prototype={constructor:T,model:w,forEach:function(t){for(var e,n=0,s=this.models.length;s>n;n++)e=this.models[n],t.call(this,e,n)},_redraw:function(){for(var t=0,e=this.models.length;e>t;t++){model=this.models[t];for(var i,t=0,e=this.repeats.length;e>t;t++)if(i=this.repeats[t],!i.get(model)){{var s=item.template.cloneNode(!0);n(s)}s.snModel=model,i.add(model,s),model.$el.push(s),i.update()}model._redraw()}},add:function(t){var e,i;this.shouldUpdateView=!1,n.isArray(t)||(t=[t]);for(var a=0,r=t.length;r>a;a++){var o=null,l=t[a];e=new this.model,i=this.data.length,this.models[i]=e,this.data[i]=l;for(var d=0,c=this.repeats.length;c>d;d++){var u=this.repeats[d],h=u.template.cloneNode(!0),m=n(h);h.snModel=e,u.add(e,h),o=o?o.add(m):m}e.constructor(l,i,this,o)}for(var a=0,c=this.repeats.length;c>a;a++)this.repeats[a].update();this._syncOwnView(),this.shouldUpdateView=!0},_syncOwnView:function(){return this.parent._syncView(this._key,this.data),this.created&&this.parent.trigger("change:"+this._key,this.data),this.parent.shouldUpdateView&&this.parent._syncOwnView(),this},set:function(t){this.data.length=0;for(var e=0,i=this.repeats.length;i>e;e++)this.repeats[e].clear();return this.add(t),this},get:function(t){return this.models[t]},remove:function(t){var e,i;"number"!=typeof t&&(t=this.models.indexOf(t));for(var n=0,s=this.repeats.length;s>n;n++)e=this.repeats[n],i=e.list[t].el,i.parentNode.removeChild(i),e.list.splice(t,1);this.models.splice(t,1),this.data.splice(t,1),this._syncOwnView()}},T.prototype.append=T.prototype.add;var k=function(t,e){return(t.getAttribute("sn-repeat-name")==e?t:n(t).closest('[sn-repeat-name="'+e+'"]')[0]).snModel},A=function(t,e){this.root=this,t&&(this.created||(this.data={},this.events=[],this.model={},this.key="",this.load(t),this.set(e),this.created=!0))};A.prototype=Object.create(w.prototype),n.extend(A.prototype,{constructor:A,load:function(t){return this.finder=new y(t),this.$el=t.on("input change","[sn-model]",n.proxy(this._inputChange,this)),this.bindEvents(),this},handleEvent:function(t){var l,d,c,h,e=t.currentTarget,i=n(e),s=t.type,a=e.getAttribute("sn-on"),r=this.finder.events[a],o=r[s],m=[t];if(o){l=o.name;for(var p=0;p<o.args.length;p++){var f=o.args[p],v=this;if(u.test(f))m.push(window.eval(f));else{if(o.repeat){var y,g=f.split("."),b=g.shift();if(o.repeat.alias==b)v=k(e,o.repeat.collectionName),f=g;else if(o.repeat.modelAlias[b])v=k(e,o.repeat.modelAlias[b]),f=g;else if(y=i.closest("[sn-index-"+f+"]")){m.push(y.attr("sn-index-"+f));continue}}m.push(v.get(f))}}"string"==typeof l?(h=l,d=this):(d=k(e,l.collection),h=l.variable),o.isExp?d.set(h,m[1]):(l=d.get(h),c=h.lastIndexOf("."),l&&l.apply(-1==c?d:d.get(h.substr(0,c)),m))}},bindEvents:function(){for(var e=0,i=this.finder.eventNames.length;i>e;e++){var s=this.finder.eventNames[e];-1==this.events.indexOf(s)&&(this.$el.on(s,"[sn-on]",n.proxy(this.handleEvent,this)),this.events[this.events.length]=s)}},scan:function(t){this.finder.scan(t),this._redraw(),this.bindEvents()},append:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.append(e),this.scan(e)},prepend:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.prepend(e),this.scan(e)},before:function(t,e){this.$el.find(t).before(e),this.scan(e)},after:function(t,e){this.$el.find(t).after(e),this.scan(e)},_inputChange:function(t){var e=t.currentTarget,i=e.getAttribute("sn-model"),n=e.getAttribute("sn-collection");n?k(e,n).set(i,e.value):this.set(i,e.value)},destory:function(){this.$el.off("input change","[sn-model]",this._inputChange)}}),A.extend=w.extend=T.extend=s.extend,e.ViewModel=A,e.filter=e.Filter=l});define("core/model2",["$","util","./base","./event"],function(t,e,i){var n=t("$"),s=t("util"),r=(t("./base"),t("./event")),d=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,c=/([a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*(.+?)){0,1}(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/,u=/\{\{(.+?)\}\}/g,h=/(^|[\=\>\<\?\s\:\(\),\%\+\-\*\/\[\]]+)([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+)*(?![a-zA-Z_0-9]*\()|'(?:\\'|[^'])*')/g,m=/\/(?:\\\/|[^\/])*\/[img]+|"(?:\\"|[^"])*"/g,p=function(t){for(var e=t.split("."),i=[],n=0;n<e.length;n++)i[n]=(0==n?"$data":i[n-1])+"."+e[n];for(var n=0;n<i.length;n++)i[n]=i[n]+"!=null&&"+i[n]+"!=undefined";return"("+i.join("&&")+"?"+t+':"")'},f=function(t,e){for(var i=t.length?t:[t],n=0,s=i.length;s>n;n++){var a=i[n];e(a,n,i),1==a.nodeType&&a.childNodes.length&&f(a.childNodes,e)}},v={contains:function(t,e){return-1!=t.indexOf(e)},util:s},g=function(t,e,i,n){if(t instanceof g)this.key=t.key?t.key+"."+e:e;else{if(!(t instanceof _))throw new Error("Model's parent mast be Collection or Model");this.key=t.key+"^child"}if(this._key=e,this.model={},this.parent=t,this.root=t.root,this.data=i,n){for(var s=0,a=n.length;a>s;s++)n[s].add(this);this.repeats=n}this.set(i)};g.prototype=Object.create(r),g.prototype.get=function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),n.isArray(t)){for(var e=this,i=0,s=t.length;s>i;i++)if(e instanceof g)e=e.model[t[i]];else{if(!(e instanceof _))return null;e=e.models[t[i]]}return e}return this.model[t]},g.prototype.set=function(t,e){var s,r,i=this,o=i.model;if(n.isPlainObject(t))r=t;else{if("undefined"==typeof e)return e=t,t="",this.parent instanceof _&&(this.parent.data[this.parent.models.indexOf(this)]=e),void(this.data=e);(r={})[t]=e}!this.root.init&&n.extend(this.data,r);for(var l in r)if(s=o[l],value=r[l],s!==value){var d=l.split(".");if(d.length>1){t=d.pop(),o=this;for(var h,c=0,u=d.length;u>c;c++)if(l=d[c],h=o,o instanceof g)o=o.model[l],o||(o=h.model[l]=new g(h,l,null),h.data[l]=o.data);else if(o instanceof _&&(o=o.models[l],!o))throw new Error("[Collection index is bigger than length!]");o.set(t,value)}else if(s instanceof g)null===value||void 0===value?s.clear():s.set(value);else if(s instanceof _){if(!n.isArray(value)){if(null!=value)throw new Error("[Array to "+typeof value+" error]不可改变"+l+"的数据类型");value=[]}s.set(value)}else n.isPlainObject(value)?o[l]=new g(this,l,value):n.isArray(value)?o[l]=new _(this,l,value):(o[l]=value,this.root.init||(this.trigger("change:"+l,value),this.root.trigger("sync:"+(this.key?this.key+"."+l:l).replace(/\./g,"/"),this,l,value)))}return i},g.prototype.clear=function(){var t={};for(var e in this.data)t[e]=null;this.set(t)},g.prototype.closest=function(t){for(var e=this.parent;null!=e;e=e.parent)if(e.key==t)return e},g.prototype.contains=function(t){for(var e=t.parent;null!=e;e=e.parent)if(e==this)return!0;return!1};var b=function(t){n.extend(this,t);for(var e=this,i=this.collectionName.split("."),s=this.parent;s;)if(s.alias==i[0]){i[0]=s.collectionName+"^child",this.collectionName=i.join(".");break}var a=document.createComment(this.collectionName);if(a.repeat=this,this.replacement=a,this.el.parentNode.insertBefore(a,this.el),this.el.parentNode.removeChild(this.el),this.collectionRepeats=[],this.filters){var r=this.viewModel.compileExpression("{{"+this.filters+"}}",this,function(t,i){for(var n=0;n<e.collectionRepeats.length;n++){var s=e.collectionRepeats[n];(i.parent==s.collection||i.contains(s.collection))&&s.update()}});this.filter=this.viewModel.fns.length,this.viewModel.fns.push(r)}},y=function(t,e){this.collection=t,this.repeat=e,e.collectionRepeats[e.collectionRepeats.length]=this,this.el=this.cloneNode(e.el),e.parent||(this.replacement=e.replacement),this.elements=[]};y.prototype.update=function(){var t=document.createDocumentFragment(),e=0,i=this.elements,n=this.repeat,s=n.orderBy;s&&i.sort(function(t,e){return t=t.model.data[s],e=e.model.data[s],t>e?1:e>t?-1:0});for(var a=0,r=i.length;r>a;a++){var o=i[a];void 0===n.filter||this.collection.root.fns[n.filter](v,o.model)?(t.appendChild(o),o.setAttribute("sn-index",e),n.indexAlias&&(o.setAttribute("sn-index-alias",n.indexAlias),this.collection.root.trigger("sync:"+n.collectionName+"/"+n.alias+"/"+n.indexAlias,o.model)),e++):o.parentNode&&o.parentNode.removeChild(o)}if(!this.replacement)for(var l=this.collection,d=l.parent;null!=d&&d!=l.root;d=d.parent)if(d instanceof g&&d.replacement)for(var a=0;a<d.replacement.length;a++)if(d.replacement[a].repeat==n){this.replacement=d.replacement[a];break}this.replacement.parentNode.insertBefore(t,this.replacement)},y.prototype.cloneNode=function(t,e){var n,i=t.cloneNode(!1);if(8==t.nodeType&&t.repeat)i.repeat=t.repeat,e&&(e.replacement||(e.replacement=[])).push(i);else if(t.bindings&&(i.bindings=t.bindings,e?(i.model=e,t._origin._elements.push(i),e.root.setElementAttribute(i)):i._origin=t),1==t.nodeType&&(n=t.childNodes.length))for(var s=0;n>s;s++)i.appendChild(this.cloneNode(t.childNodes[s],e));return i},y.prototype.add=function(t){var e=this.cloneNode(this.el,t);e.model=t,this.elements[this.elements.length]=e},y.prototype.clear=function(){for(var t=this.elements.length-1;t>=0;t--)this.elements[t].parentNode.removeChild(this.elements[t]);this.elements.length=0};var _=function(t,e,i){var n;if(this.models=[],this.parent=t,this.key=t.key?t.key+"."+e:e,this._key=e,this.root=t.root,this.repeats=[],n=t.root.repeats[this.key])for(var s=0;s<n.length;s++)this.repeats[this.repeats.length]=new y(this,n[s]);this.data=[],this.add(i),this.data=i};_.prototype.add=function(t){var e,i;n.isArray(t)||(t=[t]);for(var s=0,a=t.length;a>s;s++){var o=t[s];i=this.data.length,e=new g(this,i,o,this.repeats),this.models[i]=e,this.data[i]=o}for(var s=0,l=this.repeats.length;l>s;s++)this.repeats[s].update();var d=this.key.replace(/\./g,"/");this.root.trigger("sync:"+d,this.parent,this._key,this.data).trigger("sync:"+d+"/length",this.parent,this._key,this.data)},_.prototype.set=function(t){for(var e=this.repeats.length-1;e>=0;e--)this.repeats[e].clear();return this.data.length=0,this.add(t),this},_.prototype.get=function(t){return this.models[t]};var w=["tap","click","change","focus","blur"],x=function(t,e){this.data=n.extend(!0,{},e),this.model={},this.repeats={},this.fns=[],this.scan(t),this.init=!0,this.set(e),this.init=!1};x.prototype=Object.create(g.prototype),x.prototype.key="",x.prototype.compileExpression=function(t,e,i){var n=this,s="function(Filters,model,el){var $el=$(el);var $data=$.extend({},Filters,model.root.data";if(e){s+=",{";for(var a=e.parent;null!=a;a=a.parent)s+=a.alias+':model.closest("'+a.collectionName+'^child").data,',a.indexAlias&&(s+=a.indexAlias+":$el.closest('[sn-index-alias=\""+a.indexAlias+'"]\').attr("sn-index"),');s+=e.alias+":model.data",e.indexAlias&&(s+=","+e.indexAlias+":$el.closest('[sn-index-alias=\""+e.indexAlias+'"]\').attr("sn-index")'),s+="}"}var r=[];return s+=");with($data){return '"+t.replace(m,function(t){return r[r.length]=t,"``"+(r.length-1)+"~~"}).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(u,function(t,s){return"'+("+s.replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(h,function(t,s,a){var r=a.split("."),o=r[0];if("Math"==o||"$"==o||d.test(a)||!o||v[o])return s+a;var l;if(e)if(o==e.alias)r[0]=e.collectionName+"^child";else if(o==e.indexAlias)l=e;else for(var c=e.parent;null!=c;c=c.parent)c.alias==o?r[0]=c.collectionName+"^child":o==c.indexAlias&&(l=c);return l?n.on("sync:"+l.collectionName+"/"+l.alias+"/"+l.indexAlias,i):n.on("sync:"+r.join("/"),i),s+p(a)})+")+'"}).replace(/``(\d+)~~/g,function(t,e){return r[e]}),s+="';}}",s.replace("return ''+","return ").replace(/\+\'\'/g,"")},x.prototype.setElementAttribute=function(t,e){var i=this;if(t.bindings){{e?[e]:t.bindings}for(var e in t.bindings){var a=i.fns[t.bindings[e]](v,t.model||i,t);"textContent"==e?t.textContent!=a&&(t.textContent=a):"value"!=e||"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName?"html"==e||"sn-html"==e?t.innerHTML=a:"display"==e||"sn-display"==e?t.style.display=s.isFalse(a)?"none":"block"==a||"inline"==a||"inline-block"==a?a:"":t.getAttribute(e)!=a&&t.setAttribute(e,a):t.value!=a&&(t.value=a)}}},x.prototype.bindAttr=function(t,e,i,n){var s=this;if(s.root=this,u.test(i)){var a=function(i,a){if(n)for(var r=0;r<t._elements.length;r++){var o=t._elements[r];(a==a.root||o.model==a||a.contains(o.model))&&s.setElementAttribute(o,e)}else s.setElementAttribute(t,e)};(t.bindings||(t._elements=[],t.bindings={}))[e]=s.fns.length;var r=this.compileExpression(i,n,a);s.fns.push(r)}},x.prototype.getModel=function(t,e,i){for(var a,r,o,n=e.split("."),s=n[0],l=t;null!=l&&l!=document.body;l=l.parent)if(l.model&&!a&&(a=l.model),l.repeat&&l.repeat.alias==s){o=l.repeat.collectionName+"^child",r=l.model,n.shift();break}return r||(r=this),i&&i(r,n.join("."),a),r},x.prototype.scan=function(t){for(var e=this,i=[],s=n(t).on("input change","[sn-model]",function(t){var i=t.currentTarget,n=i.getAttribute("sn-model");e.getModel(i,n,function(t,e){t.set(e,i.value)})}),a=0;a<w.length;a++)s.on(w[a],"[sn-"+w[a]+"]",function(t){var i=t.currentTarget,n=i.getAttribute("sn-"+t.type);e.getModel(i,n,function(e,i,n){t.model=n,e.get(i).call(e,t)})});f(t,function(t,n,s){if(1==t.nodeType){var a=t.getAttribute("sn-repeat");if(null!=a){var r=a.match(c);a=new b({viewModel:e,parent:s.repeat,alias:r[1],indexAlias:r[2],collectionName:r[3],filters:r[4],orderBy:r[5],el:t}),(e.repeats[a.collectionName]||(e.repeats[a.collectionName]=[])).push(a)}else a=s.repeat;a&&(t.childNodes.repeat=a);for(var o=0;o<t.attributes.length;o++){var l=t.attributes[o].name,d=t.attributes[o].value;"sn-error"==l?l="onerror":"sn-src"==l&&(l="src"),("sn-display"==l||0!=l.indexOf("sn-"))&&e.bindAttr(t,l,d,a)}!a&&t.bindings&&(i[i.length]=t)}else 3==t.nodeType&&(e.bindAttr(t,"textContent",t.textContent,s.repeat),!s.repeat&&t.bindings&&(i[i.length]=t))}),this.fns=window.eval("["+this.fns.join(",")+"]");for(var a=0,r=i.length;r>a;a++)e.setElementAttribute(i[a])},e.ViewModel=x,e.Filters=v});define("core/page",["../widget/tip","$","util","./base","./view","./promise","../widget/dialog"],function(t,e,i){t("../widget/tip");var n=t("$"),s=t("util"),r=(t("./base"),t("./view")),o=t("./promise"),d=(t("../widget/dialog"),s.noop),h=(s.indexOf,Array.prototype.slice,s.getPath),m=r.extend({options:{route:null},application:null,el:'<div class="view"></div>',_setRoute:function(t){this.route=t,this.hash=t.hash,this.url=t.url,this.path=t.path,this._queries=this.queries,this.queries=n.extend({},t.queries)},loadTemplate:function(){var t=this,e=1,i=function(){e--,0==e&&(t.$el.html(t.razor.html(t.data)).appendTo(t.application.$el),t.trigger("Create"),t._promise.resolve())};return t.route.api&&(e++,n.ajax({url:t.route.api,type:"GET",dataType:"json",success:function(e){t.data=e,i(e)},error:function(t){i({success:!1,content:t.responseText})}})),seajs.use(t.route.template,function(e){t.razor=e,i()}),t._promise},initialize:function(){var t=this,e=o.resolve();t._promise=e,t.className=t.el.className,t._setRoute(t.options.route),t.application=t.options.application,t.on("Start",t.onStart).on("Resume",t.onResume).on("Show",t.onShow).on("Show",t._statusChange).on("Pause",t.onPause).on("Pause",t._statusChange).on("QueryChange",t.onQueryChange).on("QueryChange",t.checkQuery),t.$el.data("path")||(t.$el.data("url",t.url).data("path",t.path),e.then(t.loadTemplate,t)),e.then(t.onCreate,t).then(function(){t.trigger("Start"),t.checkQuery()})},onCreate:d,onStart:d,onResume:d,onShow:d,onStop:d,onRestart:d,onPause:d,_statusChange:function(t){"Pause"==this._status&&this.trigger("Resume"),this._status=t.type},onQueryChange:d,then:function(t){return this._promise.then(t,this),this},queryString:function(t,e){if("undefined"==typeof e)return this.route.queries[t];null===e||e===!1||""===e?delete this.route.queries[t]:this.route.queries[t]=e||"";var i=n.param(this.route.queries);location.hash=this.route.path+(i?"?"+i:"")},_queryActions:{},checkQuery:function(){var s,t=this,e=t.queries,i=t._queries;n.each(t._queryActions,function(t,n){if(s=e[t]||"",s&&!i||i&&s!=i[t]){var a=n.map[s];a.exec?a.exec=!1:a.fn.apply(n.ctx)}})},bindQueryAction:function(t,e,i){var s=this,r={},o={ctx:e,map:r};return n.each(i,function(n,a){var a=i[n],o=e[a],l={fn:o,exec:!1};r[n]=l,e[a]=function(){o.apply(e,arguments),s.queryString(t)!=n&&(l.exec=!0,s.queryString(t,n))}}),this._queryActions[t]=o,this},onResult:function(t,e){return this.listenTo(this.application,t,e)},setResult:function(){return this.application.trigger.apply(this.application,arguments),this},compareUrl:function(t){return h(t)===this.route.path.toLowerCase()},back:function(t){this.application.to(t)},forward:function(t){this.application.to(t)}});sl.Page=m,i.exports=m});define("core/route",[],function(t,e,i){var n=function(t){return(t.replace(/^#+|\/$/,"")||"/").toLowerCase()},s=function(t,e){var n,s,a,r,o,l,i=[];for(var d in t){if(n=t[d],s=[],l="^(?:/{0,1})"+d.replace(/(\/|^|\?)\{((?:.+?\{[^\}]+\}){0,}[^\}]*)\}/g,function(t,e,i){return o=i.split(":"),o.length>1&&(s.push(o.shift()),i=o.join(":")),e+"("+i+")"})+"$","string"==typeof n)throw new Error("Route options error");a=n.root||"/",r="/"!=a?a.replace(/^\//,"")+"/":"",i.push({regex:new RegExp(l),parts:s,template:r+n.template,view:r+n.controller,api:n.api,root:a})}this.isDebug=e!==!1,this.routes=i};s.prototype.match=function(t){var r,l,d,e=null,i={},s=t=n(t),a=t.indexOf("?"),o=this.routes;-1!=a?(r=t.substr(a+1),t=t.substr(0,a),r.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(t,e,n){return i[e]=decodeURIComponent(n),""})):r="";for(var c=0,u=o.length;u>c;c++)if(l=o[c],d=l.regex?t.match(l.regex):null){e={path:d[0],url:s,hash:"#"+s,root:l.root,template:l.template,"package":this.isDebug?!1:"/"==l.root?"controller":l.root.replace(/^\//,"")+"/controller",view:l.view,data:{},queryString:r,query:i,queries:i};for(var h=0,m=l.parts.length;m>h;h++)e.data[l.parts[h]]=d[h+1];l.api&&(e.api=l.api.replace(/\{([^\}]+?)\}/g,function(t,i){return e.data[i]}));break}return e},s.standardizeHash=n,i.exports=s});define("core/animation",["$","./linklist","graphics/matrix2d","graphics/tween","util"],function(t,e){for(var i=t("$"),n=t("./linklist"),s=t("graphics/matrix2d"),a=t("graphics/tween"),o=(t("util"),["webkit"]),l=0;l<o.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[o[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[l]+"CancelAnimationFrame"]||window[o[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var d=new n,c=!0,u=i.fx.cssPrefix+"transform",h={opacity:1},p=/(\d+\.\d+|\d+)\%/g,f=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,v=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,g=/(translate|skew|rotate|scale|matrix)\(([^\)]+)\)/g,b=/matrix\([^\)]+\)\s*$/,y=function(t){if(t){t instanceof Array||(t=[t]);for(var e=0,i=t.length;i>e;e++)"string"==typeof t[e]&&(t[e]=a[t[e].replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})])}else t=[a.easeOut];return t},_=function(t){var e=[];return i.each(t,function(t,i){e.push(isNaN(parseFloat(i))?0:parseFloat(i))}),e},w=function(t,e,i){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*i},x=function(t){var e=new s;return t.replace(g,function(t,i,n){e["matrix"==i?"append":i].apply(e,_(n.split(",")))}),e},$=function(t){var n,a,e={};return i.each(t,function(t,i){/matrix|translate|skew|rotate|scale|invert/.test(t)?("translate"===t?i=(e[u]||"")+" "+t+"("+i+")":(a||(a=new s),n=e[u]||"",i=a["matrix"==t?"append":t].apply(a,_(i.split(","))).toString(),i=b.test(n)?n.replace(b,i):n+" "+i),t=u):"transform"===t&&(t=u,a=null),e[t]=i}),{css:e,matrix:a}};e.transform=$,i.fn.transform=function(t){return this.css($(t).css),this},i.fn.matrix=function(t){return t instanceof s?(this.css(u,t.toString()),this):x(getComputedStyle(this[0],null)[u])};var T=function(){if(d.length){c=!1;for(var t,e,i,r,a=(+new Date,d._idlePrev);a!=d;){if(r=a._idlePrev,first=a.data,t=Date.now()-first.startTime,i=[],e=first.ease,t<=first.duration){for(var o=0,l=e.length;l>o;o++)i.push(e[o](t,first.from,first.to-first.from,first.duration)/100);first.step.apply(first,i)}else{for(var u=first.to/100,o=0,l=e.length;l>o;o++)i.push(u);first.step.apply(first,i),d._remove(a),first.finish&&first.finish(u)}a=r}requestAnimationFrame(T)}else c=!0},k=function(t){return t.startTime=Date.now(),t.ease=y(t.ease),t.stop=function(){d.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},A=function(t){for(var e=0,i=t.length;i>e;e++)d.append(k(t[e]));c&&T()},M=function(t){var e,n,s,a,r;this.el.each(function(){if(e=this._animationStyle,n=this._originStyle,0==t)r=n;else if(1>t){r={};for(var o in e)if(a=e[o],s=n[o],o==u){var l=s.match(v)||["",1,0,0,1,0,0],c=x(a);c.a=w(l[1],c.a,t),c.b=w(l[2],c.b,t),c.c=w(l[3],c.c,t),c.d=w(l[4],c.d,t),c.tx=w(l[5],c.tx,t),c.ty=w(l[6],c.ty,t),r[o]=c.toString()}else isNaN(parseFloat(a))?r[o]=a:(s=isNaN(parseFloat(s))?h[o]||0:parseFloat(s),r[o]=w(s,a,t))}else r=e;i(this).css(r)}),this._step&&this._step(t)},N=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},q=function(t){for(var e,n,a,l=0,d=t.length;d>l;l++)e=t[l],e.css&&(a=$(e.css),e.matrix=a.matrix,e.css=a.css,n=e.el=i(e.el),"object"==typeof e.start&&n.transform(e.start),n.each(function(){var t=this,n={},s={},a=getComputedStyle(t,null);i.each(e.css,function(e,i){"string"==typeof i&&(e==u?i=i.replace(f,function(e,i,n){return"translate("+(-1!==i.indexOf("%")?t.offsetWidth*parseFloat(i)/100:parseFloat(i))+"px,"+(-1!==n.indexOf("%")?t.offsetHeight*parseFloat(n)/100:parseFloat(n))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?i=i.replace(p,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(i=i.replace(p,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),s[e]=a[e],n[e]=i}),t._animationStyle=n,t._originStyle=s}),e._step=e.step,e.step=M,e._finish=e.finish,e.finish=N);return t},D=function(t){i.isArray(t)||(t=[t]),q(t),this.list=t};D.prototype.step=function(t){for(var e,i=this.list,n=0,s=i.length;s>n;n++)e=i[n],e.from=t,e.step(t/100);return this},D.prototype.animate=function(t,e,i){for(var n,s=this.list,a=0,r=s.length;r>a;a++)n=s[a],n.duration=t,n.to=e,n.finish=n.start=void 0;return n.finish=i,A(s),this},e.Animation=D,e.parallel=function(t){A(q(t))},e.animate=function(){var t=arguments,e={},i=0,n=t[i++];return"function"==typeof n?e.step=n:(e.el=n,e.css=t[i++]),e.duration=t[i++],e.ease=t[i++],e.finish=t[i],A([e]),e};var C={step:function(t){for(var n,e=0,i=this.momentums.length;i>e;e++)n=this.momentums[e],n.current=n.start+(n.result-n.start)*t;this.momentumStep.apply(this.ctx,this.momentums)},finish:function(){this.bounce()},bounce:function(){for(var e,i,a,t=0,n=0,s=this.momentums.length;s>n;n++)a=this.momentums[n],i=a.current<a.min?a.min:a.current>a.max?a.max:a.current,i!=a.current?(a.start=a.current,a.result=i,t++):a.divisor&&i%a.divisor!=0&&(e=a.divisor,a.start=a.current,a.result=e/2>i%e?i-i%e:i-i%e+e,t++);0==t?this.end.call(this.ctx):(this.duration=400,A([this]))}},j=function(t,e,i,n,s,a,r){var f,v,o=e-t,l=s-e,d=e-n,c=6e-4,u=Math.abs(o)/i,h=u*u/(2*c),m=0,p=0;return a=r||a,o>0&&h>l?(p=a/(6/(h/u*c))/2,l+=p,u=u*l/h,h=l):0>o&&h>d&&(p=a/(6/(h/u*c))/2,d+=p,u=u*d/h,h=d),h*=0>o?-1:1,p*=0>o?-1:1,m=u/c,v=e+h,0!=p&&(f=.15/(p/h),f>1&&(h-=p,p/=f,h+=p,v=e+h)),n>e&&n>v||e>s&&v>s?(h=0,m=0,outside=0,v=e):(r&&0==p&&(v=v%r==0?v:r/2>v%r?v-v%r:v-v%r+r,v=v>s?s:n>v?n:v,300>m&&(m=300),h=v-e),r&&m>400&&(m=400)),{dist:h,time:Math.round(m),outside:p,result:v,current:e,start:e,max:s,min:n,divisor:r}};e.step=w,e.momentum=function(t,e,n,s,a,r){var o=[],l={},d=0;if("number"==typeof t[0])t=[t];else if(!t.length)return void a.call(r);for(var h,c=0,u=t.length;u>c;c++)h=j.apply(this,t[c]),0!=h.dist&&(d=Math.max(d,h.time)),o.push(h);for(var h,c=0,u=o.length;u>c;c++)h=o[c],0!=h.outside&&(h.result=h.result-h.outside+400*h.outside/d);return i.extend(l,C,{ctx:r||l,momentums:o,momentumStep:n,duration:d,ease:s,end:a}),0!=d?(e&&l.duration>e&&(l.duration=e),A([l])):l.bounce(),l}});define("core/master",["$","util","./route"],function(t,e,i){var s=(t("$"),t("util")),a=t("./route"),r=s.getPath,o={checkQueryString:function(t,e){t.route.url!=e.url&&(t._setRoute(e),t.trigger("QueryChange"))},mapRoute:function(t,e){return this.route=new a(t,e),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[r(t)]=e},get:function(t,e){var i=this,n="string"==typeof t?i.route.match(t):t;if(n){var s=r(n.path),a=this._activities[s];null==a?!function(t){n["package"]?seajs.use(n["package"]+".js?v"+sl.buildVersion,t):t()}(function(){seajs.use(n.view,function(t){var o,r={application:i,route:n};null!=t?(o=i.$el.find('[data-path="'+n.path+'"]'),o.length&&(r.el=o),a=new t(r),i.set(s,a),a.then(function(){e.call(i,a,n)})):(i.skip++,location.hash=i._currentActivity.url)})}):e.call(i,a,n)}},remove:function(t){this._activities[r(t)]=void 0}};i.exports=o});define("core/app",["$","util","bridge","./base","./view","./master","./animation","./linklist","./promise","./touch","./route","./activity"],function(t,e,i){var n=t("$"),s=t("util"),a=t("bridge"),o=(t("./base"),t("./view")),l=t("./master"),c=t("./animation"),u=(t("./linklist"),t("./promise")),h=t("./touch"),m=t("./route"),v=(t("./activity"),s.noop,s.lastIndexOf),y=(Array.prototype.slice,s.getPath,m.standardizeHash),_=l.checkQueryString,w=function(e,i,s,a){a||(a=(e?s:i).toggleAnim);var r=t("anim/"+a),o=e?"open":"close",l="ease-out",c=n.extend({},r[o+"EnterAnimationFrom"]),d=n.extend({},r[o+"ExitAnimationFrom"]);return c.zIndex=e?r.openEnterZIndex:r.closeEnterZIndex,c.display="block",d.zIndex=e?r.openExitZIndex:r.closeExitZIndex,[{el:s.$el,start:c,css:r[o+"EnterAnimationTo"],ease:l},{el:i.$el,start:d,css:r[o+"ExitAnimationTo"],ease:l}]},x=function(t,e){t.startExit(),t.$el.siblings('.view:not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)},$=function(t){t.touch=new h(t.el,{start:function(){var e,i,t=this,n=t.touch.dx;if(t.touch.isDirectionY||t.swiperPromise)return void t.touch.stop();t.width=window.innerWidth;var s=t._currentActivity,a=t.isSwipeLeft=n>0;t.swiper=null,e=a?s.swipeLeftForwardAction?(i=!0,s.swipeLeftForwardAction):(i=!1,s.swipeLeftBackAction):s.swipeRightForwardAction?(i=!0,s.swipeRightForwardAction):(i=!1,s.swipeRightBackAction),e||(a&&"Left"==s.referrerDir?e=s.referrer:a||"Left"==s.referrerDir||(e=s.referrer),i=!1),e?(t.swiperPromise=new u,t.mask.show(),t.get(e,function(e){t.needRemove=null===e.el.parentNode,x(s,e),t.isSwipeOpen=i,t.swiper=new c.Animation(w(i,s,e)),t.swipeActivity=e,t.swiperPromise.resolve()})):t.swiperPromise=null},move:function(t){var i,e=this,n=e.touch.dx;e.swiperPromise&&e.swiperPromise.then(function(){return e.isSwipeLeft&&0>n||!e.isSwipeLeft&&n>0?void e.swiper.step(0):(i=100*Math.abs(n)/e.width,void e.swiper.step(i))},e)},stop:function(){var t=this;t.isCancelSwipe=t.touch.isMoveLeft!==t.isSwipeLeft||Math.abs(t.touch.dx)<=10,t.swiperPromise&&t.swiperPromise.then(function(){t.queue.then([200,t.isCancelSwipe?0:100,function(){var e=t.swipeActivity,i=t._currentActivity;t.isCancelSwipe?(i.isPrepareExitAnimation=!1,i.$el.addClass("active"),t.needRemove&&e.$el.remove(),t.mask.hide()):(t._currentActivity=t.swipeActivity,t.navigate(e.url,t.isSwipeOpen),e.finishEnterAnimation(),t.isSwipeOpen?(e.referrer=i.url,e.referrerDir=t.isSwipeLeft?"Right":"Left",i.trigger("Pause")):i.destroy()),t.queue.resolve()}],t.swiper.animate,t.swiper),t.swiperPromise=null})}},t)},k=o.extend(l,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,i=n(t.currentTarget),s=i.attr("href");return/^(http\:|https\:|javascript\:|mailto\:|tel\:)/.test(s)?sl.isInApp&&0==s.indexOf("http")?a.openInApp(s):i.addClass("js-link-default"):(t.preventDefault(),"tap"==t.type&&(/^#/.test(s)||(s="#"+s),null!=i.attr("back")?e.back(s):e.forward(s))),!1},"tap [data-back]":function(t){this.back(n(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(n(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},el:'<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div><div class="viewport"></div><canvas class="imagecanvas"></canvas><input type="text" style="position:absolute;height:20px;top: -20px;left:0px;box-sizing: border-box;">',backGesture:!0,initialize:function(){var t=this,e="tap click touchend touchmove touchstart";t.mask=n(t.$el[0]).off(e).on(e,!1),t.el=t.$el[1],t.canvas=t.$el[2],t.$input=t.$el[3],t.history=[],t.backGesture&&$(this);var i=!1;n(window).on("back",function(){var e=location.hash;""==e||"#"===e||"/"===e||"#/"===e?i?a.exit():(i=!0,setTimeout(function(){i=!1},2e3),sl.tip("再按一次退出程序")):t.back(t.history[t.history.length-2])})},start:function(e){var i=this,s=n(window),r=location.hash||"/",o=i.$el;i.queue=new u,e?(setTimeout(function(){o.appendTo(document.body),e.resolve()},e),e=new u):o.appendTo(document.body),i.$el=n(i.el),a.hasStatusBar&&i.$el.addClass("has_status_bar"),i.hash=r=y(r),i.historyPromise=(new u).resolve(),i.get(r,function(n){i.history.push(r),n.$el.appendTo(i.el),i._currentActivity=n,n.$el.transform(t("anim/"+n.toggleAnim).openEnterAnimationTo),n.then(e).then(function(){n.$el.addClass("active"),n.trigger("Appear").trigger("Show"),i.trigger("start"),i.queue.resolve()}),s.on("hashchange",function(){var e,t=i.hash=y(location.hash);i.hashChanged?(i.hashChanged=!1,i.historyPromise.resolve()):i.historyPromise.then(function(){e=v(i.history,t),-1==e?i.forward(t):i.back(t)})})}),s.one("load",function(){location.hash||(location.hash="/")})},_toggle:function(t,e,i){var n=this,s=n._currentActivity,a=t.url,r=e.isForward,o=e.duration||400;return n.navigate(a,r),s.path==t.path?(_(s,t),void n.queue.resolve()):void n.get(t,function(l){n._currentActivity=l,x(s,l),_(l,t),l.then(function(){l.trigger("Appear")});var h,d="cubic-bezier(.34,.86,.54,.99)",u=w(r,s,l,e.toggleAnim);r&&(l.referrer=s.url,l.referrerDir=s.swipeRightForwardAction==a?"Left":"Right"),t.referrer=s.url,setTimeout(function(){l.finishEnterAnimation(),i&&i(l),n.queue.resolve()},o+48);for(var m=0,p=u.length;p>m;m++)h=u[m],h.ease=d,h.duration=o,h.el.css(c.transform(h.start).css).animate(h.css,o,d)})},navigate:function(t,e){var i=this;i.historyPromise.then(function(){var n,s=t!==y(location.hash);if(i.hashChanged=s,e)i.history.push(t),s&&(location.hash=t);else if(n=v(i.history,t),-1==n)i.history.length=0,i.history.push(t),s&&(location.hash=t);else{var a=n+1-i.history.length;s&&a&&history.go(a),i.history.length=n+1}return s?this:null})},forward:function(t,e){var i=this.route.match(t);i&&this.queue.then(function(){var t=this._currentActivity;return(e||(e={})).isForward=!0,this._toggle(i,e,function(){t.trigger("Pause")}),this.queue},this)},back:function(t,e){var i=this.route.match(t);i&&this.queue.then(function(){var t=this._currentActivity;return(e||(e={})).isForward=!1,this._toggle(i,e,function(){t.destroy()}),this.queue},this)}});return k});define("core/activity",["./page","util","widget/scroll","widget/dialog"],function(t,e,i){var n=t("./page"),s=t("util"),a=t("widget/scroll"),r=t("widget/dialog"),l=(Array.prototype.slice,n.extend({toggleAnim:"def",onHtmlLoad:function(){var t=this;if(!t.swipeRightBackAction){var e=t.$("header [data-back]");e.length&&(t.swipeRightBackAction=e.attr("data-back")||"/")}t._scrolls=a.bind(t.$(".scrollview"))},onLoad:s.noop,initialize:function(){this.on("Create",this.onHtmlLoad),this.one("Show",this.onLoad),this.on("Destroy",this._onDestroy),n.prototype.initialize.apply(this,arguments)},_onDestroy:function(){this._scrolls&&$.each(this._scrolls,function(t,e){e.destory()}),this.application.remove(this.url)},isExiting:!1,startExit:function(){var t=this;if(!t.isExiting){t.isExiting=!0;var e=t.application;e.activeInput&&(e.activeInput.blur(),e.activeInput=null),e.mask.show(),t.$el.removeClass("active")}},finishEnterAnimation:function(){var t=this;t.application.mask.hide(),t.isExiting=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})},prompt:function(t,e,i){i="function"==typeof e?e:i,e="function"==typeof e?"":e;var n=this._prompt;n||(this._prompt=n=this.createDialog("prompt",{top:"25%",content:'<input type="text" class="prompt-text" />',buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok(this.$input.val())}}]}),n.$input=n.$(".prompt-text")),n.title(t||"请输入").show(),n.$input.val(e).focus(),n.ok=$.proxy(i,this)},confirm:function(t,e,i){"function"==typeof e&&(i=e,e=t,t="提示");var n=this._confirm;n||(this._confirm=n=this.createDialog("confirm",{buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok()}}]})),n.title(t).show(),n.content(e),n.ok=$.proxy(i,this)},createDialog:function(t,e){var i=this,n=new r(e);return i.bindQueryAction(t,n,{show:"show","":"hide"}),n},forward:function(t,e,i){this.application.forward(t,e,i)},back:function(t,e,i){this.application.back(t,e,i)}}));return l});define("core/touch",["$","util","animation","./event"],function(t,e,i){var n=t("$"),a=(t("util"),t("animation")),r=t("./event"),l=(Array.prototype.slice,function(t,e,i){var s=this,a=n(t);s.$el=a,s.el=a[0],s.options=e||{},s.ctx=i||s,a.on("touchstart",n.proxy(s._start,s)).on("touchmove",n.proxy(s._move,s)).on("touchend",n.proxy(s._end,s)),s.options.stop&&s.on("stop",s.options.stop,s.ctx)});return l.prototype={minDelta:0,on:r.on,trigger:r.trigger,_stopMomentum:function(){return this.momentum?(this.momentum.stop&&this.momentum.stop(),this._isClickStopAni=!0,!0):!1},_start:function(t){var e=this,i=t.touches[0];e.pointX=e.startX=e.sx=i.pageX,e.pointY=e.startY=e.sy=i.pageY,e.isTouchStop=!1,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e.isClickStopMomentum=e._stopMomentum()},_move:function(t){if(!this.isTouchStop){var e=this,i=t.touches[0],n=e.startX-i.pageX,s=e.startY-i.pageY,a=t.timeStamp||Date.now();if(e.deltaX=n,e.deltaY=s,e.dx=e.sx-i.pageX,e.dy=e.sy-i.pageY,!e.isTouchStart){var r=Math.abs(n)>=e.minDelta&&Math.abs(n)>Math.abs(s),o=!r;if(!o&&!r)return!1;if(e.isTouchStart=!0,e.isDirectionY=o,e.isDirectionX=r,e.dir=r,e.isInit||(e.options.init&&e.options.init.call(e.ctx),e.isInit=!0),e.options.start.call(e.ctx),e.isTouchStop)return}return e.options.move.call(e.ctx,n,s),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-i.pageX>0?!0:e.pointX==i.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-i.pageY>0?!0:e.pointY==i.pageY?e.isMoveTop:!1,e.pointX=i.pageX,e.pointY=i.pageY,a-e.startTime>300&&(e.startTime=a,e.startX=i.pageX,e.startY=i.pageY,e.options.resetStartTime&&e.options.resetStartTime.call(e.ctx)),!1}},stop:function(){this.isTouchStop=!0},addMomentumOptions:function(t,e,i,n,s,a){return this.momentumOptions.push([t||0,e||0,this.duration,i||0,n||0,s||0,a]),this},_momentum:function(){this.options.momentum&&this.options.momentum.apply(this.ctx,arguments)},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},_end:function(t){var e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.momentum.finish(),e._isClickStopAni=!1,void(t.cancelTap=!0);if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop)){e.isTouchStop=!0,n(t.target).trigger("touchcancel");var r=(t.changedTouches[0],(t.timeStamp||Date.now())-e.startTime);return e.duration=r,300>r||!e.momentum?(e.momentumOptions=[],e.options.beforeMomentum&&e.options.beforeMomentum.call(e.ctx,r),e.momentum=a.momentum(e.momentumOptions,e.options.maxDuration,e._momentum,e.options.ease||"ease",e._stop,e)):e.momentum.finish(),!1}},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}},l});define("widget/scrollview",["$","core/animation","core/event","core/touch","util"],function(t,e,i){var n=t("$"),a=(t("core/animation"),t("core/event")),r=t("core/touch"),l=(t("util"),function(t){return n('<div class="sl_scroller" style="width:100%;"></div>').append(t.children()).appendTo(t.html(""))}),c=function(t,e){var i=this;i.options=e=n.extend({},i.options,e),i.$el=n(t).css({overflow:"hidden"}),i.el=i.$el[0],i.$scroller=l(i.$el),i.scroller=i.$scroller[0],i.touch=new r(i.$el,i,i)};c.prototype={options:{ease:"ease",hScroll:!0,vScroll:!0},off:a.off,on:a.on,trigger:a.trigger,init:function(){var t=this.$scroller.matrix();this.x=-t.tx,this.minX=0,this.y=-t.ty,this.minY=0},start:function(){var t=this,e=t.touch;return t.wrapperW=t.el.clientWidth,t.scrollW=t.scroller.offsetWidth,t.maxX=Math.max(t.scrollW-t.wrapperW,0),t._startLeft=t.startLeft=t.x,t.wrapperH=t.el.clientHeight,t.scrollH=t.scroller.offsetHeight,t.maxY=Math.max(t.scrollH-t.wrapperH,0),t._startTop=t.startTop=t.y,(!t.options.hScroll||t.wrapperW>=t.scrollW)&&e.isDirectionX||(!t.options.vScroll||t.wrapperH>=t.scrollH)&&e.isDirectionY?void e.stop():void 0},stop:function(){this.$el.triggerHandler("scrollStop",[0,this.y])},resetStartTime:function(){this.options.hScroll&&(this.startLeft=this.startLeft+this.touch.deltaX,this._startLeft=this.x),this.options.vScroll&&(this.startTop=this.startTop+this.touch.deltaY,this._startTop=this.y)},move:function(){if(this.options.hScroll){var t=this.startLeft+this.touch.deltaX;(t<this.minX||t>this.maxX)&&(t=this.options.vScroll?t<this.minX?this.minX:this.maxX:t<this.minX?t+(this.minX-t)/2:t+(this.maxX-t)/2),this.x=t}if(this.options.vScroll){var e=this.startTop+this.touch.deltaY;(e<this.minY||e>this.maxY)&&(e=e<this.minY?e+(this.minY-e)/2:e+(this.maxY-e)/2),this.y=e}this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},beforeMomentum:function(){this.touch.addMomentumOptions(this._startLeft,this.x,this.minX,this.maxX,this.wrapperW,this.divisorX).addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH)},momentum:function(t,e){this.x=t.current,this.y=e?e.current||0:0,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},scrollTo:function(t,e,i){this.x=t>this.maxX?this.maxX:t<this.minX?this.minX:t,this.y=e>this.maxY?this.maxY:e<this.minY?this.minY:e;var n={"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"};i?this.$scroller.animate(n,i,"ease-out"):this.$scroller.css(n)},destory:function(){this.touch.destory()}},c.addScroller=l,i.exports=c});define("widget/scroll",["$","util","animation","./scrollview"],function(t,e,i){var n=t("$"),s=t("util"),r=(t("animation"),t("./scrollview")),o=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var i=t.touches[0],n=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=i.pageY,e.sx=i.pageX,e.st=n.ty,e.isLoading=e.isDataLoading}else e.isStop=!0},l=function(t){var e=this;if(!e.isStop){var i=t.touches[0],n=i.pageY-e.sy,s=i.pageX-e.sx;if(e.oy=e.pointY,e.pointY=i.pageY,!e.isStart&&(e.isStart=!0,Math.abs(s)>Math.abs(n)))return void(e.isStop=!0);var a=e.scrollView;return(a?a.y<=0:0==e.parentNode.scrollTop)&&n>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*n,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"释放刷新":"下拉刷新")):e.isStop=!0,e.isStop}},c=function(t){var e=this;if(e.isMoved){var i=t.changedTouches[0],n=e.ty,s=n>70?50:0,r=e.oy-i.pageY,o=function(){e.$.animate({"-webkit-transform":"translate(0px,"+s+"px) translateZ(0)"},300+-1*r,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==s||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(s=0),-5>r?e.$.animate({"-webkit-transform":"translate(0px,"+(n-1.5*r)+"px) translateZ(0)"},-1.5*r,"cubic-bezier(.3,.78,.43,.95)",o):o(),!1}},d=function(){var t=this,e=function(){if(t.$refresh.html("下拉刷新"),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix().ty,i=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+i+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh.call(this,e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},u=function(t){var e=this,i=t.touches[0],n=+new Date;e.__sy=e.__pointY=e.__startY=i.pageY,e.__sx=i.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isStop=!1,e.__isScroll=n-e.__timestamp<=32},h=function(t){if(!this.__isStop){var e=this,i=t.touches[0],n=i.pageY,a=i.pageY-e.__sy,r=i.pageX-e.__sx;if(e.__oPointY=e.__pointY,e.__pointY=n,e.__isMoved=!0,e.__isScroll=!0,!e.__isStart){if(e.__isStart=!0,e.options.vScroll&&!e.options.hScroll&&Math.abs(r)>Math.abs(a)||!e.options.vScroll&&e.options.hScroll&&Math.abs(r)<Math.abs(a))return void(e.__isStop=!0);e.__isStop=!1}s.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70),t.stopPropagation(),e.__timestamp=+new Date}},p=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,n(t).trigger("scrollStop",[0,t.scrollTop])},80)},m=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,(t.__hasMomentum||s.android)&&p(t)},f=function(t){var e=this,a=(n(e),t.changedTouches[0].pageY),r=Math.abs(e.__oPointY-a);s.ios&&5>r?(e._isStop=!1,p(e),e.__hasMomentum=!1):e.__hasMomentum=!0,t.cancelTap=e.__isScroll,e.__isScroll&&!e.__isStop&&t.stopPropagation(),e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){e=n.extend({vScroll:!0,hScroll:!1},e);var i=[];return("string"==typeof t?n(t):t).each(function(){var p,t=this,a=n(t).addClass("scrollview");if(e&&e.useScroll||s.android&&parseFloat(s.osVersion<=2.3)?(p=new r(this,e),i.push(p)):(this.__timestamp=0,s.ios?a.css({"-webkit-overflow-scrolling":"touch",overflowY:e.vScroll?"scroll":"",overflowX:e.hScroll?"scroll":""}):s.android&&a.css({overflowY:e.vScroll?"auto":"",overflowX:e.hScroll?"auto":""}),a.on("scroll",m).on("touchstart",u).on("touchmove",h).on("touchend",f).each(function(){this._scrollTop=0,this.options=e}),i.push({destory:function(){a.off("touchstart",u).off("touchmove",h).off("touchend",f).off("scroll",m)}})),s.isInApp&&a.on("focus","input:not(readonly),textarea:not(readonly)",function(e){var i=e.currentTarget,s=0;do s+=i.offsetTop,i=i.offsetParent;while(i&&t!=i&&!n.contains(i,t));var a=s-(window.innerHeight/4-60);p?p.scrollTo(p.x,a):t.scrollTop=a}),e&&e.refresh){var v=a.children(".sl_scroller"),g=n('<div class="refresh" style="height:50px;text-align:center;line-height:50px;">下拉刷新</div>');v.length||(v=r.addScroller(a));var b=v[0];b.$refresh=g,b.$=v,b.options=e,p&&(b.scrollView=p),v.css({marginTop:-50}).prepend(g).on("touchstart",o).on("touchmove",l).on("touchend",c).on("refresh",d),this.$refresh=g,this.$scroller=v}}),i}});define("widget/tip",["$","util","core/promise"],function(t,e){var i=t("$"),s=(t("util"),t("core/promise")),a=i('<div class="tip" style="display:none"></div>').on(i.fx.transitionEnd,function(){a.hasClass("tip-hide")&&a.hide()}).appendTo(document.body);e.promise=s.resolve(),e.msec=2e3,e.show=function(){a.hasClass("tip-show")||a.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return a.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){a.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/base","./../core/view"],function(t,e,i){var n=t("$"),s=t("util"),a=t("./../core/view"),r=null,o=a.extend({events:{"click .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:s.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<len;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=s.pick(t.options,["top","isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[n(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,r.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(){var t=this;t._visible||(t._visible=!0,r||(r=n('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: #888;opacity: 0.5;z-index:2000;display:none"></div>').appendTo(document.body)),r.show(),null==t.el.parentNode&&t.$el.appendTo(document.body),t.$el.css({"-webkit-transform":"",display:"block",top:this.options.top||"50%"}),t.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){t.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}}),l=null;sl.prompt=function(t,e,i){e||(e=t,t="请输入"),l?l.title(t):l=new o({title:t,content:'<input type="text" class="prompt-text" /><input type="password" class="prompt-text" />'}),l.$("input.prompt-text").val("").hide().filter('[type="'+(i||"text")+'"]').show(),l.options.onOk=function(){return e.call(this,this.$('input[type="'+(i||"text")+'"].prompt-text').val())},l.options.onCancel=function(){e.call(this)},l.show(),n(window).one("hashchange",function(){l.hide()})};var c=null;return sl.confirm=function(t,e,i,s){var a={};n.isPlainObject(t)?(s=i,i=e,n.extend(a,t)):n.isFunction(e)?(s=i,i=e,a.content=t,a.title="确认提示"):(a.title=t,a.content=e),c?(c.title(a.title),c.$(".dialog-content").html(a.content),c.$(".js_hide").html(a.cancelText||"取消"),c.$(".js_ok").html(a.okText||"确定")):c=new o(a),c.options.onOk=function(){i.call(this)},c.options.onCancel=function(){s&&s.call(this)},c.show(),n(window).one("hashchange",function(){c.hide()})},o});define("widget/loading",["$","util","bridge","./../core/view"],function(t,e,i){var n=t("$"),s=t("util"),r=(t("./../core/view"),t("bridge")),o=[],l=["$el","method","headers","dataType","xhrFields","beforeSend","success","complete","pageIndex","pageSize","append","$content","$scroll","checkData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"],c=function(t){n.extend(this,s.pick(t,l)),t.el&&(this.$el=n(t.el)),this.el=this.$el[0],this.params=t.params||{},this.error=t.error||this.showError,this.$content=t.$content||this.$el,this.$scroll=t.$scroll||this.$el,this.pageEnabled=!(!t.pageEnabled&&!this.append),this.setUrl(t.url)};c.prototype={KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_MSG:"msg",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",method:"POST",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},complete:s.noop,showError:function(t){var e=this;if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.errorTemplate).on("tap",".js_reload",n.proxy(e.reload,e)).appendTo(e.$el));"string"==typeof t&&(t={msg:t,showReload:!0});var s=i.find(".js_reload");t.showReload?s.show():s.hide(),i.find(".js_msg").html(t.msg||"加载失败"),i.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},showLoading:function(){var e,t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=n(t.template)),t.$loading.show().appendTo(t.$el)[0].clientHeight,t.$loading.addClass("show"),t.$refreshing&&t.$refreshing.hide()):(e=this.$refreshing,e.show().find(".js_msg").html("正在载入..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.removeClass("show")},setHeaders:function(t,e){var i;e?(i={})[t]=e:i=t,void 0===this.headers&&(this.headers={});for(var n in i)this.headers[n]=i[n];return this},setParam:function(t,e){var i;e?(i={})[t]=e:i=t;for(var n in i)e=i[n],n==this.KEY_PAGE?this.pageIndex=e:n==this.KEY_PAGESIZE?this.pageSize=e:this.params[n]=e;return this},getParam:function(t){return t?this.params[t]:this.params},setUrl:function(t){return this.url=r.url(t),this},reload:function(t,e){this.isLoading||this.setParam(this.KEY_PAGE,1).load(t,e)},load:function(t,e){var i=this;if(!(i.beforeSend&&i.beforeSend()===!1||i.isLoading)){i.isLoading=!0,"function"==typeof t&&(e=t,t=null),i.pageEnabled&&(i.params[i.KEY_PAGE]=i.pageIndex,i.params[i.KEY_PAGESIZE]=i.pageSize);for(var s=o.length-1;s>=0;s--)o[s].disableAutoRefreshing();t&&t.showLoading===!1||i.showLoading(),i._xhr=n.ajax({url:i.url,headers:i.headers,xhrFields:i.xhrFields,data:i.params,type:i.method,dataType:i.dataType,cache:!1,error:function(t){i.hideLoading();var n={};n[i.DATAKEY_MSG]="网络错误",i.error(n,t),e&&e.call(i,n,null)},success:function(t,n,s){i.hideLoading(),!i.check||i.check(t)?i.checkData===!1||i.hasData(t)?(1!=i.pageIndex&&i.append?i.append(t,n,s):i.success(t,n,s),e&&e.call(i,null,t),i.append&&i.checkAutoRefreshing(t)):i.dataNotFound(t):(i.error(t),e&&e.call(i,t,null))},complete:function(){i._xhr=null,i.isLoading=!1,i.complete()}})}},_refresh:function(){this.abort().load()},dataNotFound:function(t,e){var i=this;1==i.pageIndex?i.showError("暂无数据"):setTimeout(function(){i.$refreshing.hide()},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$scroll.height()>=n.$refreshing[0].offsetTop&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE])?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){(this.$refreshing||(this.$refreshing=n(this.refresh)).appendTo(this.$content)).show();this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",n.proxy(this._scroll,this)),this._scrollY=this.el.scrollTop,this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.$refreshing&&this.$refreshing.hide())},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$error&&this.$error.off("tap",".js_reload",this.reload)}},c.extend=s.extend,i.exports=c});define("widget/slider",["$","util","./scrollview"],function(t,e,i){var n=t("$"),s=t("util"),a=t("./scrollview"),r=function(t,e){e=n.extend({maxDuration:400,ease:"ease-out",hScroll:!0,vScroll:!1,width:"100%",index:0,autoLoop:!1,align:"center"},e),n.extend(this,s.pick(e,["width","loop","render","template","itemTemplate","navTemplate"]));var c,i=this,r=e.data;"string"==typeof i.itemTemplate&&(i.itemTemplate=s.template(i.itemTemplate)),"string"==typeof i.width&&(i.width=parseInt(i.width.replace("%",""))),void 0!=e.index&&(e.index=e.index),a.call(this,n(i.template({items:"",navs:""})).appendTo(n(t)),e),e=this.options,i.touch.on("stop",i.stop,i),c=i.$slider=i.$el.find(".js_slider"),e.imagelazyload&&(i.bind("Change",function(){i._loadImage()}),i._loadImage()),e.arrow&&(i._prev=n('<span class="slider-pre js_pre"></span>').appendTo(i.$el),i._next=n('<span class="slider-next js_next"></span>').appendTo(i.$el),i.$el.on("tap",".js_pre",function(t){i.index(e.index-1,300)}).on("tap",".js_next",function(t){i.index(e.index+1,300)})),n(window).on("ortchange",n.proxy(i._adjustWidth,i)),i.set(r),e.autoLoop&&i.startAutoLoop(),i.$el.css({overflow:""})};n.extend(r.prototype,a.prototype,{loop:!1,set:function(t){var s,e=this,i="",a=e.options;n.isArray(t)||(t=[t]),e._data=t,e.length=t.length;for(var r=0,o=t.length;o>r;r++)i+=e.render(t[r]);s=e.$slider.html(i),e.$items=s.children(),e.slider=s[0],e.length<2?e.loop=!1:e.width<100&&(e.loop=!1);var l;e.loop?(s.prepend(e.$items.eq(e.length-1).clone()),s.append(e.$items.eq(0).clone()),e.$items=s.children(),a.index++):l=e.length,e._adjustWidth(),e.index(a.index)},startAutoLoop:function(){var t=this;t.loopTimer||(t.loopTimer=setTimeout(function(){t.index(t.options.index+1),t.loopTimer=setTimeout(arguments.callee,t.options.autoLoop)},t.options.autoLoop))},stopAutoLoop:function(){clearTimeout(this.loopTimer),this.loopTimer=null},start:function(){var t=this,e=t.touch,i=this._getIndex();return!t.options.hScroll&&e.isDirectionX||!t.options.vScroll&&e.isDirectionY?void e.stop():(t.maxX=Math.min(t.scrollerW-t.wrapperW,Math.min(i+1,t.loop?i+1:t.length-Math.floor(t.containerW/t.wrapperW))*t.wrapperW),t.minX=Math.max(0,(i-1)*t.wrapperW),t._startLeft=t.startLeft=t.x,void t.stopAutoLoop())},index:function(t,e){var n,i=this.options;return"undefined"==typeof t?i.index:(t=t>=this.$items.length?0:0>t?this.$items.length-1:t,this.loop&&(0==t?(t=this.$items.length-2,this.maxX=n=t*this.wrapperW):t==this.$items.length-1&&(t=1,this.minX=n=t*this.wrapperW)),i.index!=t&&(this.currentData=this._data[this.loop?t-1:t],i.index=t,this._change()),n=t*this.wrapperW,void this.scrollTo(n,0,e))},_getIndex:function(){var t=Math.round(this.x/this.wrapperW);return t},data:function(t){return this._data[t||this.options.index]},appendItem:function(){var t=n(this.renderItem(""));return this.$slider.append(t),this.length++,this._adjustWidth(),t},prependItem:function(){var t=n(this.renderItem(""));return this.$slider.prepend(t),this.length++,this._adjustWidth(),t},render:function(t){return this.renderItem(this.itemTemplate(t))},renderItem:s.template('<li class="js_slide_item slider-item"><%=$data%></li>'),itemTemplate:"<%= %>",navTemplate:s.template('<ol class="js_slide_navs slider-nav"><%for(var i=0,len=items.length;i<len;i++){%><li class="slide-nav-item <%=current%> slide-nav-item"></li><%}%></ol>'),template:s.template('<div class="slider"><ul class="js_slider slider-con"><%=items%></ul><%=navs%></div>'),stop:function(){var t=this,i=(t.x,this._getIndex());t.index(i),t.options.autoLoop&&t.startAutoLoop()},_loadImage:function(){var t=this,e=t.$items.eq(t.options.index);e.prop("_detected")||(t.loop&&(1==t.options.index?e=e.add(t.$slider.children(":last-child")):t.options.index==t.length+1&&(e=e.add(t.$slider.children(":first-child")))),e.find("img[lazyload]").each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),e.prop("_detected",!0))},_adjustWidth:function(){var t=this,e=t.$slider,i=e.children(),n=i.length;t.containerW=t.el.clientWidth,t.wrapperW=t.containerW*t.width/100,t.scrollerW=t.wrapperW*n,e.css({width:n*t.width+"%",marginLeft:"center"==this.options.align?(100-t.width)/2+"%":"0%"}),t.x=t.wrapperW*t.options.index,t.$scroller.css({"-webkit-transform":"translate("+-t.x+"px,0px) translateZ(0)"}),t.divisorX=t.wrapperW,i.css({width:100/n+"%"})},_change:function(){{var t=this,e=t.options;t.loop?e.index-1:e.index}e.onChange&&e.onChange.call(t,e.index),t.trigger("change",e.index,t.currentData)},destory:function(){n(window).off("ortchange",this._adjustWidth),that.$el.off("tap"),this.touch.destory()}}),i.exports=r});define("anim/def",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{translate:"99%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}}}),define("anim/menu",function(){return{openEnterZIndex:1,closeEnterZIndex:2,openExitZIndex:3,closeExitZIndex:1,openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationFrom:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationTo:{translate:"0,0",scale:"1,1"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}}),define("anim/dialog",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{scale:".3,.3",opacity:0},openEnterAnimationTo:{scale:"1,1",opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{scale:"1,1",translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{scale:"1,1",opacity:1},closeExitAnimationTo:{scale:".3,.3",opacity:0}}}),define("anim/fade",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{opacity:0},openEnterAnimationTo:{opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{opacity:1},closeExitAnimationTo:{opacity:0}}});